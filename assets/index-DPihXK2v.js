function P1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function j1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ly={exports:{}},su={},uy={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fo=Symbol.for("react.element"),D1=Symbol.for("react.portal"),M1=Symbol.for("react.fragment"),V1=Symbol.for("react.strict_mode"),L1=Symbol.for("react.profiler"),O1=Symbol.for("react.provider"),F1=Symbol.for("react.context"),U1=Symbol.for("react.forward_ref"),B1=Symbol.for("react.suspense"),z1=Symbol.for("react.memo"),$1=Symbol.for("react.lazy"),Ip=Symbol.iterator;function W1(t){return t===null||typeof t!="object"?null:(t=Ip&&t[Ip]||t["@@iterator"],typeof t=="function"?t:null)}var cy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dy=Object.assign,hy={};function Zs(t,e,n){this.props=t,this.context=e,this.refs=hy,this.updater=n||cy}Zs.prototype.isReactComponent={};Zs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fy(){}fy.prototype=Zs.prototype;function wh(t,e,n){this.props=t,this.context=e,this.refs=hy,this.updater=n||cy}var Eh=wh.prototype=new fy;Eh.constructor=wh;dy(Eh,Zs.prototype);Eh.isPureReactComponent=!0;var Sp=Array.isArray,my=Object.prototype.hasOwnProperty,Th={current:null},py={key:!0,ref:!0,__self:!0,__source:!0};function gy(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)my.call(e,r)&&!py.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Fo,type:t,key:i,ref:o,props:s,_owner:Th.current}}function H1(t,e){return{$$typeof:Fo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fo}function q1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ap=/\/+/g;function fc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?q1(""+t.key):e.toString(36)}function Ka(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Fo:case D1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+fc(o,0):r,Sp(s)?(n="",t!=null&&(n=t.replace(Ap,"$&/")+"/"),Ka(s,e,n,"",function(d){return d})):s!=null&&(kh(s)&&(s=H1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ap,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Sp(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+fc(i,l);o+=Ka(i,e,n,u,s)}else if(u=W1(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+fc(i,l++),o+=Ka(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ba(t,e,n){if(t==null)return t;var r=[],s=0;return Ka(t,r,"","",function(i){return e.call(n,i,s++)}),r}function G1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ct={current:null},Qa={transition:null},K1={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:Qa,ReactCurrentOwner:Th};function yy(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:ba,forEach:function(t,e,n){ba(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ba(t,function(){e++}),e},toArray:function(t){return ba(t,function(e){return e})||[]},only:function(t){if(!kh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=Zs;Z.Fragment=M1;Z.Profiler=L1;Z.PureComponent=wh;Z.StrictMode=V1;Z.Suspense=B1;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K1;Z.act=yy;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=dy({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Th.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)my.call(e,u)&&!py.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Fo,type:t.type,key:s,ref:i,props:r,_owner:o}};Z.createContext=function(t){return t={$$typeof:F1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:O1,_context:t},t.Consumer=t};Z.createElement=gy;Z.createFactory=function(t){var e=gy.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:U1,render:t}};Z.isValidElement=kh;Z.lazy=function(t){return{$$typeof:$1,_payload:{_status:-1,_result:t},_init:G1}};Z.memo=function(t,e){return{$$typeof:z1,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=Qa.transition;Qa.transition={};try{t()}finally{Qa.transition=e}};Z.unstable_act=yy;Z.useCallback=function(t,e){return ct.current.useCallback(t,e)};Z.useContext=function(t){return ct.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return ct.current.useDeferredValue(t)};Z.useEffect=function(t,e){return ct.current.useEffect(t,e)};Z.useId=function(){return ct.current.useId()};Z.useImperativeHandle=function(t,e,n){return ct.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return ct.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return ct.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return ct.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return ct.current.useReducer(t,e,n)};Z.useRef=function(t){return ct.current.useRef(t)};Z.useState=function(t){return ct.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return ct.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return ct.current.useTransition()};Z.version="18.3.1";uy.exports=Z;var j=uy.exports;const Q1=j1(j),J1=P1({__proto__:null,default:Q1},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1=j,X1=Symbol.for("react.element"),Z1=Symbol.for("react.fragment"),eE=Object.prototype.hasOwnProperty,tE=Y1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nE={key:!0,ref:!0,__self:!0,__source:!0};function vy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)eE.call(e,r)&&!nE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:X1,type:t,key:i,ref:o,props:s,_owner:tE.current}}su.Fragment=Z1;su.jsx=vy;su.jsxs=vy;ly.exports=su;var c=ly.exports,_y={exports:{}},Nt={},xy={exports:{}},wy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Q){var X=z.length;z.push(Q);e:for(;0<X;){var ye=X-1>>>1,le=z[ye];if(0<s(le,Q))z[ye]=Q,z[X]=le,X=ye;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Q=z[0],X=z.pop();if(X!==Q){z[0]=X;e:for(var ye=0,le=z.length,ke=le>>>1;ye<ke;){var ln=2*(ye+1)-1,un=z[ln],cn=ln+1,dn=z[cn];if(0>s(un,X))cn<le&&0>s(dn,un)?(z[ye]=dn,z[cn]=X,ye=cn):(z[ye]=un,z[ln]=X,ye=ln);else if(cn<le&&0>s(dn,X))z[ye]=dn,z[cn]=X,ye=cn;else break e}}return Q}function s(z,Q){var X=z.sortIndex-Q.sortIndex;return X!==0?X:z.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,g=3,w=!1,A=!1,N=!1,I=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(z){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=z)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function D(z){if(N=!1,T(z),!A)if(n(u)!==null)A=!0,fi(L);else{var Q=n(d);Q!==null&&an(D,Q.startTime-z)}}function L(z,Q){A=!1,N&&(N=!1,x(_),_=-1),w=!0;var X=g;try{for(T(Q),p=n(u);p!==null&&(!(p.expirationTime>Q)||z&&!C());){var ye=p.callback;if(typeof ye=="function"){p.callback=null,g=p.priorityLevel;var le=ye(p.expirationTime<=Q);Q=t.unstable_now(),typeof le=="function"?p.callback=le:p===n(u)&&r(u),T(Q)}else r(u);p=n(u)}if(p!==null)var ke=!0;else{var ln=n(d);ln!==null&&an(D,ln.startTime-Q),ke=!1}return ke}finally{p=null,g=X,w=!1}}var F=!1,k=null,_=-1,E=5,b=-1;function C(){return!(t.unstable_now()-b<E)}function P(){if(k!==null){var z=t.unstable_now();b=z;var Q=!0;try{Q=k(!0,z)}finally{Q?S():(F=!1,k=null)}}else F=!1}var S;if(typeof v=="function")S=function(){v(P)};else if(typeof MessageChannel<"u"){var Rt=new MessageChannel,br=Rt.port2;Rt.port1.onmessage=P,S=function(){br.postMessage(null)}}else S=function(){I(P,0)};function fi(z){k=z,F||(F=!0,S())}function an(z,Q){_=I(function(){z(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){A||w||(A=!0,fi(L))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var X=g;g=Q;try{return z()}finally{g=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=g;g=z;try{return Q()}finally{g=X}},t.unstable_scheduleCallback=function(z,Q,X){var ye=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ye+X:ye):X=ye,z){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=X+le,z={id:f++,callback:Q,priorityLevel:z,startTime:X,expirationTime:le,sortIndex:-1},X>ye?(z.sortIndex=X,e(d,z),n(u)===null&&z===n(d)&&(N?(x(_),_=-1):N=!0,an(D,X-ye))):(z.sortIndex=le,e(u,z),A||w||(A=!0,fi(L))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var Q=g;return function(){var X=g;g=Q;try{return z.apply(this,arguments)}finally{g=X}}}})(wy);xy.exports=wy;var rE=xy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sE=j,At=rE;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ey=new Set,oo={};function Zr(t,e){Ds(t,e),Ds(t+"Capture",e)}function Ds(t,e){for(oo[t]=e,t=0;t<e.length;t++)Ey.add(e[t])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),td=Object.prototype.hasOwnProperty,iE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Np={},Cp={};function oE(t){return td.call(Cp,t)?!0:td.call(Np,t)?!1:iE.test(t)?Cp[t]=!0:(Np[t]=!0,!1)}function aE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lE(t,e,n,r){if(e===null||typeof e>"u"||aE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){He[t]=new dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];He[e]=new dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){He[t]=new dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){He[t]=new dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){He[t]=new dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){He[t]=new dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){He[t]=new dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){He[t]=new dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){He[t]=new dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var bh=/[\-:]([a-z])/g;function Ih(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bh,Ih);He[e]=new dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bh,Ih);He[e]=new dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bh,Ih);He[e]=new dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){He[t]=new dt(t,1,!1,t.toLowerCase(),null,!1,!1)});He.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){He[t]=new dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sh(t,e,n,r){var s=He.hasOwnProperty(e)?He[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lE(e,n,s,r)&&(n=null),r||s===null?oE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Dn=sE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ia=Symbol.for("react.element"),hs=Symbol.for("react.portal"),fs=Symbol.for("react.fragment"),Ah=Symbol.for("react.strict_mode"),nd=Symbol.for("react.profiler"),Ty=Symbol.for("react.provider"),ky=Symbol.for("react.context"),Nh=Symbol.for("react.forward_ref"),rd=Symbol.for("react.suspense"),sd=Symbol.for("react.suspense_list"),Ch=Symbol.for("react.memo"),$n=Symbol.for("react.lazy"),by=Symbol.for("react.offscreen"),Rp=Symbol.iterator;function Si(t){return t===null||typeof t!="object"?null:(t=Rp&&t[Rp]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,mc;function Oi(t){if(mc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mc=e&&e[1]||""}return`
`+mc+t}var pc=!1;function gc(t,e){if(!t||pc)return"";pc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{pc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Oi(t):""}function uE(t){switch(t.tag){case 5:return Oi(t.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 2:case 15:return t=gc(t.type,!1),t;case 11:return t=gc(t.type.render,!1),t;case 1:return t=gc(t.type,!0),t;default:return""}}function id(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fs:return"Fragment";case hs:return"Portal";case nd:return"Profiler";case Ah:return"StrictMode";case rd:return"Suspense";case sd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ky:return(t.displayName||"Context")+".Consumer";case Ty:return(t._context.displayName||"Context")+".Provider";case Nh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ch:return e=t.displayName||null,e!==null?e:id(t.type)||"Memo";case $n:e=t._payload,t=t._init;try{return id(t(e))}catch{}}return null}function cE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return id(e);case 8:return e===Ah?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Iy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dE(t){var e=Iy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sa(t){t._valueTracker||(t._valueTracker=dE(t))}function Sy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Iy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function od(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ay(t,e){e=e.checked,e!=null&&Sh(t,"checked",e,!1)}function ad(t,e){Ay(t,e);var n=fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ld(t,e.type,n):e.hasOwnProperty("defaultValue")&&ld(t,e.type,fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ld(t,e,n){(e!=="number"||yl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fi=Array.isArray;function ks(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ud(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Fi(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fr(n)}}function Ny(t,e){var n=fr(e.value),r=fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Mp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Cy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Cy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Aa,Ry=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Aa=Aa||document.createElement("div"),Aa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Aa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ao(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hE=["Webkit","ms","Moz","O"];Object.keys(qi).forEach(function(t){hE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qi[e]=qi[t]})});function Py(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qi.hasOwnProperty(t)&&qi[t]?(""+e).trim():e+"px"}function jy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Py(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var fE=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dd(t,e){if(e){if(fE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function hd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fd=null;function Rh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var md=null,bs=null,Is=null;function Vp(t){if(t=zo(t)){if(typeof md!="function")throw Error(U(280));var e=t.stateNode;e&&(e=uu(e),md(t.stateNode,t.type,e))}}function Dy(t){bs?Is?Is.push(t):Is=[t]:bs=t}function My(){if(bs){var t=bs,e=Is;if(Is=bs=null,Vp(t),e)for(t=0;t<e.length;t++)Vp(e[t])}}function Vy(t,e){return t(e)}function Ly(){}var yc=!1;function Oy(t,e,n){if(yc)return t(e,n);yc=!0;try{return Vy(t,e,n)}finally{yc=!1,(bs!==null||Is!==null)&&(Ly(),My())}}function lo(t,e){var n=t.stateNode;if(n===null)return null;var r=uu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var pd=!1;if(bn)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){pd=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{pd=!1}function mE(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Gi=!1,vl=null,_l=!1,gd=null,pE={onError:function(t){Gi=!0,vl=t}};function gE(t,e,n,r,s,i,o,l,u){Gi=!1,vl=null,mE.apply(pE,arguments)}function yE(t,e,n,r,s,i,o,l,u){if(gE.apply(this,arguments),Gi){if(Gi){var d=vl;Gi=!1,vl=null}else throw Error(U(198));_l||(_l=!0,gd=d)}}function es(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lp(t){if(es(t)!==t)throw Error(U(188))}function vE(t){var e=t.alternate;if(!e){if(e=es(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Lp(s),t;if(i===r)return Lp(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Uy(t){return t=vE(t),t!==null?By(t):null}function By(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=By(t);if(e!==null)return e;t=t.sibling}return null}var zy=At.unstable_scheduleCallback,Op=At.unstable_cancelCallback,_E=At.unstable_shouldYield,xE=At.unstable_requestPaint,Ie=At.unstable_now,wE=At.unstable_getCurrentPriorityLevel,Ph=At.unstable_ImmediatePriority,$y=At.unstable_UserBlockingPriority,xl=At.unstable_NormalPriority,EE=At.unstable_LowPriority,Wy=At.unstable_IdlePriority,iu=null,Xt=null;function TE(t){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(iu,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:IE,kE=Math.log,bE=Math.LN2;function IE(t){return t>>>=0,t===0?32:31-(kE(t)/bE|0)|0}var Na=64,Ca=4194304;function Ui(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ui(l):(i&=o,i!==0&&(r=Ui(i)))}else o=n&~s,o!==0?r=Ui(o):i!==0&&(r=Ui(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wt(e),s=1<<n,r|=t[n],e&=~s;return r}function SE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Wt(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=SE(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function yd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hy(){var t=Na;return Na<<=1,!(Na&4194240)&&(Na=64),t}function vc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wt(e),t[e]=n}function NE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Wt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function jh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var oe=0;function qy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gy,Dh,Ky,Qy,Jy,vd=!1,Ra=[],er=null,tr=null,nr=null,uo=new Map,co=new Map,Hn=[],CE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fp(t,e){switch(t){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":uo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":co.delete(e.pointerId)}}function Ni(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=zo(e),e!==null&&Dh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function RE(t,e,n,r,s){switch(e){case"focusin":return er=Ni(er,t,e,n,r,s),!0;case"dragenter":return tr=Ni(tr,t,e,n,r,s),!0;case"mouseover":return nr=Ni(nr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return uo.set(i,Ni(uo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,co.set(i,Ni(co.get(i)||null,t,e,n,r,s)),!0}return!1}function Yy(t){var e=jr(t.target);if(e!==null){var n=es(e);if(n!==null){if(e=n.tag,e===13){if(e=Fy(n),e!==null){t.blockedOn=e,Jy(t.priority,function(){Ky(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ja(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_d(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fd=r,n.target.dispatchEvent(r),fd=null}else return e=zo(n),e!==null&&Dh(e),t.blockedOn=n,!1;e.shift()}return!0}function Up(t,e,n){Ja(t)&&n.delete(e)}function PE(){vd=!1,er!==null&&Ja(er)&&(er=null),tr!==null&&Ja(tr)&&(tr=null),nr!==null&&Ja(nr)&&(nr=null),uo.forEach(Up),co.forEach(Up)}function Ci(t,e){t.blockedOn===e&&(t.blockedOn=null,vd||(vd=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,PE)))}function ho(t){function e(s){return Ci(s,t)}if(0<Ra.length){Ci(Ra[0],t);for(var n=1;n<Ra.length;n++){var r=Ra[n];r.blockedOn===t&&(r.blockedOn=null)}}for(er!==null&&Ci(er,t),tr!==null&&Ci(tr,t),nr!==null&&Ci(nr,t),uo.forEach(e),co.forEach(e),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)Yy(n),n.blockedOn===null&&Hn.shift()}var Ss=Dn.ReactCurrentBatchConfig,El=!0;function jE(t,e,n,r){var s=oe,i=Ss.transition;Ss.transition=null;try{oe=1,Mh(t,e,n,r)}finally{oe=s,Ss.transition=i}}function DE(t,e,n,r){var s=oe,i=Ss.transition;Ss.transition=null;try{oe=4,Mh(t,e,n,r)}finally{oe=s,Ss.transition=i}}function Mh(t,e,n,r){if(El){var s=_d(t,e,n,r);if(s===null)Ac(t,e,r,Tl,n),Fp(t,r);else if(RE(s,t,e,n,r))r.stopPropagation();else if(Fp(t,r),e&4&&-1<CE.indexOf(t)){for(;s!==null;){var i=zo(s);if(i!==null&&Gy(i),i=_d(t,e,n,r),i===null&&Ac(t,e,r,Tl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ac(t,e,r,null,n)}}var Tl=null;function _d(t,e,n,r){if(Tl=null,t=Rh(r),t=jr(t),t!==null)if(e=es(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fy(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tl=t,null}function Xy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wE()){case Ph:return 1;case $y:return 4;case xl:case EE:return 16;case Wy:return 536870912;default:return 16}default:return 16}}var Jn=null,Vh=null,Ya=null;function Zy(){if(Ya)return Ya;var t,e=Vh,n=e.length,r,s="value"in Jn?Jn.value:Jn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ya=s.slice(t,1<r?1-r:void 0)}function Xa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pa(){return!0}function Bp(){return!1}function Ct(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pa:Bp,this.isPropagationStopped=Bp,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){},isPersistent:Pa}),e}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lh=Ct(ei),Bo=xe({},ei,{view:0,detail:0}),ME=Ct(Bo),_c,xc,Ri,ou=xe({},Bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ri&&(Ri&&t.type==="mousemove"?(_c=t.screenX-Ri.screenX,xc=t.screenY-Ri.screenY):xc=_c=0,Ri=t),_c)},movementY:function(t){return"movementY"in t?t.movementY:xc}}),zp=Ct(ou),VE=xe({},ou,{dataTransfer:0}),LE=Ct(VE),OE=xe({},Bo,{relatedTarget:0}),wc=Ct(OE),FE=xe({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),UE=Ct(FE),BE=xe({},ei,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zE=Ct(BE),$E=xe({},ei,{data:0}),$p=Ct($E),WE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qE[t])?!!e[t]:!1}function Oh(){return GE}var KE=xe({},Bo,{key:function(t){if(t.key){var e=WE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oh,charCode:function(t){return t.type==="keypress"?Xa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),QE=Ct(KE),JE=xe({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wp=Ct(JE),YE=xe({},Bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oh}),XE=Ct(YE),ZE=xe({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),eT=Ct(ZE),tT=xe({},ou,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nT=Ct(tT),rT=[9,13,27,32],Fh=bn&&"CompositionEvent"in window,Ki=null;bn&&"documentMode"in document&&(Ki=document.documentMode);var sT=bn&&"TextEvent"in window&&!Ki,ev=bn&&(!Fh||Ki&&8<Ki&&11>=Ki),Hp=" ",qp=!1;function tv(t,e){switch(t){case"keyup":return rT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ms=!1;function iT(t,e){switch(t){case"compositionend":return nv(e);case"keypress":return e.which!==32?null:(qp=!0,Hp);case"textInput":return t=e.data,t===Hp&&qp?null:t;default:return null}}function oT(t,e){if(ms)return t==="compositionend"||!Fh&&tv(t,e)?(t=Zy(),Ya=Vh=Jn=null,ms=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ev&&e.locale!=="ko"?null:e.data;default:return null}}var aT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aT[t.type]:e==="textarea"}function rv(t,e,n,r){Dy(r),e=kl(e,"onChange"),0<e.length&&(n=new Lh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qi=null,fo=null;function lT(t){mv(t,0)}function au(t){var e=ys(t);if(Sy(e))return t}function uT(t,e){if(t==="change")return e}var sv=!1;if(bn){var Ec;if(bn){var Tc="oninput"in document;if(!Tc){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),Tc=typeof Kp.oninput=="function"}Ec=Tc}else Ec=!1;sv=Ec&&(!document.documentMode||9<document.documentMode)}function Qp(){Qi&&(Qi.detachEvent("onpropertychange",iv),fo=Qi=null)}function iv(t){if(t.propertyName==="value"&&au(fo)){var e=[];rv(e,fo,t,Rh(t)),Oy(lT,e)}}function cT(t,e,n){t==="focusin"?(Qp(),Qi=e,fo=n,Qi.attachEvent("onpropertychange",iv)):t==="focusout"&&Qp()}function dT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return au(fo)}function hT(t,e){if(t==="click")return au(e)}function fT(t,e){if(t==="input"||t==="change")return au(e)}function mT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gt=typeof Object.is=="function"?Object.is:mT;function mo(t,e){if(Gt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!td.call(e,s)||!Gt(t[s],e[s]))return!1}return!0}function Jp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yp(t,e){var n=Jp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jp(n)}}function ov(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ov(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function av(){for(var t=window,e=yl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yl(t.document)}return e}function Uh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pT(t){var e=av(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ov(n.ownerDocument.documentElement,n)){if(r!==null&&Uh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Yp(n,i);var o=Yp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gT=bn&&"documentMode"in document&&11>=document.documentMode,ps=null,xd=null,Ji=null,wd=!1;function Xp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wd||ps==null||ps!==yl(r)||(r=ps,"selectionStart"in r&&Uh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ji&&mo(Ji,r)||(Ji=r,r=kl(xd,"onSelect"),0<r.length&&(e=new Lh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ps)))}function ja(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gs={animationend:ja("Animation","AnimationEnd"),animationiteration:ja("Animation","AnimationIteration"),animationstart:ja("Animation","AnimationStart"),transitionend:ja("Transition","TransitionEnd")},kc={},lv={};bn&&(lv=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function lu(t){if(kc[t])return kc[t];if(!gs[t])return t;var e=gs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lv)return kc[t]=e[n];return t}var uv=lu("animationend"),cv=lu("animationiteration"),dv=lu("animationstart"),hv=lu("transitionend"),fv=new Map,Zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(t,e){fv.set(t,e),Zr(e,[t])}for(var bc=0;bc<Zp.length;bc++){var Ic=Zp[bc],yT=Ic.toLowerCase(),vT=Ic[0].toUpperCase()+Ic.slice(1);_r(yT,"on"+vT)}_r(uv,"onAnimationEnd");_r(cv,"onAnimationIteration");_r(dv,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(hv,"onTransitionEnd");Ds("onMouseEnter",["mouseout","mouseover"]);Ds("onMouseLeave",["mouseout","mouseover"]);Ds("onPointerEnter",["pointerout","pointerover"]);Ds("onPointerLeave",["pointerout","pointerover"]);Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_T=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bi));function eg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yE(r,e,void 0,t),t.currentTarget=null}function mv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;eg(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;eg(s,l,d),i=u}}}if(_l)throw t=gd,_l=!1,gd=null,t}function he(t,e){var n=e[Id];n===void 0&&(n=e[Id]=new Set);var r=t+"__bubble";n.has(r)||(pv(e,t,2,!1),n.add(r))}function Sc(t,e,n){var r=0;e&&(r|=4),pv(n,t,r,e)}var Da="_reactListening"+Math.random().toString(36).slice(2);function po(t){if(!t[Da]){t[Da]=!0,Ey.forEach(function(n){n!=="selectionchange"&&(_T.has(n)||Sc(n,!1,t),Sc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Da]||(e[Da]=!0,Sc("selectionchange",!1,e))}}function pv(t,e,n,r){switch(Xy(e)){case 1:var s=jE;break;case 4:s=DE;break;default:s=Mh}n=s.bind(null,e,n,t),s=void 0,!pd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ac(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=jr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Oy(function(){var d=i,f=Rh(n),p=[];e:{var g=fv.get(t);if(g!==void 0){var w=Lh,A=t;switch(t){case"keypress":if(Xa(n)===0)break e;case"keydown":case"keyup":w=QE;break;case"focusin":A="focus",w=wc;break;case"focusout":A="blur",w=wc;break;case"beforeblur":case"afterblur":w=wc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=zp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=LE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=XE;break;case uv:case cv:case dv:w=UE;break;case hv:w=eT;break;case"scroll":w=ME;break;case"wheel":w=nT;break;case"copy":case"cut":case"paste":w=zE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Wp}var N=(e&4)!==0,I=!N&&t==="scroll",x=N?g!==null?g+"Capture":null:g;N=[];for(var v=d,T;v!==null;){T=v;var D=T.stateNode;if(T.tag===5&&D!==null&&(T=D,x!==null&&(D=lo(v,x),D!=null&&N.push(go(v,D,T)))),I)break;v=v.return}0<N.length&&(g=new w(g,A,null,n,f),p.push({event:g,listeners:N}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==fd&&(A=n.relatedTarget||n.fromElement)&&(jr(A)||A[In]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(A=n.relatedTarget||n.toElement,w=d,A=A?jr(A):null,A!==null&&(I=es(A),A!==I||A.tag!==5&&A.tag!==6)&&(A=null)):(w=null,A=d),w!==A)){if(N=zp,D="onMouseLeave",x="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(N=Wp,D="onPointerLeave",x="onPointerEnter",v="pointer"),I=w==null?g:ys(w),T=A==null?g:ys(A),g=new N(D,v+"leave",w,n,f),g.target=I,g.relatedTarget=T,D=null,jr(f)===d&&(N=new N(x,v+"enter",A,n,f),N.target=T,N.relatedTarget=I,D=N),I=D,w&&A)t:{for(N=w,x=A,v=0,T=N;T;T=ls(T))v++;for(T=0,D=x;D;D=ls(D))T++;for(;0<v-T;)N=ls(N),v--;for(;0<T-v;)x=ls(x),T--;for(;v--;){if(N===x||x!==null&&N===x.alternate)break t;N=ls(N),x=ls(x)}N=null}else N=null;w!==null&&tg(p,g,w,N,!1),A!==null&&I!==null&&tg(p,I,A,N,!0)}}e:{if(g=d?ys(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var L=uT;else if(Gp(g))if(sv)L=fT;else{L=dT;var F=cT}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=hT);if(L&&(L=L(t,d))){rv(p,L,n,f);break e}F&&F(t,g,d),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&ld(g,"number",g.value)}switch(F=d?ys(d):window,t){case"focusin":(Gp(F)||F.contentEditable==="true")&&(ps=F,xd=d,Ji=null);break;case"focusout":Ji=xd=ps=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,Xp(p,n,f);break;case"selectionchange":if(gT)break;case"keydown":case"keyup":Xp(p,n,f)}var k;if(Fh)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ms?tv(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(ev&&n.locale!=="ko"&&(ms||_!=="onCompositionStart"?_==="onCompositionEnd"&&ms&&(k=Zy()):(Jn=f,Vh="value"in Jn?Jn.value:Jn.textContent,ms=!0)),F=kl(d,_),0<F.length&&(_=new $p(_,t,null,n,f),p.push({event:_,listeners:F}),k?_.data=k:(k=nv(n),k!==null&&(_.data=k)))),(k=sT?iT(t,n):oT(t,n))&&(d=kl(d,"onBeforeInput"),0<d.length&&(f=new $p("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=k))}mv(p,e)})}function go(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=lo(t,n),i!=null&&r.unshift(go(t,i,s)),i=lo(t,e),i!=null&&r.push(go(t,i,s))),t=t.return}return r}function ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=lo(n,i),u!=null&&o.unshift(go(n,u,l))):s||(u=lo(n,i),u!=null&&o.push(go(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xT=/\r\n?/g,wT=/\u0000|\uFFFD/g;function ng(t){return(typeof t=="string"?t:""+t).replace(xT,`
`).replace(wT,"")}function Ma(t,e,n){if(e=ng(e),ng(t)!==e&&n)throw Error(U(425))}function bl(){}var Ed=null,Td=null;function kd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bd=typeof setTimeout=="function"?setTimeout:void 0,ET=typeof clearTimeout=="function"?clearTimeout:void 0,rg=typeof Promise=="function"?Promise:void 0,TT=typeof queueMicrotask=="function"?queueMicrotask:typeof rg<"u"?function(t){return rg.resolve(null).then(t).catch(kT)}:bd;function kT(t){setTimeout(function(){throw t})}function Nc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ho(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ho(e)}function rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ti=Math.random().toString(36).slice(2),Yt="__reactFiber$"+ti,yo="__reactProps$"+ti,In="__reactContainer$"+ti,Id="__reactEvents$"+ti,bT="__reactListeners$"+ti,IT="__reactHandles$"+ti;function jr(t){var e=t[Yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[In]||n[Yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sg(t);t!==null;){if(n=t[Yt])return n;t=sg(t)}return e}t=n,n=t.parentNode}return null}function zo(t){return t=t[Yt]||t[In],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function uu(t){return t[yo]||null}var Sd=[],vs=-1;function xr(t){return{current:t}}function me(t){0>vs||(t.current=Sd[vs],Sd[vs]=null,vs--)}function ce(t,e){vs++,Sd[vs]=t.current,t.current=e}var mr={},st=xr(mr),pt=xr(!1),zr=mr;function Ms(t,e){var n=t.type.contextTypes;if(!n)return mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function gt(t){return t=t.childContextTypes,t!=null}function Il(){me(pt),me(st)}function ig(t,e,n){if(st.current!==mr)throw Error(U(168));ce(st,e),ce(pt,n)}function gv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,cE(t)||"Unknown",s));return xe({},n,r)}function Sl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mr,zr=st.current,ce(st,t),ce(pt,pt.current),!0}function og(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=gv(t,e,zr),r.__reactInternalMemoizedMergedChildContext=t,me(pt),me(st),ce(st,t)):me(pt),ce(pt,n)}var pn=null,cu=!1,Cc=!1;function yv(t){pn===null?pn=[t]:pn.push(t)}function ST(t){cu=!0,yv(t)}function wr(){if(!Cc&&pn!==null){Cc=!0;var t=0,e=oe;try{var n=pn;for(oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pn=null,cu=!1}catch(s){throw pn!==null&&(pn=pn.slice(t+1)),zy(Ph,wr),s}finally{oe=e,Cc=!1}}return null}var _s=[],xs=0,Al=null,Nl=0,Pt=[],jt=0,$r=null,yn=1,vn="";function Cr(t,e){_s[xs++]=Nl,_s[xs++]=Al,Al=t,Nl=e}function vv(t,e,n){Pt[jt++]=yn,Pt[jt++]=vn,Pt[jt++]=$r,$r=t;var r=yn;t=vn;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var i=32-Wt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,yn=1<<32-Wt(e)+s|n<<s|r,vn=i+t}else yn=1<<i|n<<s|r,vn=t}function Bh(t){t.return!==null&&(Cr(t,1),vv(t,1,0))}function zh(t){for(;t===Al;)Al=_s[--xs],_s[xs]=null,Nl=_s[--xs],_s[xs]=null;for(;t===$r;)$r=Pt[--jt],Pt[jt]=null,vn=Pt[--jt],Pt[jt]=null,yn=Pt[--jt],Pt[jt]=null}var St=null,bt=null,pe=!1,zt=null;function _v(t,e){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ag(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,St=t,bt=rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,St=t,bt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$r!==null?{id:yn,overflow:vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,St=t,bt=null,!0):!1;default:return!1}}function Ad(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nd(t){if(pe){var e=bt;if(e){var n=e;if(!ag(t,e)){if(Ad(t))throw Error(U(418));e=rr(n.nextSibling);var r=St;e&&ag(t,e)?_v(r,n):(t.flags=t.flags&-4097|2,pe=!1,St=t)}}else{if(Ad(t))throw Error(U(418));t.flags=t.flags&-4097|2,pe=!1,St=t}}}function lg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;St=t}function Va(t){if(t!==St)return!1;if(!pe)return lg(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kd(t.type,t.memoizedProps)),e&&(e=bt)){if(Ad(t))throw xv(),Error(U(418));for(;e;)_v(t,e),e=rr(e.nextSibling)}if(lg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bt=rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bt=null}}else bt=St?rr(t.stateNode.nextSibling):null;return!0}function xv(){for(var t=bt;t;)t=rr(t.nextSibling)}function Vs(){bt=St=null,pe=!1}function $h(t){zt===null?zt=[t]:zt.push(t)}var AT=Dn.ReactCurrentBatchConfig;function Pi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function La(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ug(t){var e=t._init;return e(t._payload)}function wv(t){function e(x,v){if(t){var T=x.deletions;T===null?(x.deletions=[v],x.flags|=16):T.push(v)}}function n(x,v){if(!t)return null;for(;v!==null;)e(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=ar(x,v),x.index=0,x.sibling=null,x}function i(x,v,T){return x.index=T,t?(T=x.alternate,T!==null?(T=T.index,T<v?(x.flags|=2,v):T):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,v,T,D){return v===null||v.tag!==6?(v=Lc(T,x.mode,D),v.return=x,v):(v=s(v,T),v.return=x,v)}function u(x,v,T,D){var L=T.type;return L===fs?f(x,v,T.props.children,D,T.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===$n&&ug(L)===v.type)?(D=s(v,T.props),D.ref=Pi(x,v,T),D.return=x,D):(D=il(T.type,T.key,T.props,null,x.mode,D),D.ref=Pi(x,v,T),D.return=x,D)}function d(x,v,T,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=Oc(T,x.mode,D),v.return=x,v):(v=s(v,T.children||[]),v.return=x,v)}function f(x,v,T,D,L){return v===null||v.tag!==7?(v=Fr(T,x.mode,D,L),v.return=x,v):(v=s(v,T),v.return=x,v)}function p(x,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Lc(""+v,x.mode,T),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ia:return T=il(v.type,v.key,v.props,null,x.mode,T),T.ref=Pi(x,null,v),T.return=x,T;case hs:return v=Oc(v,x.mode,T),v.return=x,v;case $n:var D=v._init;return p(x,D(v._payload),T)}if(Fi(v)||Si(v))return v=Fr(v,x.mode,T,null),v.return=x,v;La(x,v)}return null}function g(x,v,T,D){var L=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:l(x,v,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ia:return T.key===L?u(x,v,T,D):null;case hs:return T.key===L?d(x,v,T,D):null;case $n:return L=T._init,g(x,v,L(T._payload),D)}if(Fi(T)||Si(T))return L!==null?null:f(x,v,T,D,null);La(x,T)}return null}function w(x,v,T,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return x=x.get(T)||null,l(v,x,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ia:return x=x.get(D.key===null?T:D.key)||null,u(v,x,D,L);case hs:return x=x.get(D.key===null?T:D.key)||null,d(v,x,D,L);case $n:var F=D._init;return w(x,v,T,F(D._payload),L)}if(Fi(D)||Si(D))return x=x.get(T)||null,f(v,x,D,L,null);La(v,D)}return null}function A(x,v,T,D){for(var L=null,F=null,k=v,_=v=0,E=null;k!==null&&_<T.length;_++){k.index>_?(E=k,k=null):E=k.sibling;var b=g(x,k,T[_],D);if(b===null){k===null&&(k=E);break}t&&k&&b.alternate===null&&e(x,k),v=i(b,v,_),F===null?L=b:F.sibling=b,F=b,k=E}if(_===T.length)return n(x,k),pe&&Cr(x,_),L;if(k===null){for(;_<T.length;_++)k=p(x,T[_],D),k!==null&&(v=i(k,v,_),F===null?L=k:F.sibling=k,F=k);return pe&&Cr(x,_),L}for(k=r(x,k);_<T.length;_++)E=w(k,x,_,T[_],D),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?_:E.key),v=i(E,v,_),F===null?L=E:F.sibling=E,F=E);return t&&k.forEach(function(C){return e(x,C)}),pe&&Cr(x,_),L}function N(x,v,T,D){var L=Si(T);if(typeof L!="function")throw Error(U(150));if(T=L.call(T),T==null)throw Error(U(151));for(var F=L=null,k=v,_=v=0,E=null,b=T.next();k!==null&&!b.done;_++,b=T.next()){k.index>_?(E=k,k=null):E=k.sibling;var C=g(x,k,b.value,D);if(C===null){k===null&&(k=E);break}t&&k&&C.alternate===null&&e(x,k),v=i(C,v,_),F===null?L=C:F.sibling=C,F=C,k=E}if(b.done)return n(x,k),pe&&Cr(x,_),L;if(k===null){for(;!b.done;_++,b=T.next())b=p(x,b.value,D),b!==null&&(v=i(b,v,_),F===null?L=b:F.sibling=b,F=b);return pe&&Cr(x,_),L}for(k=r(x,k);!b.done;_++,b=T.next())b=w(k,x,_,b.value,D),b!==null&&(t&&b.alternate!==null&&k.delete(b.key===null?_:b.key),v=i(b,v,_),F===null?L=b:F.sibling=b,F=b);return t&&k.forEach(function(P){return e(x,P)}),pe&&Cr(x,_),L}function I(x,v,T,D){if(typeof T=="object"&&T!==null&&T.type===fs&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Ia:e:{for(var L=T.key,F=v;F!==null;){if(F.key===L){if(L=T.type,L===fs){if(F.tag===7){n(x,F.sibling),v=s(F,T.props.children),v.return=x,x=v;break e}}else if(F.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===$n&&ug(L)===F.type){n(x,F.sibling),v=s(F,T.props),v.ref=Pi(x,F,T),v.return=x,x=v;break e}n(x,F);break}else e(x,F);F=F.sibling}T.type===fs?(v=Fr(T.props.children,x.mode,D,T.key),v.return=x,x=v):(D=il(T.type,T.key,T.props,null,x.mode,D),D.ref=Pi(x,v,T),D.return=x,x=D)}return o(x);case hs:e:{for(F=T.key;v!==null;){if(v.key===F)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){n(x,v.sibling),v=s(v,T.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else e(x,v);v=v.sibling}v=Oc(T,x.mode,D),v.return=x,x=v}return o(x);case $n:return F=T._init,I(x,v,F(T._payload),D)}if(Fi(T))return A(x,v,T,D);if(Si(T))return N(x,v,T,D);La(x,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,T),v.return=x,x=v):(n(x,v),v=Lc(T,x.mode,D),v.return=x,x=v),o(x)):n(x,v)}return I}var Ls=wv(!0),Ev=wv(!1),Cl=xr(null),Rl=null,ws=null,Wh=null;function Hh(){Wh=ws=Rl=null}function qh(t){var e=Cl.current;me(Cl),t._currentValue=e}function Cd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function As(t,e){Rl=t,Wh=ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mt=!0),t.firstContext=null)}function Vt(t){var e=t._currentValue;if(Wh!==t)if(t={context:t,memoizedValue:e,next:null},ws===null){if(Rl===null)throw Error(U(308));ws=t,Rl.dependencies={lanes:0,firstContext:t}}else ws=ws.next=t;return e}var Dr=null;function Gh(t){Dr===null?Dr=[t]:Dr.push(t)}function Tv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Gh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Sn(t,r)}function Sn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wn=!1;function Kh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Sn(t,n)}return s=r.interleaved,s===null?(e.next=e,Gh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Sn(t,n)}function Za(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jh(t,n)}}function cg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Pl(t,e,n,r){var s=t.updateQueue;Wn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,w=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,N=l;switch(g=e,w=n,N.tag){case 1:if(A=N.payload,typeof A=="function"){p=A.call(w,p,g);break e}p=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=N.payload,g=typeof A=="function"?A.call(w,p,g):A,g==null)break e;p=xe({},p,g);break e;case 2:Wn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else w={eventTime:w,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=w,u=p):f=f.next=w,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Hr|=o,t.lanes=o,t.memoizedState=p}}function dg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var $o={},Zt=xr($o),vo=xr($o),_o=xr($o);function Mr(t){if(t===$o)throw Error(U(174));return t}function Qh(t,e){switch(ce(_o,e),ce(vo,t),ce(Zt,$o),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cd(e,t)}me(Zt),ce(Zt,e)}function Os(){me(Zt),me(vo),me(_o)}function bv(t){Mr(_o.current);var e=Mr(Zt.current),n=cd(e,t.type);e!==n&&(ce(vo,t),ce(Zt,n))}function Jh(t){vo.current===t&&(me(Zt),me(vo))}var ve=xr(0);function jl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rc=[];function Yh(){for(var t=0;t<Rc.length;t++)Rc[t]._workInProgressVersionPrimary=null;Rc.length=0}var el=Dn.ReactCurrentDispatcher,Pc=Dn.ReactCurrentBatchConfig,Wr=0,_e=null,De=null,Le=null,Dl=!1,Yi=!1,xo=0,NT=0;function Je(){throw Error(U(321))}function Xh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gt(t[n],e[n]))return!1;return!0}function Zh(t,e,n,r,s,i){if(Wr=i,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,el.current=t===null||t.memoizedState===null?jT:DT,t=n(r,s),Yi){i=0;do{if(Yi=!1,xo=0,25<=i)throw Error(U(301));i+=1,Le=De=null,e.updateQueue=null,el.current=MT,t=n(r,s)}while(Yi)}if(el.current=Ml,e=De!==null&&De.next!==null,Wr=0,Le=De=_e=null,Dl=!1,e)throw Error(U(300));return t}function ef(){var t=xo!==0;return xo=0,t}function Jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?_e.memoizedState=Le=t:Le=Le.next=t,Le}function Lt(){if(De===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=Le===null?_e.memoizedState:Le.next;if(e!==null)Le=e,De=t;else{if(t===null)throw Error(U(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Le===null?_e.memoizedState=Le=t:Le=Le.next=t}return Le}function wo(t,e){return typeof e=="function"?e(t):e}function jc(t){var e=Lt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=De,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((Wr&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,_e.lanes|=f,Hr|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,Gt(r,e.memoizedState)||(mt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_e.lanes|=i,Hr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dc(t){var e=Lt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Gt(i,e.memoizedState)||(mt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Iv(){}function Sv(t,e){var n=_e,r=Lt(),s=e(),i=!Gt(r.memoizedState,s);if(i&&(r.memoizedState=s,mt=!0),r=r.queue,tf(Cv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,Eo(9,Nv.bind(null,n,r,s,e),void 0,null),Oe===null)throw Error(U(349));Wr&30||Av(n,e,s)}return s}function Av(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Nv(t,e,n,r){e.value=n,e.getSnapshot=r,Rv(e)&&Pv(t)}function Cv(t,e,n){return n(function(){Rv(e)&&Pv(t)})}function Rv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gt(t,n)}catch{return!0}}function Pv(t){var e=Sn(t,1);e!==null&&Ht(e,t,1,-1)}function hg(t){var e=Jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:t},e.queue=t,t=t.dispatch=PT.bind(null,_e,t),[e.memoizedState,t]}function Eo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jv(){return Lt().memoizedState}function tl(t,e,n,r){var s=Jt();_e.flags|=t,s.memoizedState=Eo(1|e,n,void 0,r===void 0?null:r)}function du(t,e,n,r){var s=Lt();r=r===void 0?null:r;var i=void 0;if(De!==null){var o=De.memoizedState;if(i=o.destroy,r!==null&&Xh(r,o.deps)){s.memoizedState=Eo(e,n,i,r);return}}_e.flags|=t,s.memoizedState=Eo(1|e,n,i,r)}function fg(t,e){return tl(8390656,8,t,e)}function tf(t,e){return du(2048,8,t,e)}function Dv(t,e){return du(4,2,t,e)}function Mv(t,e){return du(4,4,t,e)}function Vv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Lv(t,e,n){return n=n!=null?n.concat([t]):null,du(4,4,Vv.bind(null,e,t),n)}function nf(){}function Ov(t,e){var n=Lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Fv(t,e){var n=Lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Uv(t,e,n){return Wr&21?(Gt(n,e)||(n=Hy(),_e.lanes|=n,Hr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mt=!0),t.memoizedState=n)}function CT(t,e){var n=oe;oe=n!==0&&4>n?n:4,t(!0);var r=Pc.transition;Pc.transition={};try{t(!1),e()}finally{oe=n,Pc.transition=r}}function Bv(){return Lt().memoizedState}function RT(t,e,n){var r=or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zv(t))$v(e,n);else if(n=Tv(t,e,n,r),n!==null){var s=ut();Ht(n,t,r,s),Wv(n,e,r)}}function PT(t,e,n){var r=or(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zv(t))$v(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Gt(l,o)){var u=e.interleaved;u===null?(s.next=s,Gh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Tv(t,e,s,r),n!==null&&(s=ut(),Ht(n,t,r,s),Wv(n,e,r))}}function zv(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function $v(t,e){Yi=Dl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Wv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jh(t,n)}}var Ml={readContext:Vt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},jT={readContext:Vt,useCallback:function(t,e){return Jt().memoizedState=[t,e===void 0?null:e],t},useContext:Vt,useEffect:fg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tl(4194308,4,Vv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tl(4194308,4,t,e)},useInsertionEffect:function(t,e){return tl(4,2,t,e)},useMemo:function(t,e){var n=Jt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=RT.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=Jt();return t={current:t},e.memoizedState=t},useState:hg,useDebugValue:nf,useDeferredValue:function(t){return Jt().memoizedState=t},useTransition:function(){var t=hg(!1),e=t[0];return t=CT.bind(null,t[1]),Jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,s=Jt();if(pe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Oe===null)throw Error(U(349));Wr&30||Av(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,fg(Cv.bind(null,r,i,t),[t]),r.flags|=2048,Eo(9,Nv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Jt(),e=Oe.identifierPrefix;if(pe){var n=vn,r=yn;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},DT={readContext:Vt,useCallback:Ov,useContext:Vt,useEffect:tf,useImperativeHandle:Lv,useInsertionEffect:Dv,useLayoutEffect:Mv,useMemo:Fv,useReducer:jc,useRef:jv,useState:function(){return jc(wo)},useDebugValue:nf,useDeferredValue:function(t){var e=Lt();return Uv(e,De.memoizedState,t)},useTransition:function(){var t=jc(wo)[0],e=Lt().memoizedState;return[t,e]},useMutableSource:Iv,useSyncExternalStore:Sv,useId:Bv,unstable_isNewReconciler:!1},MT={readContext:Vt,useCallback:Ov,useContext:Vt,useEffect:tf,useImperativeHandle:Lv,useInsertionEffect:Dv,useLayoutEffect:Mv,useMemo:Fv,useReducer:Dc,useRef:jv,useState:function(){return Dc(wo)},useDebugValue:nf,useDeferredValue:function(t){var e=Lt();return De===null?e.memoizedState=t:Uv(e,De.memoizedState,t)},useTransition:function(){var t=Dc(wo)[0],e=Lt().memoizedState;return[t,e]},useMutableSource:Iv,useSyncExternalStore:Sv,useId:Bv,unstable_isNewReconciler:!1};function Ut(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hu={isMounted:function(t){return(t=t._reactInternals)?es(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ut(),s=or(t),i=Tn(r,s);i.payload=e,n!=null&&(i.callback=n),e=sr(t,i,s),e!==null&&(Ht(e,t,s,r),Za(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ut(),s=or(t),i=Tn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=sr(t,i,s),e!==null&&(Ht(e,t,s,r),Za(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ut(),r=or(t),s=Tn(n,r);s.tag=2,e!=null&&(s.callback=e),e=sr(t,s,r),e!==null&&(Ht(e,t,r,n),Za(e,t,r))}};function mg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!mo(n,r)||!mo(s,i):!0}function Hv(t,e,n){var r=!1,s=mr,i=e.contextType;return typeof i=="object"&&i!==null?i=Vt(i):(s=gt(e)?zr:st.current,r=e.contextTypes,i=(r=r!=null)?Ms(t,s):mr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function pg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hu.enqueueReplaceState(e,e.state,null)}function Pd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Kh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vt(i):(i=gt(e)?zr:st.current,s.context=Ms(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Rd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&hu.enqueueReplaceState(s,s.state,null),Pl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Fs(t,e){try{var n="",r=e;do n+=uE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Mc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var VT=typeof WeakMap=="function"?WeakMap:Map;function qv(t,e,n){n=Tn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ll||(Ll=!0,$d=r),jd(t,e)},n}function Gv(t,e,n){n=Tn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){jd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){jd(t,e),typeof r!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new VT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=JT.bind(null,t,e,n),e.then(t,t))}function yg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Tn(-1,1),e.tag=2,sr(n,e,1))),n.lanes|=1),t)}var LT=Dn.ReactCurrentOwner,mt=!1;function lt(t,e,n,r){e.child=t===null?Ev(e,null,n,r):Ls(e,t.child,n,r)}function _g(t,e,n,r,s){n=n.render;var i=e.ref;return As(e,s),r=Zh(t,e,n,r,i,s),n=ef(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,An(t,e,s)):(pe&&n&&Bh(e),e.flags|=1,lt(t,e,r,s),e.child)}function xg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!df(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Kv(t,e,i,r,s)):(t=il(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:mo,n(o,r)&&t.ref===e.ref)return An(t,e,s)}return e.flags|=1,t=ar(i,r),t.ref=e.ref,t.return=e,e.child=t}function Kv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(mo(i,r)&&t.ref===e.ref)if(mt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(mt=!0);else return e.lanes=t.lanes,An(t,e,s)}return Dd(t,e,n,r,s)}function Qv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(Ts,Tt),Tt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(Ts,Tt),Tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ce(Ts,Tt),Tt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ce(Ts,Tt),Tt|=r;return lt(t,e,s,n),e.child}function Jv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dd(t,e,n,r,s){var i=gt(n)?zr:st.current;return i=Ms(e,i),As(e,s),n=Zh(t,e,n,r,i,s),r=ef(),t!==null&&!mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,An(t,e,s)):(pe&&r&&Bh(e),e.flags|=1,lt(t,e,n,s),e.child)}function wg(t,e,n,r,s){if(gt(n)){var i=!0;Sl(e)}else i=!1;if(As(e,s),e.stateNode===null)nl(t,e),Hv(e,n,r),Pd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Vt(d):(d=gt(n)?zr:st.current,d=Ms(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&pg(e,o,r,d),Wn=!1;var g=e.memoizedState;o.state=g,Pl(e,r,o,s),u=e.memoizedState,l!==r||g!==u||pt.current||Wn?(typeof f=="function"&&(Rd(e,n,f,r),u=e.memoizedState),(l=Wn||mg(e,n,l,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,kv(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Ut(e.type,l),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Vt(u):(u=gt(n)?zr:st.current,u=Ms(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&pg(e,o,r,u),Wn=!1,g=e.memoizedState,o.state=g,Pl(e,r,o,s);var A=e.memoizedState;l!==p||g!==A||pt.current||Wn?(typeof w=="function"&&(Rd(e,n,w,r),A=e.memoizedState),(d=Wn||mg(e,n,d,r,g,A,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,A,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,A,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=A),o.props=r,o.state=A,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Md(t,e,n,r,i,s)}function Md(t,e,n,r,s,i){Jv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&og(e,n,!1),An(t,e,i);r=e.stateNode,LT.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ls(e,t.child,null,i),e.child=Ls(e,null,l,i)):lt(t,e,l,i),e.memoizedState=r.state,s&&og(e,n,!0),e.child}function Yv(t){var e=t.stateNode;e.pendingContext?ig(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ig(t,e.context,!1),Qh(t,e.containerInfo)}function Eg(t,e,n,r,s){return Vs(),$h(s),e.flags|=256,lt(t,e,n,r),e.child}var Vd={dehydrated:null,treeContext:null,retryLane:0};function Ld(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xv(t,e,n){var r=e.pendingProps,s=ve.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ce(ve,s&1),t===null)return Nd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=pu(o,r,0,null),t=Fr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ld(n),e.memoizedState=Vd,t):rf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return OT(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ar(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ar(l,i):(i=Fr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ld(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Vd,r}return i=t.child,t=i.sibling,r=ar(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rf(t,e){return e=pu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Oa(t,e,n,r){return r!==null&&$h(r),Ls(e,t.child,null,n),t=rf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function OT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Mc(Error(U(422))),Oa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=pu({mode:"visible",children:r.children},s,0,null),i=Fr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ls(e,t.child,null,o),e.child.memoizedState=Ld(o),e.memoizedState=Vd,i);if(!(e.mode&1))return Oa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=Mc(i,r,void 0),Oa(t,e,o,r)}if(l=(o&t.childLanes)!==0,mt||l){if(r=Oe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Sn(t,s),Ht(r,t,s,-1))}return cf(),r=Mc(Error(U(421))),Oa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=YT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,bt=rr(s.nextSibling),St=e,pe=!0,zt=null,t!==null&&(Pt[jt++]=yn,Pt[jt++]=vn,Pt[jt++]=$r,yn=t.id,vn=t.overflow,$r=e),e=rf(e,r.children),e.flags|=4096,e)}function Tg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cd(t.return,e,n)}function Vc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Zv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(lt(t,e,r.children,n),r=ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tg(t,n,e);else if(t.tag===19)Tg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ce(ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&jl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Vc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&jl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Vc(e,!0,n,null,i);break;case"together":Vc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function An(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FT(t,e,n){switch(e.tag){case 3:Yv(e),Vs();break;case 5:bv(e);break;case 1:gt(e.type)&&Sl(e);break;case 4:Qh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ce(Cl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ce(ve,ve.current&1),e.flags|=128,null):n&e.child.childLanes?Xv(t,e,n):(ce(ve,ve.current&1),t=An(t,e,n),t!==null?t.sibling:null);ce(ve,ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Zv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ce(ve,ve.current),r)break;return null;case 22:case 23:return e.lanes=0,Qv(t,e,n)}return An(t,e,n)}var e_,Od,t_,n_;e_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Od=function(){};t_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Mr(Zt.current);var i=null;switch(n){case"input":s=od(t,s),r=od(t,r),i=[];break;case"select":s=xe({},s,{value:void 0}),r=xe({},r,{value:void 0}),i=[];break;case"textarea":s=ud(t,s),r=ud(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bl)}dd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(oo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(oo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&he("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};n_=function(t,e,n,r){n!==r&&(e.flags|=4)};function ji(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function UT(t,e,n){var r=e.pendingProps;switch(zh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(e),null;case 1:return gt(e.type)&&Il(),Ye(e),null;case 3:return r=e.stateNode,Os(),me(pt),me(st),Yh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Va(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zt!==null&&(qd(zt),zt=null))),Od(t,e),Ye(e),null;case 5:Jh(e);var s=Mr(_o.current);if(n=e.type,t!==null&&e.stateNode!=null)t_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return Ye(e),null}if(t=Mr(Zt.current),Va(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Yt]=e,r[yo]=i,t=(e.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(s=0;s<Bi.length;s++)he(Bi[s],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":Pp(r,i),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},he("invalid",r);break;case"textarea":Dp(r,i),he("invalid",r)}dd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ma(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ma(r.textContent,l,t),s=["children",""+l]):oo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&he("scroll",r)}switch(n){case"input":Sa(r),jp(r,i,!0);break;case"textarea":Sa(r),Mp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Cy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yt]=e,t[yo]=r,e_(t,e,!1,!1),e.stateNode=t;e:{switch(o=hd(n,r),n){case"dialog":he("cancel",t),he("close",t),s=r;break;case"iframe":case"object":case"embed":he("load",t),s=r;break;case"video":case"audio":for(s=0;s<Bi.length;s++)he(Bi[s],t);s=r;break;case"source":he("error",t),s=r;break;case"img":case"image":case"link":he("error",t),he("load",t),s=r;break;case"details":he("toggle",t),s=r;break;case"input":Pp(t,r),s=od(t,r),he("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=xe({},r,{value:void 0}),he("invalid",t);break;case"textarea":Dp(t,r),s=ud(t,r),he("invalid",t);break;default:s=r}dd(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?jy(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ry(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ao(t,u):typeof u=="number"&&ao(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&he("scroll",t):u!=null&&Sh(t,i,u,o))}switch(n){case"input":Sa(t),jp(t,r,!1);break;case"textarea":Sa(t),Mp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ks(t,!!r.multiple,i,!1):r.defaultValue!=null&&ks(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ye(e),null;case 6:if(t&&e.stateNode!=null)n_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Mr(_o.current),Mr(Zt.current),Va(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yt]=e,(i=r.nodeValue!==n)&&(t=St,t!==null))switch(t.tag){case 3:Ma(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ma(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yt]=e,e.stateNode=r}return Ye(e),null;case 13:if(me(ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&bt!==null&&e.mode&1&&!(e.flags&128))xv(),Vs(),e.flags|=98560,i=!1;else if(i=Va(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Yt]=e}else Vs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ye(e),i=!1}else zt!==null&&(qd(zt),zt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?Me===0&&(Me=3):cf())),e.updateQueue!==null&&(e.flags|=4),Ye(e),null);case 4:return Os(),Od(t,e),t===null&&po(e.stateNode.containerInfo),Ye(e),null;case 10:return qh(e.type._context),Ye(e),null;case 17:return gt(e.type)&&Il(),Ye(e),null;case 19:if(me(ve),i=e.memoizedState,i===null)return Ye(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ji(i,!1);else{if(Me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jl(t),o!==null){for(e.flags|=128,ji(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ce(ve,ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ie()>Us&&(e.flags|=128,r=!0,ji(i,!1),e.lanes=4194304)}else{if(!r)if(t=jl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ji(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pe)return Ye(e),null}else 2*Ie()-i.renderingStartTime>Us&&n!==1073741824&&(e.flags|=128,r=!0,ji(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ie(),e.sibling=null,n=ve.current,ce(ve,r?n&1|2:n&1),e):(Ye(e),null);case 22:case 23:return uf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tt&1073741824&&(Ye(e),e.subtreeFlags&6&&(e.flags|=8192)):Ye(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function BT(t,e){switch(zh(e),e.tag){case 1:return gt(e.type)&&Il(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Os(),me(pt),me(st),Yh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jh(e),null;case 13:if(me(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Vs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(ve),null;case 4:return Os(),null;case 10:return qh(e.type._context),null;case 22:case 23:return uf(),null;case 24:return null;default:return null}}var Fa=!1,et=!1,zT=typeof WeakSet=="function"?WeakSet:Set,W=null;function Es(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(t,e,r)}else n.current=null}function Fd(t,e,n){try{n()}catch(r){Te(t,e,r)}}var kg=!1;function $T(t,e){if(Ed=El,t=av(),Uh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Td={focusedElem:t,selectionRange:n},El=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var N=A.memoizedProps,I=A.memoizedState,x=e.stateNode,v=x.getSnapshotBeforeUpdate(e.elementType===e.type?N:Ut(e.type,N),I);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(D){Te(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return A=kg,kg=!1,A}function Xi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fd(e,n,i)}s=s.next}while(s!==r)}}function fu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ud(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function r_(t){var e=t.alternate;e!==null&&(t.alternate=null,r_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yt],delete e[yo],delete e[Id],delete e[bT],delete e[IT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function s_(t){return t.tag===5||t.tag===3||t.tag===4}function bg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||s_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bl));else if(r!==4&&(t=t.child,t!==null))for(Bd(t,e,n),t=t.sibling;t!==null;)Bd(t,e,n),t=t.sibling}function zd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zd(t,e,n),t=t.sibling;t!==null;)zd(t,e,n),t=t.sibling}var Ue=null,Bt=!1;function Un(t,e,n){for(n=n.child;n!==null;)i_(t,e,n),n=n.sibling}function i_(t,e,n){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(iu,n)}catch{}switch(n.tag){case 5:et||Es(n,e);case 6:var r=Ue,s=Bt;Ue=null,Un(t,e,n),Ue=r,Bt=s,Ue!==null&&(Bt?(t=Ue,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(Bt?(t=Ue,n=n.stateNode,t.nodeType===8?Nc(t.parentNode,n):t.nodeType===1&&Nc(t,n),ho(t)):Nc(Ue,n.stateNode));break;case 4:r=Ue,s=Bt,Ue=n.stateNode.containerInfo,Bt=!0,Un(t,e,n),Ue=r,Bt=s;break;case 0:case 11:case 14:case 15:if(!et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fd(n,e,o),s=s.next}while(s!==r)}Un(t,e,n);break;case 1:if(!et&&(Es(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Te(n,e,l)}Un(t,e,n);break;case 21:Un(t,e,n);break;case 22:n.mode&1?(et=(r=et)||n.memoizedState!==null,Un(t,e,n),et=r):Un(t,e,n);break;default:Un(t,e,n)}}function Ig(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new zT),e.forEach(function(r){var s=XT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ft(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ue=l.stateNode,Bt=!1;break e;case 3:Ue=l.stateNode.containerInfo,Bt=!0;break e;case 4:Ue=l.stateNode.containerInfo,Bt=!0;break e}l=l.return}if(Ue===null)throw Error(U(160));i_(i,o,s),Ue=null,Bt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Te(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)o_(e,t),e=e.sibling}function o_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ft(e,t),Qt(t),r&4){try{Xi(3,t,t.return),fu(3,t)}catch(N){Te(t,t.return,N)}try{Xi(5,t,t.return)}catch(N){Te(t,t.return,N)}}break;case 1:Ft(e,t),Qt(t),r&512&&n!==null&&Es(n,n.return);break;case 5:if(Ft(e,t),Qt(t),r&512&&n!==null&&Es(n,n.return),t.flags&32){var s=t.stateNode;try{ao(s,"")}catch(N){Te(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Ay(s,i),hd(l,o);var d=hd(l,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?jy(s,p):f==="dangerouslySetInnerHTML"?Ry(s,p):f==="children"?ao(s,p):Sh(s,f,p,d)}switch(l){case"input":ad(s,i);break;case"textarea":Ny(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?ks(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?ks(s,!!i.multiple,i.defaultValue,!0):ks(s,!!i.multiple,i.multiple?[]:"",!1))}s[yo]=i}catch(N){Te(t,t.return,N)}}break;case 6:if(Ft(e,t),Qt(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Te(t,t.return,N)}}break;case 3:if(Ft(e,t),Qt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ho(e.containerInfo)}catch(N){Te(t,t.return,N)}break;case 4:Ft(e,t),Qt(t);break;case 13:Ft(e,t),Qt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(af=Ie())),r&4&&Ig(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(et=(d=et)||f,Ft(e,t),et=d):Ft(e,t),Qt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(p=W=f;W!==null;){switch(g=W,w=g.child,g.tag){case 0:case 11:case 14:case 15:Xi(4,g,g.return);break;case 1:Es(g,g.return);var A=g.stateNode;if(typeof A.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(N){Te(r,n,N)}}break;case 5:Es(g,g.return);break;case 22:if(g.memoizedState!==null){Ag(p);continue}}w!==null?(w.return=g,W=w):Ag(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Py("display",o))}catch(N){Te(t,t.return,N)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(N){Te(t,t.return,N)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ft(e,t),Qt(t),r&4&&Ig(t);break;case 21:break;default:Ft(e,t),Qt(t)}}function Qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(s_(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ao(s,""),r.flags&=-33);var i=bg(t);zd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=bg(t);Bd(t,l,o);break;default:throw Error(U(161))}}catch(u){Te(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function WT(t,e,n){W=t,a_(t)}function a_(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fa;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||et;l=Fa;var d=et;if(Fa=o,(et=u)&&!d)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?Ng(s):u!==null?(u.return=o,W=u):Ng(s);for(;i!==null;)W=i,a_(i),i=i.sibling;W=s,Fa=l,et=d}Sg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):Sg(t)}}function Sg(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:et||fu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!et)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ut(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&dg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&ho(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}et||e.flags&512&&Ud(e)}catch(g){Te(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Ag(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Ng(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fu(4,e)}catch(u){Te(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Te(e,s,u)}}var i=e.return;try{Ud(e)}catch(u){Te(e,i,u)}break;case 5:var o=e.return;try{Ud(e)}catch(u){Te(e,o,u)}}}catch(u){Te(e,e.return,u)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var HT=Math.ceil,Vl=Dn.ReactCurrentDispatcher,sf=Dn.ReactCurrentOwner,Mt=Dn.ReactCurrentBatchConfig,re=0,Oe=null,Re=null,$e=0,Tt=0,Ts=xr(0),Me=0,To=null,Hr=0,mu=0,of=0,Zi=null,ht=null,af=0,Us=1/0,mn=null,Ll=!1,$d=null,ir=null,Ua=!1,Yn=null,Ol=0,eo=0,Wd=null,rl=-1,sl=0;function ut(){return re&6?Ie():rl!==-1?rl:rl=Ie()}function or(t){return t.mode&1?re&2&&$e!==0?$e&-$e:AT.transition!==null?(sl===0&&(sl=Hy()),sl):(t=oe,t!==0||(t=window.event,t=t===void 0?16:Xy(t.type)),t):1}function Ht(t,e,n,r){if(50<eo)throw eo=0,Wd=null,Error(U(185));Uo(t,n,r),(!(re&2)||t!==Oe)&&(t===Oe&&(!(re&2)&&(mu|=n),Me===4&&qn(t,$e)),yt(t,r),n===1&&re===0&&!(e.mode&1)&&(Us=Ie()+500,cu&&wr()))}function yt(t,e){var n=t.callbackNode;AE(t,e);var r=wl(t,t===Oe?$e:0);if(r===0)n!==null&&Op(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Op(n),e===1)t.tag===0?ST(Cg.bind(null,t)):yv(Cg.bind(null,t)),TT(function(){!(re&6)&&wr()}),n=null;else{switch(qy(r)){case 1:n=Ph;break;case 4:n=$y;break;case 16:n=xl;break;case 536870912:n=Wy;break;default:n=xl}n=p_(n,l_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function l_(t,e){if(rl=-1,sl=0,re&6)throw Error(U(327));var n=t.callbackNode;if(Ns()&&t.callbackNode!==n)return null;var r=wl(t,t===Oe?$e:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fl(t,r);else{e=r;var s=re;re|=2;var i=c_();(Oe!==t||$e!==e)&&(mn=null,Us=Ie()+500,Or(t,e));do try{KT();break}catch(l){u_(t,l)}while(!0);Hh(),Vl.current=i,re=s,Re!==null?e=0:(Oe=null,$e=0,e=Me)}if(e!==0){if(e===2&&(s=yd(t),s!==0&&(r=s,e=Hd(t,s))),e===1)throw n=To,Or(t,0),qn(t,r),yt(t,Ie()),n;if(e===6)qn(t,r);else{if(s=t.current.alternate,!(r&30)&&!qT(s)&&(e=Fl(t,r),e===2&&(i=yd(t),i!==0&&(r=i,e=Hd(t,i))),e===1))throw n=To,Or(t,0),qn(t,r),yt(t,Ie()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Rr(t,ht,mn);break;case 3:if(qn(t,r),(r&130023424)===r&&(e=af+500-Ie(),10<e)){if(wl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ut(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bd(Rr.bind(null,t,ht,mn),e);break}Rr(t,ht,mn);break;case 4:if(qn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Wt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*HT(r/1960))-r,10<r){t.timeoutHandle=bd(Rr.bind(null,t,ht,mn),r);break}Rr(t,ht,mn);break;case 5:Rr(t,ht,mn);break;default:throw Error(U(329))}}}return yt(t,Ie()),t.callbackNode===n?l_.bind(null,t):null}function Hd(t,e){var n=Zi;return t.current.memoizedState.isDehydrated&&(Or(t,e).flags|=256),t=Fl(t,e),t!==2&&(e=ht,ht=n,e!==null&&qd(e)),t}function qd(t){ht===null?ht=t:ht.push.apply(ht,t)}function qT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Gt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qn(t,e){for(e&=~of,e&=~mu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wt(e),r=1<<n;t[n]=-1,e&=~r}}function Cg(t){if(re&6)throw Error(U(327));Ns();var e=wl(t,0);if(!(e&1))return yt(t,Ie()),null;var n=Fl(t,e);if(t.tag!==0&&n===2){var r=yd(t);r!==0&&(e=r,n=Hd(t,r))}if(n===1)throw n=To,Or(t,0),qn(t,e),yt(t,Ie()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Rr(t,ht,mn),yt(t,Ie()),null}function lf(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(Us=Ie()+500,cu&&wr())}}function qr(t){Yn!==null&&Yn.tag===0&&!(re&6)&&Ns();var e=re;re|=1;var n=Mt.transition,r=oe;try{if(Mt.transition=null,oe=1,t)return t()}finally{oe=r,Mt.transition=n,re=e,!(re&6)&&wr()}}function uf(){Tt=Ts.current,me(Ts)}function Or(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ET(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(zh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Il();break;case 3:Os(),me(pt),me(st),Yh();break;case 5:Jh(r);break;case 4:Os();break;case 13:me(ve);break;case 19:me(ve);break;case 10:qh(r.type._context);break;case 22:case 23:uf()}n=n.return}if(Oe=t,Re=t=ar(t.current,null),$e=Tt=e,Me=0,To=null,of=mu=Hr=0,ht=Zi=null,Dr!==null){for(e=0;e<Dr.length;e++)if(n=Dr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Dr=null}return t}function u_(t,e){do{var n=Re;try{if(Hh(),el.current=Ml,Dl){for(var r=_e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dl=!1}if(Wr=0,Le=De=_e=null,Yi=!1,xo=0,sf.current=null,n===null||n.return===null){Me=1,To=e,Re=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=$e,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=yg(o);if(w!==null){w.flags&=-257,vg(w,o,l,i,e),w.mode&1&&gg(i,d,e),e=w,u=d;var A=e.updateQueue;if(A===null){var N=new Set;N.add(u),e.updateQueue=N}else A.add(u);break e}else{if(!(e&1)){gg(i,d,e),cf();break e}u=Error(U(426))}}else if(pe&&l.mode&1){var I=yg(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),vg(I,o,l,i,e),$h(Fs(u,l));break e}}i=u=Fs(u,l),Me!==4&&(Me=2),Zi===null?Zi=[i]:Zi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=qv(i,u,e);cg(i,x);break e;case 1:l=u;var v=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ir===null||!ir.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Gv(i,l,e);cg(i,D);break e}}i=i.return}while(i!==null)}h_(n)}catch(L){e=L,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function c_(){var t=Vl.current;return Vl.current=Ml,t===null?Ml:t}function cf(){(Me===0||Me===3||Me===2)&&(Me=4),Oe===null||!(Hr&268435455)&&!(mu&268435455)||qn(Oe,$e)}function Fl(t,e){var n=re;re|=2;var r=c_();(Oe!==t||$e!==e)&&(mn=null,Or(t,e));do try{GT();break}catch(s){u_(t,s)}while(!0);if(Hh(),re=n,Vl.current=r,Re!==null)throw Error(U(261));return Oe=null,$e=0,Me}function GT(){for(;Re!==null;)d_(Re)}function KT(){for(;Re!==null&&!_E();)d_(Re)}function d_(t){var e=m_(t.alternate,t,Tt);t.memoizedProps=t.pendingProps,e===null?h_(t):Re=e,sf.current=null}function h_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BT(n,e),n!==null){n.flags&=32767,Re=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Me=6,Re=null;return}}else if(n=UT(n,e,Tt),n!==null){Re=n;return}if(e=e.sibling,e!==null){Re=e;return}Re=e=t}while(e!==null);Me===0&&(Me=5)}function Rr(t,e,n){var r=oe,s=Mt.transition;try{Mt.transition=null,oe=1,QT(t,e,n,r)}finally{Mt.transition=s,oe=r}return null}function QT(t,e,n,r){do Ns();while(Yn!==null);if(re&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(NE(t,i),t===Oe&&(Re=Oe=null,$e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ua||(Ua=!0,p_(xl,function(){return Ns(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Mt.transition,Mt.transition=null;var o=oe;oe=1;var l=re;re|=4,sf.current=null,$T(t,n),o_(n,t),pT(Td),El=!!Ed,Td=Ed=null,t.current=n,WT(n),xE(),re=l,oe=o,Mt.transition=i}else t.current=n;if(Ua&&(Ua=!1,Yn=t,Ol=s),i=t.pendingLanes,i===0&&(ir=null),TE(n.stateNode),yt(t,Ie()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ll)throw Ll=!1,t=$d,$d=null,t;return Ol&1&&t.tag!==0&&Ns(),i=t.pendingLanes,i&1?t===Wd?eo++:(eo=0,Wd=t):eo=0,wr(),null}function Ns(){if(Yn!==null){var t=qy(Ol),e=Mt.transition,n=oe;try{if(Mt.transition=null,oe=16>t?16:t,Yn===null)var r=!1;else{if(t=Yn,Yn=null,Ol=0,re&6)throw Error(U(331));var s=re;for(re|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(W=d;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:Xi(8,f,i)}var p=f.child;if(p!==null)p.return=f,W=p;else for(;W!==null;){f=W;var g=f.sibling,w=f.return;if(r_(f),f===d){W=null;break}if(g!==null){g.return=w,W=g;break}W=w}}}var A=i.alternate;if(A!==null){var N=A.child;if(N!==null){A.child=null;do{var I=N.sibling;N.sibling=null,N=I}while(N!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xi(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,W=x;break e}W=i.return}}var v=t.current;for(W=v;W!==null;){o=W;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,W=T;else e:for(o=v;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fu(9,l)}}catch(L){Te(l,l.return,L)}if(l===o){W=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,W=D;break e}W=l.return}}if(re=s,wr(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(iu,t)}catch{}r=!0}return r}finally{oe=n,Mt.transition=e}}return!1}function Rg(t,e,n){e=Fs(n,e),e=qv(t,e,1),t=sr(t,e,1),e=ut(),t!==null&&(Uo(t,1,e),yt(t,e))}function Te(t,e,n){if(t.tag===3)Rg(t,t,n);else for(;e!==null;){if(e.tag===3){Rg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ir===null||!ir.has(r))){t=Fs(n,t),t=Gv(e,t,1),e=sr(e,t,1),t=ut(),e!==null&&(Uo(e,1,t),yt(e,t));break}}e=e.return}}function JT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ut(),t.pingedLanes|=t.suspendedLanes&n,Oe===t&&($e&n)===n&&(Me===4||Me===3&&($e&130023424)===$e&&500>Ie()-af?Or(t,0):of|=n),yt(t,e)}function f_(t,e){e===0&&(t.mode&1?(e=Ca,Ca<<=1,!(Ca&130023424)&&(Ca=4194304)):e=1);var n=ut();t=Sn(t,e),t!==null&&(Uo(t,e,n),yt(t,n))}function YT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),f_(t,n)}function XT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),f_(t,n)}var m_;m_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pt.current)mt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mt=!1,FT(t,e,n);mt=!!(t.flags&131072)}else mt=!1,pe&&e.flags&1048576&&vv(e,Nl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nl(t,e),t=e.pendingProps;var s=Ms(e,st.current);As(e,n),s=Zh(null,e,r,t,s,n);var i=ef();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gt(r)?(i=!0,Sl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kh(e),s.updater=hu,e.stateNode=s,s._reactInternals=e,Pd(e,r,t,n),e=Md(null,e,r,!0,i,n)):(e.tag=0,pe&&i&&Bh(e),lt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=ek(r),t=Ut(r,t),s){case 0:e=Dd(null,e,r,t,n);break e;case 1:e=wg(null,e,r,t,n);break e;case 11:e=_g(null,e,r,t,n);break e;case 14:e=xg(null,e,r,Ut(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),Dd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),wg(t,e,r,s,n);case 3:e:{if(Yv(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,kv(t,e),Pl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Fs(Error(U(423)),e),e=Eg(t,e,r,n,s);break e}else if(r!==s){s=Fs(Error(U(424)),e),e=Eg(t,e,r,n,s);break e}else for(bt=rr(e.stateNode.containerInfo.firstChild),St=e,pe=!0,zt=null,n=Ev(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vs(),r===s){e=An(t,e,n);break e}lt(t,e,r,n)}e=e.child}return e;case 5:return bv(e),t===null&&Nd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,kd(r,s)?o=null:i!==null&&kd(r,i)&&(e.flags|=32),Jv(t,e),lt(t,e,o,n),e.child;case 6:return t===null&&Nd(e),null;case 13:return Xv(t,e,n);case 4:return Qh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ls(e,null,r,n):lt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),_g(t,e,r,s,n);case 7:return lt(t,e,e.pendingProps,n),e.child;case 8:return lt(t,e,e.pendingProps.children,n),e.child;case 12:return lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ce(Cl,r._currentValue),r._currentValue=o,i!==null)if(Gt(i.value,o)){if(i.children===s.children&&!pt.current){e=An(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Tn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Cd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Cd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}lt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,As(e,n),s=Vt(s),r=r(s),e.flags|=1,lt(t,e,r,n),e.child;case 14:return r=e.type,s=Ut(r,e.pendingProps),s=Ut(r.type,s),xg(t,e,r,s,n);case 15:return Kv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ut(r,s),nl(t,e),e.tag=1,gt(r)?(t=!0,Sl(e)):t=!1,As(e,n),Hv(e,r,s),Pd(e,r,s,n),Md(null,e,r,!0,t,n);case 19:return Zv(t,e,n);case 22:return Qv(t,e,n)}throw Error(U(156,e.tag))};function p_(t,e){return zy(t,e)}function ZT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,e,n,r){return new ZT(t,e,n,r)}function df(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ek(t){if(typeof t=="function")return df(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nh)return 11;if(t===Ch)return 14}return 2}function ar(t,e){var n=t.alternate;return n===null?(n=Dt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function il(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")df(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fs:return Fr(n.children,s,i,e);case Ah:o=8,s|=8;break;case nd:return t=Dt(12,n,e,s|2),t.elementType=nd,t.lanes=i,t;case rd:return t=Dt(13,n,e,s),t.elementType=rd,t.lanes=i,t;case sd:return t=Dt(19,n,e,s),t.elementType=sd,t.lanes=i,t;case by:return pu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ty:o=10;break e;case ky:o=9;break e;case Nh:o=11;break e;case Ch:o=14;break e;case $n:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Dt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Fr(t,e,n,r){return t=Dt(7,t,r,e),t.lanes=n,t}function pu(t,e,n,r){return t=Dt(22,t,r,e),t.elementType=by,t.lanes=n,t.stateNode={isHidden:!1},t}function Lc(t,e,n){return t=Dt(6,t,null,e),t.lanes=n,t}function Oc(t,e,n){return e=Dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vc(0),this.expirationTimes=vc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hf(t,e,n,r,s,i,o,l,u){return t=new tk(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Dt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kh(i),t}function nk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function g_(t){if(!t)return mr;t=t._reactInternals;e:{if(es(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(gt(n))return gv(t,n,e)}return e}function y_(t,e,n,r,s,i,o,l,u){return t=hf(n,r,!0,t,s,i,o,l,u),t.context=g_(null),n=t.current,r=ut(),s=or(n),i=Tn(r,s),i.callback=e??null,sr(n,i,s),t.current.lanes=s,Uo(t,s,r),yt(t,r),t}function gu(t,e,n,r){var s=e.current,i=ut(),o=or(s);return n=g_(n),e.context===null?e.context=n:e.pendingContext=n,e=Tn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=sr(s,e,o),t!==null&&(Ht(t,s,o,i),Za(t,s,o)),o}function Ul(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ff(t,e){Pg(t,e),(t=t.alternate)&&Pg(t,e)}function rk(){return null}var v_=typeof reportError=="function"?reportError:function(t){console.error(t)};function mf(t){this._internalRoot=t}yu.prototype.render=mf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));gu(t,e,null,null)};yu.prototype.unmount=mf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qr(function(){gu(null,t,null,null)}),e[In]=null}};function yu(t){this._internalRoot=t}yu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Qy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hn.length&&e!==0&&e<Hn[n].priority;n++);Hn.splice(n,0,t),n===0&&Yy(t)}};function pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jg(){}function sk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ul(o);i.call(d)}}var o=y_(e,r,t,0,null,!1,!1,"",jg);return t._reactRootContainer=o,t[In]=o.current,po(t.nodeType===8?t.parentNode:t),qr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Ul(u);l.call(d)}}var u=hf(t,0,!1,null,null,!1,!1,"",jg);return t._reactRootContainer=u,t[In]=u.current,po(t.nodeType===8?t.parentNode:t),qr(function(){gu(e,u,n,r)}),u}function _u(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Ul(o);l.call(u)}}gu(e,o,t,s)}else o=sk(n,e,t,s,r);return Ul(o)}Gy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ui(e.pendingLanes);n!==0&&(jh(e,n|1),yt(e,Ie()),!(re&6)&&(Us=Ie()+500,wr()))}break;case 13:qr(function(){var r=Sn(t,1);if(r!==null){var s=ut();Ht(r,t,1,s)}}),ff(t,1)}};Dh=function(t){if(t.tag===13){var e=Sn(t,134217728);if(e!==null){var n=ut();Ht(e,t,134217728,n)}ff(t,134217728)}};Ky=function(t){if(t.tag===13){var e=or(t),n=Sn(t,e);if(n!==null){var r=ut();Ht(n,t,e,r)}ff(t,e)}};Qy=function(){return oe};Jy=function(t,e){var n=oe;try{return oe=t,e()}finally{oe=n}};md=function(t,e,n){switch(e){case"input":if(ad(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=uu(r);if(!s)throw Error(U(90));Sy(r),ad(r,s)}}}break;case"textarea":Ny(t,n);break;case"select":e=n.value,e!=null&&ks(t,!!n.multiple,e,!1)}};Vy=lf;Ly=qr;var ik={usingClientEntryPoint:!1,Events:[zo,ys,uu,Dy,My,lf]},Di={findFiberByHostInstance:jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ok={bundleType:Di.bundleType,version:Di.version,rendererPackageName:Di.rendererPackageName,rendererConfig:Di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Uy(t),t===null?null:t.stateNode},findFiberByHostInstance:Di.findFiberByHostInstance||rk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ba.isDisabled&&Ba.supportsFiber)try{iu=Ba.inject(ok),Xt=Ba}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ik;Nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pf(e))throw Error(U(200));return nk(t,e,null,n)};Nt.createRoot=function(t,e){if(!pf(t))throw Error(U(299));var n=!1,r="",s=v_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hf(t,1,!1,null,null,n,!1,r,s),t[In]=e.current,po(t.nodeType===8?t.parentNode:t),new mf(e)};Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Uy(e),t=t===null?null:t.stateNode,t};Nt.flushSync=function(t){return qr(t)};Nt.hydrate=function(t,e,n){if(!vu(e))throw Error(U(200));return _u(null,t,e,!0,n)};Nt.hydrateRoot=function(t,e,n){if(!pf(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=v_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=y_(e,null,t,1,n??null,s,!1,i,o),t[In]=e.current,po(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new yu(e)};Nt.render=function(t,e,n){if(!vu(e))throw Error(U(200));return _u(null,t,e,!1,n)};Nt.unmountComponentAtNode=function(t){if(!vu(t))throw Error(U(40));return t._reactRootContainer?(qr(function(){_u(null,null,t,!1,function(){t._reactRootContainer=null,t[In]=null})}),!0):!1};Nt.unstable_batchedUpdates=lf;Nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return _u(t,e,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function __(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(__)}catch(t){console.error(t)}}__(),_y.exports=Nt;var ak=_y.exports,x_,Dg=ak;x_=Dg.createRoot,Dg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ko(){return ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ko.apply(this,arguments)}var Xn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xn||(Xn={}));const Mg="popstate";function lk(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Gd("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Bl(s)}return ck(e,n,null,t)}function Ae(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function w_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uk(){return Math.random().toString(36).substr(2,8)}function Vg(t,e){return{usr:t.state,key:t.key,idx:e}}function Gd(t,e,n,r){return n===void 0&&(n=null),ko({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ni(e):e,{state:n,key:e&&e.key||r||uk()})}function Bl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ni(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ck(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Xn.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(ko({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=Xn.Pop;let I=f(),x=I==null?null:I-d;d=I,u&&u({action:l,location:N.location,delta:x})}function g(I,x){l=Xn.Push;let v=Gd(N.location,I,x);d=f()+1;let T=Vg(v,d),D=N.createHref(v);try{o.pushState(T,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(D)}i&&u&&u({action:l,location:N.location,delta:1})}function w(I,x){l=Xn.Replace;let v=Gd(N.location,I,x);d=f();let T=Vg(v,d),D=N.createHref(v);o.replaceState(T,"",D),i&&u&&u({action:l,location:N.location,delta:0})}function A(I){let x=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof I=="string"?I:Bl(I);return v=v.replace(/ $/,"%20"),Ae(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let N={get action(){return l},get location(){return t(s,o)},listen(I){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Mg,p),u=I,()=>{s.removeEventListener(Mg,p),u=null}},createHref(I){return e(s,I)},createURL:A,encodeLocation(I){let x=A(I);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:w,go(I){return o.go(I)}};return N}var Lg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lg||(Lg={}));function dk(t,e,n){return n===void 0&&(n="/"),hk(t,e,n)}function hk(t,e,n,r){let s=typeof e=="string"?ni(e):e,i=gf(s.pathname||"/",n);if(i==null)return null;let o=E_(t);fk(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=bk(i);l=Ek(o[u],d)}return l}function E_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Ae(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=lr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Ae(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),E_(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:xk(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of T_(i.path))s(i,o,u)}),e}function T_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=T_(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function fk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const mk=/^:[\w-]+$/,pk=3,gk=2,yk=1,vk=10,_k=-2,Og=t=>t==="*";function xk(t,e){let n=t.split("/"),r=n.length;return n.some(Og)&&(r+=_k),e&&(r+=gk),n.filter(s=>!Og(s)).reduce((s,i)=>s+(mk.test(i)?pk:i===""?yk:vk),r)}function wk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Ek(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=Tk({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:lr([i,p.pathname]),pathnameBase:Nk(lr([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=lr([i,p.pathnameBase]))}return o}function Tk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kk(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:w}=f;if(g==="*"){let N=l[p]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const A=l[p];return w&&!A?d[g]=void 0:d[g]=(A||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function kk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),w_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function bk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return w_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Ik(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ni(t):t;return{pathname:n?n.startsWith("/")?n:Sk(n,e):e,search:Ck(r),hash:Rk(s)}}function Sk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Fc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ak(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function yf(t,e){let n=Ak(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function vf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ni(t):(s=ko({},t),Ae(!s.pathname||!s.pathname.includes("?"),Fc("?","pathname","search",s)),Ae(!s.pathname||!s.pathname.includes("#"),Fc("#","pathname","hash",s)),Ae(!s.search||!s.search.includes("#"),Fc("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=Ik(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const lr=t=>t.join("/").replace(/\/\/+/g,"/"),Nk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ck=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Rk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Pk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const k_=["post","put","patch","delete"];new Set(k_);const jk=["get",...k_];new Set(jk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bo(){return bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bo.apply(this,arguments)}const _f=j.createContext(null),Dk=j.createContext(null),Er=j.createContext(null),xu=j.createContext(null),Mn=j.createContext({outlet:null,matches:[],isDataRoute:!1}),b_=j.createContext(null);function Mk(t,e){let{relative:n}=e===void 0?{}:e;ri()||Ae(!1);let{basename:r,navigator:s}=j.useContext(Er),{hash:i,pathname:o,search:l}=S_(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:lr([r,o])),s.createHref({pathname:u,search:l,hash:i})}function ri(){return j.useContext(xu)!=null}function si(){return ri()||Ae(!1),j.useContext(xu).location}function I_(t){j.useContext(Er).static||j.useLayoutEffect(t)}function Wo(){let{isDataRoute:t}=j.useContext(Mn);return t?Qk():Vk()}function Vk(){ri()||Ae(!1);let t=j.useContext(_f),{basename:e,future:n,navigator:r}=j.useContext(Er),{matches:s}=j.useContext(Mn),{pathname:i}=si(),o=JSON.stringify(yf(s,n.v7_relativeSplatPath)),l=j.useRef(!1);return I_(()=>{l.current=!0}),j.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=vf(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:lr([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}function Lk(){let{matches:t}=j.useContext(Mn),e=t[t.length-1];return e?e.params:{}}function S_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(Er),{matches:s}=j.useContext(Mn),{pathname:i}=si(),o=JSON.stringify(yf(s,r.v7_relativeSplatPath));return j.useMemo(()=>vf(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Ok(t,e){return Fk(t,e)}function Fk(t,e,n,r){ri()||Ae(!1);let{navigator:s}=j.useContext(Er),{matches:i}=j.useContext(Mn),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=si(),f;if(e){var p;let I=typeof e=="string"?ni(e):e;u==="/"||(p=I.pathname)!=null&&p.startsWith(u)||Ae(!1),f=I}else f=d;let g=f.pathname||"/",w=g;if(u!=="/"){let I=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=dk(t,{pathname:w}),N=Wk(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},l,I.params),pathname:lr([u,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?u:lr([u,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),i,n,r);return e&&N?j.createElement(xu.Provider,{value:{location:bo({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Xn.Pop}},N):N}function Uk(){let t=Kk(),e=Pk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const Bk=j.createElement(Uk,null);class zk extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(Mn.Provider,{value:this.props.routeContext},j.createElement(b_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $k(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(_f);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Mn.Provider,{value:e},r)}function Wk(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||Ae(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:w}=n,A=p.route.loader&&g[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||A){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let w,A=!1,N=null,I=null;n&&(w=l&&p.route.id?l[p.route.id]:void 0,N=p.route.errorElement||Bk,u&&(d<0&&g===0?(Jk("route-fallback"),A=!0,I=null):d===g&&(A=!0,I=p.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),v=()=>{let T;return w?T=N:A?T=I:p.route.Component?T=j.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=f,j.createElement($k,{match:p,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:T})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?j.createElement(zk,{location:n.location,revalidation:n.revalidation,component:N,error:w,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var A_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(A_||{}),N_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(N_||{});function Hk(t){let e=j.useContext(_f);return e||Ae(!1),e}function qk(t){let e=j.useContext(Dk);return e||Ae(!1),e}function Gk(t){let e=j.useContext(Mn);return e||Ae(!1),e}function C_(t){let e=Gk(),n=e.matches[e.matches.length-1];return n.route.id||Ae(!1),n.route.id}function Kk(){var t;let e=j.useContext(b_),n=qk(),r=C_();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Qk(){let{router:t}=Hk(A_.UseNavigateStable),e=C_(N_.UseNavigateStable),n=j.useRef(!1);return I_(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,bo({fromRouteId:e},i)))},[t,e])}const Fg={};function Jk(t,e,n){Fg[t]||(Fg[t]=!0)}function Yk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Io(t){let{to:e,replace:n,state:r,relative:s}=t;ri()||Ae(!1);let{future:i,static:o}=j.useContext(Er),{matches:l}=j.useContext(Mn),{pathname:u}=si(),d=Wo(),f=vf(e,yf(l,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return j.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function zn(t){Ae(!1)}function Xk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Xn.Pop,navigator:i,static:o=!1,future:l}=t;ri()&&Ae(!1);let u=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:i,static:o,future:bo({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=ni(r));let{pathname:f="/",search:p="",hash:g="",state:w=null,key:A="default"}=r,N=j.useMemo(()=>{let I=gf(f,u);return I==null?null:{location:{pathname:I,search:p,hash:g,state:w,key:A},navigationType:s}},[u,f,p,g,w,A,s]);return N==null?null:j.createElement(Er.Provider,{value:d},j.createElement(xu.Provider,{children:n,value:N}))}function Zk(t){let{children:e,location:n}=t;return Ok(Kd(e),n)}new Promise(()=>{});function Kd(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,Kd(r.props.children,i));return}r.type!==zn&&Ae(!1),!r.props.index||!r.props.children||Ae(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Kd(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qd(){return Qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qd.apply(this,arguments)}function e2(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function t2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function n2(t,e){return t.button===0&&(!e||e==="_self")&&!t2(t)}function Jd(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function r2(t,e){let n=Jd(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const s2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],i2="6";try{window.__reactRouterVersion=i2}catch{}const o2="startTransition",Ug=J1[o2];function a2(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=lk({window:s,v5Compat:!0}));let o=i.current,[l,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=j.useCallback(p=>{d&&Ug?Ug(()=>u(p)):u(p)},[u,d]);return j.useLayoutEffect(()=>o.listen(f),[o,f]),j.useEffect(()=>Yk(r),[r]),j.createElement(Xk,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const l2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kt=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=e2(e,s2),{basename:w}=j.useContext(Er),A,N=!1;if(typeof d=="string"&&u2.test(d)&&(A=d,l2))try{let T=new URL(window.location.href),D=d.startsWith("//")?new URL(T.protocol+d):new URL(d),L=gf(D.pathname,w);D.origin===T.origin&&L!=null?d=L+D.search+D.hash:N=!0}catch{}let I=Mk(d,{relative:s}),x=c2(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:p});function v(T){r&&r(T),T.defaultPrevented||x(T)}return j.createElement("a",Qd({},g,{href:A||I,onClick:N||i?r:v,ref:n,target:u}))});var Bg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Bg||(Bg={}));var zg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zg||(zg={}));function c2(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=Wo(),d=si(),f=S_(t,{relative:o});return j.useCallback(p=>{if(n2(p,n)){p.preventDefault();let g=r!==void 0?r:Bl(d)===Bl(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,u,f,r,s,n,t,i,o,l])}function xf(t){let e=j.useRef(Jd(t)),n=j.useRef(!1),r=si(),s=j.useMemo(()=>r2(r.search,n.current?null:e.current),[r.search]),i=Wo(),o=j.useCallback((l,u)=>{const d=Jd(typeof l=="function"?l(s):l);n.current=!0,i("?"+d,u)},[i,s]);return[s,o]}var $g={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},d2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},P_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[f],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(R_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new h2;const g=i<<2|l>>4;if(r.push(g),d!==64){const w=l<<4&240|d>>2;if(r.push(w),p!==64){const A=d<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f2=function(t){const e=R_(t);return P_.encodeByteArray(e,!0)},zl=function(t){return f2(t).replace(/\./g,"")},j_=function(t){try{return P_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=()=>m2().__FIREBASE_DEFAULTS__,g2=()=>{if(typeof process>"u"||typeof $g>"u")return;const t=$g.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&j_(t[1]);return e&&JSON.parse(e)},wu=()=>{try{return p2()||g2()||y2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},D_=t=>{var e,n;return(n=(e=wu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},v2=t=>{const e=D_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},M_=()=>{var t;return(t=wu())===null||t===void 0?void 0:t.config},V_=t=>{var e;return(e=wu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zl(JSON.stringify(n)),zl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function E2(){var t;const e=(t=wu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function k2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function b2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function I2(){const t=it();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function S2(){return!E2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A2(){try{return typeof indexedDB=="object"}catch{return!1}}function N2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="FirebaseError";class Vn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=C2,Object.setPrototypeOf(this,Vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ho.prototype.create)}}class Ho{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?R2(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Vn(s,l,r)}}function R2(t,e){return t.replace(P2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const P2=/\{\$([^}]+)}/g;function j2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function So(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Wg(i)&&Wg(o)){if(!So(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Wg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function D2(t,e){const n=new M2(t,e);return n.subscribe.bind(n)}class M2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");V2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Uc),s.error===void 0&&(s.error=Uc),s.complete===void 0&&(s.complete=Uc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Uc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t){return t&&t._delegate?t._delegate:t}class Gr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F2(e))try{this.getOrInitializeService({instanceIdentifier:Pr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pr){return this.instances.has(e)}getOptions(e=Pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:O2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pr){return this.component?this.component.multipleInstances?e:Pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function O2(t){return t===Pr?void 0:t}function F2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new L2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(te||(te={}));const B2={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},z2=te.INFO,$2={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},W2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=$2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wf{constructor(e){this.name=e,this._logLevel=z2,this._logHandler=W2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?B2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}}const H2=(t,e)=>e.some(n=>t instanceof n);let Hg,qg;function q2(){return Hg||(Hg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G2(){return qg||(qg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L_=new WeakMap,Yd=new WeakMap,O_=new WeakMap,Bc=new WeakMap,Ef=new WeakMap;function K2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ur(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&L_.set(n,t)}).catch(()=>{}),Ef.set(e,t),e}function Q2(t){if(Yd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Yd.set(t,e)}let Xd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||O_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function J2(t){Xd=t(Xd)}function Y2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zc(this),e,...n);return O_.set(r,e.sort?e.sort():[e]),ur(r)}:G2().includes(t)?function(...e){return t.apply(zc(this),e),ur(L_.get(this))}:function(...e){return ur(t.apply(zc(this),e))}}function X2(t){return typeof t=="function"?Y2(t):(t instanceof IDBTransaction&&Q2(t),H2(t,q2())?new Proxy(t,Xd):t)}function ur(t){if(t instanceof IDBRequest)return K2(t);if(Bc.has(t))return Bc.get(t);const e=X2(t);return e!==t&&(Bc.set(t,e),Ef.set(e,t)),e}const zc=t=>Ef.get(t);function Z2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=ur(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ur(o.result),u.oldVersion,u.newVersion,ur(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const eb=["get","getKey","getAll","getAllKeys","count"],tb=["put","add","delete","clear"],$c=new Map;function Gg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($c.get(e))return $c.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=tb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||eb.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return $c.set(e,i),i}J2(t=>({...t,get:(e,n,r)=>Gg(e,n)||t.get(e,n,r),has:(e,n)=>!!Gg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zd="@firebase/app",Kg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new wf("@firebase/app"),sb="@firebase/app-compat",ib="@firebase/analytics-compat",ob="@firebase/analytics",ab="@firebase/app-check-compat",lb="@firebase/app-check",ub="@firebase/auth",cb="@firebase/auth-compat",db="@firebase/database",hb="@firebase/data-connect",fb="@firebase/database-compat",mb="@firebase/functions",pb="@firebase/functions-compat",gb="@firebase/installations",yb="@firebase/installations-compat",vb="@firebase/messaging",_b="@firebase/messaging-compat",xb="@firebase/performance",wb="@firebase/performance-compat",Eb="@firebase/remote-config",Tb="@firebase/remote-config-compat",kb="@firebase/storage",bb="@firebase/storage-compat",Ib="@firebase/firestore",Sb="@firebase/vertexai-preview",Ab="@firebase/firestore-compat",Nb="firebase",Cb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="[DEFAULT]",Rb={[Zd]:"fire-core",[sb]:"fire-core-compat",[ob]:"fire-analytics",[ib]:"fire-analytics-compat",[lb]:"fire-app-check",[ab]:"fire-app-check-compat",[ub]:"fire-auth",[cb]:"fire-auth-compat",[db]:"fire-rtdb",[hb]:"fire-data-connect",[fb]:"fire-rtdb-compat",[mb]:"fire-fn",[pb]:"fire-fn-compat",[gb]:"fire-iid",[yb]:"fire-iid-compat",[vb]:"fire-fcm",[_b]:"fire-fcm-compat",[xb]:"fire-perf",[wb]:"fire-perf-compat",[Eb]:"fire-rc",[Tb]:"fire-rc-compat",[kb]:"fire-gcs",[bb]:"fire-gcs-compat",[Ib]:"fire-fst",[Ab]:"fire-fst-compat",[Sb]:"fire-vertex","fire-js":"fire-js",[Nb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=new Map,Pb=new Map,th=new Map;function Qg(t,e){try{t.container.addComponent(e)}catch(n){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Bs(t){const e=t.name;if(th.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;th.set(e,t);for(const n of $l.values())Qg(n,t);for(const n of Pb.values())Qg(n,t);return!0}function Tf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _n(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cr=new Ho("app","Firebase",jb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=Cb;function F_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:eh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw cr.create("bad-app-name",{appName:String(s)});if(n||(n=M_()),!n)throw cr.create("no-options");const i=$l.get(s);if(i){if(So(n,i.options)&&So(r,i.config))return i;throw cr.create("duplicate-app",{appName:s})}const o=new U2(s);for(const u of th.values())o.addComponent(u);const l=new Db(n,r,o);return $l.set(s,l),l}function U_(t=eh){const e=$l.get(t);if(!e&&t===eh&&M_())return F_();if(!e)throw cr.create("no-app",{appName:t});return e}function dr(t,e,n){var r;let s=(r=Rb[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(l.join(" "));return}Bs(new Gr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="firebase-heartbeat-database",Vb=1,Ao="firebase-heartbeat-store";let Wc=null;function B_(){return Wc||(Wc=Z2(Mb,Vb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ao)}catch(n){console.warn(n)}}}}).catch(t=>{throw cr.create("idb-open",{originalErrorMessage:t.message})})),Wc}async function Lb(t){try{const n=(await B_()).transaction(Ao),r=await n.objectStore(Ao).get(z_(t));return await n.done,r}catch(e){if(e instanceof Vn)Nn.warn(e.message);else{const n=cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(n.message)}}}async function Jg(t,e){try{const r=(await B_()).transaction(Ao,"readwrite");await r.objectStore(Ao).put(e,z_(t)),await r.done}catch(n){if(n instanceof Vn)Nn.warn(n.message);else{const r=cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Nn.warn(r.message)}}}function z_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=1024,Fb=30*24*60*60*1e3;class Ub{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new zb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Yg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Fb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Yg(),{heartbeatsToSend:r,unsentEntries:s}=Bb(this._heartbeatsCache.heartbeats),i=zl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Nn.warn(n),""}}}function Yg(){return new Date().toISOString().substring(0,10)}function Bb(t,e=Ob){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Xg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Xg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class zb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A2()?N2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Lb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Xg(t){return zl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t){Bs(new Gr("platform-logger",e=>new nb(e),"PRIVATE")),Bs(new Gr("heartbeat",e=>new Ub(e),"PRIVATE")),dr(Zd,Kg,t),dr(Zd,Kg,"esm2017"),dr("fire-js","")}$b("");function kf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function $_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wb=$_,W_=new Ho("auth","Firebase",$_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new wf("@firebase/auth");function Hb(t,...e){Wl.logLevel<=te.WARN&&Wl.warn(`Auth (${ii}): ${t}`,...e)}function ol(t,...e){Wl.logLevel<=te.ERROR&&Wl.error(`Auth (${ii}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(t,...e){throw If(t,...e)}function qt(t,...e){return If(t,...e)}function bf(t,e,n){const r=Object.assign(Object.assign({},Wb()),{[e]:n});return new Ho("auth","Firebase",r).create(e,{appName:t.name})}function Ur(t){return bf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qb(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&rn(t,"argument-error"),bf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function If(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return W_.create(t,...e)}function G(t,e,...n){if(!t)throw If(e,...n)}function xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ol(e),new Error(e)}function Cn(t,e){t||xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Gb(){return Zg()==="http:"||Zg()==="https:"}function Zg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Gb()||k2()||"connection"in navigator)?navigator.onLine:!0}function Qb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n){this.shortDelay=e,this.longDelay=n,Cn(n>e,"Short delay should be less than long delay!"),this.isMobile=w2()||b2()}get(){return Kb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(t,e){Cn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=new Go(3e4,6e4);function Af(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function oi(t,e,n,r,s={}){return q_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=qo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return T2()||(d.referrerPolicy="no-referrer"),H_.fetch()(G_(t,t.config.apiHost,n,l),d)})}async function q_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Jb),e);try{const s=new Zb(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw za(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw za(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw za(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw za(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw bf(t,f,d);rn(t,f)}}catch(s){if(s instanceof Vn)throw s;rn(t,"network-request-failed",{message:String(s)})}}async function Xb(t,e,n,r,s={}){const i=await oi(t,e,n,r,s);return"mfaPendingCredential"in i&&rn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function G_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Sf(t.config,s):`${t.config.apiScheme}://${s}`}class Zb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qt(this.auth,"network-request-failed")),Yb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function za(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=qt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(t,e){return oi(t,"POST","/v1/accounts:delete",e)}async function K_(t,e){return oi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tI(t,e=!1){const n=je(t),r=await n.getIdToken(e),s=Nf(r);G(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:to(Hc(s.auth_time)),issuedAtTime:to(Hc(s.iat)),expirationTime:to(Hc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Hc(t){return Number(t)*1e3}function Nf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ol("JWT malformed, contained fewer than 3 sections"),null;try{const s=j_(n);return s?JSON.parse(s):(ol("Failed to decode base64 JWT payload"),null)}catch(s){return ol("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function e0(t){const e=Nf(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Vn&&nI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=to(this.lastLoginAt),this.creationTime=to(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await No(t,K_(n,{idToken:r}));G(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Q_(i.providerUserInfo):[],l=iI(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new rh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function sI(t){const e=je(t);await Hl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Q_(t){return t.map(e=>{var{providerId:n}=e,r=kf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(t,e){const n=await q_(t,{},async()=>{const r=qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=G_(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",H_.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aI(t,e){return oi(t,"POST","/v2/accounts:revokeToken",Af(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=e0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await oI(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Cs;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(G(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(G(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cs,this.toJSON())}_performRefresh(){return xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class wn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=kf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await No(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tI(this,e)}reload(){return sI(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new wn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await No(this,eI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(l=n.tenantId)!==null&&l!==void 0?l:void 0,I=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:D,isAnonymous:L,providerData:F,stsTokenManager:k}=n;G(T&&k,e,"internal-error");const _=Cs.fromJSON(this.name,k);G(typeof T=="string",e,"internal-error"),Bn(p,e.name),Bn(g,e.name),G(typeof D=="boolean",e,"internal-error"),G(typeof L=="boolean",e,"internal-error"),Bn(w,e.name),Bn(A,e.name),Bn(N,e.name),Bn(I,e.name),Bn(x,e.name),Bn(v,e.name);const E=new wn({uid:T,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:L,photoURL:A,phoneNumber:w,tenantId:N,stsTokenManager:_,createdAt:x,lastLoginAt:v});return F&&Array.isArray(F)&&(E.providerData=F.map(b=>Object.assign({},b))),I&&(E._redirectEventId=I),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Cs;s.updateFromServerResponse(n);const i=new wn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];G(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Q_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Cs;l.updateFromIdToken(r);const u=new wn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new rh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Map;function En(t){Cn(t instanceof Function,"Expected a class definition");let e=t0.get(t);return e?(Cn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,t0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}J_.type="NONE";const n0=J_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t,e,n){return`firebase:${t}:${e}:${n}`}class Rs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=al(this.userKey,s.apiKey,i),this.fullPersistenceKey=al("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Rs(En(n0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||En(n0);const o=al(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const p=wn._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Rs(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Rs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ex(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Y_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nx(e))return"Blackberry";if(rx(e))return"Webos";if(X_(e))return"Safari";if((e.includes("chrome/")||Z_(e))&&!e.includes("edge/"))return"Chrome";if(tx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Y_(t=it()){return/firefox\//i.test(t)}function X_(t=it()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Z_(t=it()){return/crios\//i.test(t)}function ex(t=it()){return/iemobile/i.test(t)}function tx(t=it()){return/android/i.test(t)}function nx(t=it()){return/blackberry/i.test(t)}function rx(t=it()){return/webos/i.test(t)}function Cf(t=it()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lI(t=it()){var e;return Cf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uI(){return I2()&&document.documentMode===10}function sx(t=it()){return Cf(t)||tx(t)||rx(t)||nx(t)||/windows phone/i.test(t)||ex(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e=[]){let n;switch(t){case"Browser":n=r0(it());break;case"Worker":n=`${r0(it())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ii}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(t,e={}){return oi(t,"GET","/v2/passwordPolicy",Af(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=6;class fI{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:hI,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new s0(this),this.idTokenSubscription=new s0(this),this.beforeStateQueue=new cI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=W_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=En(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Rs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await K_(this,{idToken:e}),r=await wn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(_n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Qb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Ur(this));const n=e?je(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(En(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dI(this),n=new fI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ho("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await aI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&En(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await Rs.create(this,[En(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ix(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Hb(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Eu(t){return je(t)}class s0{constructor(e){this.auth=e,this.observer=null,this.addObserver=D2(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pI(t){Rf=t}function gI(t){return Rf.loadJS(t)}function yI(){return Rf.gapiScript}function vI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t,e){const n=Tf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(So(i,e??{}))return s;rn(s,"already-initialized")}return n.initialize({options:e})}function xI(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(En);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wI(t,e,n){const r=Eu(t);G(r._canInitEmulator,r,"emulator-config-failed"),G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=ox(e),{host:o,port:l}=EI(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),TI()}function ox(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function EI(t){const e=ox(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:i0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:i0(o)}}}function i0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xn("not implemented")}_getIdTokenResponse(e){return xn("not implemented")}_linkToIdToken(e,n){return xn("not implemented")}_getReauthenticationResolver(e){return xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(t,e){return Xb(t,"POST","/v1/accounts:signInWithIdp",Af(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="http://localhost";class Kr extends ax{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Kr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=kf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Kr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ps(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ps(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ps(e,n)}buildRequest(){const e={requestUri:kI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends Pf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends Ko{constructor(){super("facebook.com")}static credential(e){return Kr._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gn.credential(e.oauthAccessToken)}catch{return null}}}Gn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn extends Ko{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Kr._fromParams({providerId:gn.PROVIDER_ID,signInMethod:gn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gn.credentialFromTaggedObject(e)}static credentialFromError(e){return gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gn.credential(n,r)}catch{return null}}}gn.GOOGLE_SIGN_IN_METHOD="google.com";gn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends Ko{constructor(){super("github.com")}static credential(e){return Kr._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kn.credential(e.oauthAccessToken)}catch{return null}}}Kn.GITHUB_SIGN_IN_METHOD="github.com";Kn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends Ko{constructor(){super("twitter.com")}static credential(e,n){return Kr._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qn.credential(n,r)}catch{return null}}}Qn.TWITTER_SIGN_IN_METHOD="twitter.com";Qn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await wn._fromIdTokenResponse(e,r,s),o=o0(r);return new zs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=o0(r);return new zs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function o0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql extends Vn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ql.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ql(e,n,r,s)}}function lx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ql._fromErrorAndOperation(t,i,e,r):i})}async function bI(t,e,n=!1){const r=await No(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function II(t,e,n=!1){const{auth:r}=t;if(_n(r.app))return Promise.reject(Ur(r));const s="reauthenticate";try{const i=await No(t,lx(r,s,e,t),n);G(i.idToken,r,"internal-error");const o=Nf(i.idToken);G(o,r,"internal-error");const{sub:l}=o;return G(t.uid===l,r,"user-mismatch"),zs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&rn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(t,e,n=!1){if(_n(t.app))return Promise.reject(Ur(t));const r="signIn",s=await lx(t,r,e),i=await zs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function AI(t,e,n,r){return je(t).onIdTokenChanged(e,n,r)}function NI(t,e,n){return je(t).beforeAuthStateChanged(e,n)}function CI(t,e,n,r){return je(t).onAuthStateChanged(e,n,r)}function RI(t){return je(t).signOut()}const Gl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gl,"1"),this.storage.removeItem(Gl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=1e3,jI=10;class cx extends ux{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);uI()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,jI):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},PI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cx.type="LOCAL";const DI=cx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx extends ux{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dx.type="SESSION";const hx=dx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Tu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await MI(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=jf("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return window}function LI(t){en().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(){return typeof en().WorkerGlobalScope<"u"&&typeof en().importScripts=="function"}async function OI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function UI(){return fx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="firebaseLocalStorageDb",BI=1,Kl="firebaseLocalStorage",px="fbase_key";class Qo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ku(t,e){return t.transaction([Kl],e?"readwrite":"readonly").objectStore(Kl)}function zI(){const t=indexedDB.deleteDatabase(mx);return new Qo(t).toPromise()}function sh(){const t=indexedDB.open(mx,BI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kl,{keyPath:px})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kl)?e(r):(r.close(),await zI(),e(await sh()))})})}async function a0(t,e,n){const r=ku(t,!0).put({[px]:e,value:n});return new Qo(r).toPromise()}async function $I(t,e){const n=ku(t,!1).get(e),r=await new Qo(n).toPromise();return r===void 0?null:r.value}function l0(t,e){const n=ku(t,!0).delete(e);return new Qo(n).toPromise()}const WI=800,HI=3;class gx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>HI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tu._getInstance(UI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await OI(),!this.activeServiceWorker)return;this.sender=new VI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sh();return await a0(e,Gl,"1"),await l0(e,Gl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>a0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$I(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>l0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ku(s,!1).getAll();return new Qo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gx.type="LOCAL";const qI=gx;new Go(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t,e){return e?En(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends ax{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ps(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ps(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ps(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function GI(t){return SI(t.auth,new Df(t),t.bypassAuthState)}function KI(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),II(n,new Df(t),t.bypassAuthState)}async function QI(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),bI(n,new Df(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GI;case"linkViaPopup":case"linkViaRedirect":return QI;case"reauthViaPopup":case"reauthViaRedirect":return KI;default:rn(this.auth,"internal-error")}}resolve(e){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=new Go(2e3,1e4);async function YI(t,e,n){if(_n(t.app))return Promise.reject(qt(t,"operation-not-supported-in-this-environment"));const r=Eu(t);qb(t,e,Pf);const s=yx(r,n);return new Vr(r,"signInViaPopup",e,s).executeNotNull()}class Vr extends vx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Vr.currentPopupAction&&Vr.currentPopupAction.cancel(),Vr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Cn(this.filter.length===1,"Popup operations only handle one event");const e=jf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JI.get())};e()}}Vr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="pendingRedirect",ll=new Map;class ZI extends vx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ll.get(this.auth._key());if(!e){try{const r=await eS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ll.set(this.auth._key(),e)}return this.bypassAuthState||ll.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eS(t,e){const n=rS(e),r=nS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function tS(t,e){ll.set(t._key(),e)}function nS(t){return En(t._redirectPersistence)}function rS(t){return al(XI,t.config.apiKey,t.name)}async function sS(t,e,n=!1){if(_n(t.app))return Promise.reject(Ur(t));const r=Eu(t),s=yx(r,e),o=await new ZI(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=10*60*1e3;class oS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_x(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iS&&this.cachedEventUids.clear(),this.cachedEventUids.has(u0(e))}saveEventToCache(e){this.cachedEventUids.add(u0(e)),this.lastProcessedEventTime=Date.now()}}function u0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _x({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function aS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _x(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(t,e={}){return oi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cS=/^https?/;async function dS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lS(t);for(const n of e)try{if(hS(n))return}catch{}rn(t,"unauthorized-domain")}function hS(t){const e=nh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cS.test(n))return!1;if(uS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=new Go(3e4,6e4);function c0(){const t=en().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mS(t){return new Promise((e,n)=>{var r,s,i;function o(){c0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{c0(),n(qt(t,"network-request-failed"))},timeout:fS.get()})}if(!((s=(r=en().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=en().gapi)===null||i===void 0)&&i.load)o();else{const l=vI("iframefcb");return en()[l]=()=>{gapi.load?o():n(qt(t,"network-request-failed"))},gI(`${yI()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw ul=null,e})}let ul=null;function pS(t){return ul=ul||mS(t),ul}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=new Go(5e3,15e3),yS="__/auth/iframe",vS="emulator/auth/iframe",_S={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wS(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sf(e,vS):`https://${t.config.authDomain}/${yS}`,r={apiKey:e.apiKey,appName:t.name,v:ii},s=xS.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${qo(r).slice(1)}`}async function ES(t){const e=await pS(t),n=en().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:wS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_S,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=qt(t,"network-request-failed"),l=en().setTimeout(()=>{i(o)},gS.get());function u(){en().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kS=500,bS=600,IS="_blank",SS="http://localhost";class d0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AS(t,e,n,r=kS,s=bS){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},TS),{width:r.toString(),height:s.toString(),top:i,left:o}),d=it().toLowerCase();n&&(l=Z_(d)?IS:n),Y_(d)&&(e=e||SS,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,A])=>`${g}${w}=${A},`,"");if(lI(d)&&l!=="_self")return NS(e||"",l),new d0(null);const p=window.open(e||"",l,f);G(p,t,"popup-blocked");try{p.focus()}catch{}return new d0(p)}function NS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="__/auth/handler",RS="emulator/auth/handler",PS=encodeURIComponent("fac");async function h0(t,e,n,r,s,i){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ii,eventId:s};if(e instanceof Pf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",j2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Ko){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${PS}=${encodeURIComponent(u)}`:"";return`${jS(t)}?${qo(l).slice(1)}${d}`}function jS({config:t}){return t.emulator?Sf(t,RS):`https://${t.authDomain}/${CS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="webStorageSupport";class DS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hx,this._completeRedirectFn=sS,this._overrideRedirectResult=tS}async _openPopup(e,n,r,s){var i;Cn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await h0(e,n,r,nh(),s);return AS(e,o,jf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await h0(e,n,r,nh(),s);return LI(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Cn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ES(e),r=new oS(e);return n.register("authEvent",s=>(G(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qc,{type:qc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[qc];o!==void 0&&n(!!o),rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sx()||X_()||Cf()}}const MS=DS;var f0="@firebase/auth",m0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OS(t){Bs(new Gr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ix(t)},d=new mI(r,s,i,u);return xI(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Bs(new Gr("auth-internal",e=>{const n=Eu(e.getProvider("auth").getImmediate());return(r=>new VS(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(f0,m0,LS(t)),dr(f0,m0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=5*60,US=V_("authIdTokenMaxAge")||FS;let p0=null;const BS=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>US)return;const s=n==null?void 0:n.token;p0!==s&&(p0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function zS(t=U_()){const e=Tf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=_I(t,{popupRedirectResolver:MS,persistence:[qI,DI,hx]}),r=V_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=BS(i.toString());NI(n,o,()=>o(n.currentUser)),AI(n,l=>o(l))}}const s=D_("auth");return s&&wI(n,`http://${s}`),n}function $S(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}pI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=qt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",$S().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OS("Browser");var g0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Br,xx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,_){function E(){}E.prototype=_.prototype,k.D=_.prototype,k.prototype=new E,k.prototype.constructor=k,k.C=function(b,C,P){for(var S=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)S[Rt-2]=arguments[Rt];return _.prototype[C].apply(b,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,_,E){E||(E=0);var b=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)b[C]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(C=0;16>C;++C)b[C]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=k.g[0],E=k.g[1],C=k.g[2];var P=k.g[3],S=_+(P^E&(C^P))+b[0]+3614090360&4294967295;_=E+(S<<7&4294967295|S>>>25),S=P+(C^_&(E^C))+b[1]+3905402710&4294967295,P=_+(S<<12&4294967295|S>>>20),S=C+(E^P&(_^E))+b[2]+606105819&4294967295,C=P+(S<<17&4294967295|S>>>15),S=E+(_^C&(P^_))+b[3]+3250441966&4294967295,E=C+(S<<22&4294967295|S>>>10),S=_+(P^E&(C^P))+b[4]+4118548399&4294967295,_=E+(S<<7&4294967295|S>>>25),S=P+(C^_&(E^C))+b[5]+1200080426&4294967295,P=_+(S<<12&4294967295|S>>>20),S=C+(E^P&(_^E))+b[6]+2821735955&4294967295,C=P+(S<<17&4294967295|S>>>15),S=E+(_^C&(P^_))+b[7]+4249261313&4294967295,E=C+(S<<22&4294967295|S>>>10),S=_+(P^E&(C^P))+b[8]+1770035416&4294967295,_=E+(S<<7&4294967295|S>>>25),S=P+(C^_&(E^C))+b[9]+2336552879&4294967295,P=_+(S<<12&4294967295|S>>>20),S=C+(E^P&(_^E))+b[10]+4294925233&4294967295,C=P+(S<<17&4294967295|S>>>15),S=E+(_^C&(P^_))+b[11]+2304563134&4294967295,E=C+(S<<22&4294967295|S>>>10),S=_+(P^E&(C^P))+b[12]+1804603682&4294967295,_=E+(S<<7&4294967295|S>>>25),S=P+(C^_&(E^C))+b[13]+4254626195&4294967295,P=_+(S<<12&4294967295|S>>>20),S=C+(E^P&(_^E))+b[14]+2792965006&4294967295,C=P+(S<<17&4294967295|S>>>15),S=E+(_^C&(P^_))+b[15]+1236535329&4294967295,E=C+(S<<22&4294967295|S>>>10),S=_+(C^P&(E^C))+b[1]+4129170786&4294967295,_=E+(S<<5&4294967295|S>>>27),S=P+(E^C&(_^E))+b[6]+3225465664&4294967295,P=_+(S<<9&4294967295|S>>>23),S=C+(_^E&(P^_))+b[11]+643717713&4294967295,C=P+(S<<14&4294967295|S>>>18),S=E+(P^_&(C^P))+b[0]+3921069994&4294967295,E=C+(S<<20&4294967295|S>>>12),S=_+(C^P&(E^C))+b[5]+3593408605&4294967295,_=E+(S<<5&4294967295|S>>>27),S=P+(E^C&(_^E))+b[10]+38016083&4294967295,P=_+(S<<9&4294967295|S>>>23),S=C+(_^E&(P^_))+b[15]+3634488961&4294967295,C=P+(S<<14&4294967295|S>>>18),S=E+(P^_&(C^P))+b[4]+3889429448&4294967295,E=C+(S<<20&4294967295|S>>>12),S=_+(C^P&(E^C))+b[9]+568446438&4294967295,_=E+(S<<5&4294967295|S>>>27),S=P+(E^C&(_^E))+b[14]+3275163606&4294967295,P=_+(S<<9&4294967295|S>>>23),S=C+(_^E&(P^_))+b[3]+4107603335&4294967295,C=P+(S<<14&4294967295|S>>>18),S=E+(P^_&(C^P))+b[8]+1163531501&4294967295,E=C+(S<<20&4294967295|S>>>12),S=_+(C^P&(E^C))+b[13]+2850285829&4294967295,_=E+(S<<5&4294967295|S>>>27),S=P+(E^C&(_^E))+b[2]+4243563512&4294967295,P=_+(S<<9&4294967295|S>>>23),S=C+(_^E&(P^_))+b[7]+1735328473&4294967295,C=P+(S<<14&4294967295|S>>>18),S=E+(P^_&(C^P))+b[12]+2368359562&4294967295,E=C+(S<<20&4294967295|S>>>12),S=_+(E^C^P)+b[5]+4294588738&4294967295,_=E+(S<<4&4294967295|S>>>28),S=P+(_^E^C)+b[8]+2272392833&4294967295,P=_+(S<<11&4294967295|S>>>21),S=C+(P^_^E)+b[11]+1839030562&4294967295,C=P+(S<<16&4294967295|S>>>16),S=E+(C^P^_)+b[14]+4259657740&4294967295,E=C+(S<<23&4294967295|S>>>9),S=_+(E^C^P)+b[1]+2763975236&4294967295,_=E+(S<<4&4294967295|S>>>28),S=P+(_^E^C)+b[4]+1272893353&4294967295,P=_+(S<<11&4294967295|S>>>21),S=C+(P^_^E)+b[7]+4139469664&4294967295,C=P+(S<<16&4294967295|S>>>16),S=E+(C^P^_)+b[10]+3200236656&4294967295,E=C+(S<<23&4294967295|S>>>9),S=_+(E^C^P)+b[13]+681279174&4294967295,_=E+(S<<4&4294967295|S>>>28),S=P+(_^E^C)+b[0]+3936430074&4294967295,P=_+(S<<11&4294967295|S>>>21),S=C+(P^_^E)+b[3]+3572445317&4294967295,C=P+(S<<16&4294967295|S>>>16),S=E+(C^P^_)+b[6]+76029189&4294967295,E=C+(S<<23&4294967295|S>>>9),S=_+(E^C^P)+b[9]+3654602809&4294967295,_=E+(S<<4&4294967295|S>>>28),S=P+(_^E^C)+b[12]+3873151461&4294967295,P=_+(S<<11&4294967295|S>>>21),S=C+(P^_^E)+b[15]+530742520&4294967295,C=P+(S<<16&4294967295|S>>>16),S=E+(C^P^_)+b[2]+3299628645&4294967295,E=C+(S<<23&4294967295|S>>>9),S=_+(C^(E|~P))+b[0]+4096336452&4294967295,_=E+(S<<6&4294967295|S>>>26),S=P+(E^(_|~C))+b[7]+1126891415&4294967295,P=_+(S<<10&4294967295|S>>>22),S=C+(_^(P|~E))+b[14]+2878612391&4294967295,C=P+(S<<15&4294967295|S>>>17),S=E+(P^(C|~_))+b[5]+4237533241&4294967295,E=C+(S<<21&4294967295|S>>>11),S=_+(C^(E|~P))+b[12]+1700485571&4294967295,_=E+(S<<6&4294967295|S>>>26),S=P+(E^(_|~C))+b[3]+2399980690&4294967295,P=_+(S<<10&4294967295|S>>>22),S=C+(_^(P|~E))+b[10]+4293915773&4294967295,C=P+(S<<15&4294967295|S>>>17),S=E+(P^(C|~_))+b[1]+2240044497&4294967295,E=C+(S<<21&4294967295|S>>>11),S=_+(C^(E|~P))+b[8]+1873313359&4294967295,_=E+(S<<6&4294967295|S>>>26),S=P+(E^(_|~C))+b[15]+4264355552&4294967295,P=_+(S<<10&4294967295|S>>>22),S=C+(_^(P|~E))+b[6]+2734768916&4294967295,C=P+(S<<15&4294967295|S>>>17),S=E+(P^(C|~_))+b[13]+1309151649&4294967295,E=C+(S<<21&4294967295|S>>>11),S=_+(C^(E|~P))+b[4]+4149444226&4294967295,_=E+(S<<6&4294967295|S>>>26),S=P+(E^(_|~C))+b[11]+3174756917&4294967295,P=_+(S<<10&4294967295|S>>>22),S=C+(_^(P|~E))+b[2]+718787259&4294967295,C=P+(S<<15&4294967295|S>>>17),S=E+(P^(C|~_))+b[9]+3951481745&4294967295,k.g[0]=k.g[0]+_&4294967295,k.g[1]=k.g[1]+(C+(S<<21&4294967295|S>>>11))&4294967295,k.g[2]=k.g[2]+C&4294967295,k.g[3]=k.g[3]+P&4294967295}r.prototype.u=function(k,_){_===void 0&&(_=k.length);for(var E=_-this.blockSize,b=this.B,C=this.h,P=0;P<_;){if(C==0)for(;P<=E;)s(this,k,P),P+=this.blockSize;if(typeof k=="string"){for(;P<_;)if(b[C++]=k.charCodeAt(P++),C==this.blockSize){s(this,b),C=0;break}}else for(;P<_;)if(b[C++]=k[P++],C==this.blockSize){s(this,b),C=0;break}}this.h=C,this.o+=_},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var _=1;_<k.length-8;++_)k[_]=0;var E=8*this.o;for(_=k.length-8;_<k.length;++_)k[_]=E&255,E/=256;for(this.u(k),k=Array(16),_=E=0;4>_;++_)for(var b=0;32>b;b+=8)k[E++]=this.g[_]>>>b&255;return k};function i(k,_){var E=l;return Object.prototype.hasOwnProperty.call(E,k)?E[k]:E[k]=_(k)}function o(k,_){this.h=_;for(var E=[],b=!0,C=k.length-1;0<=C;C--){var P=k[C]|0;b&&P==_||(E[C]=P,b=!1)}this.g=E}var l={};function u(k){return-128<=k&&128>k?i(k,function(_){return new o([_|0],0>_?-1:0)}):new o([k|0],0>k?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return p;if(0>k)return I(d(-k));for(var _=[],E=1,b=0;k>=E;b++)_[b]=k/E|0,E*=4294967296;return new o(_,0)}function f(k,_){if(k.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(k.charAt(0)=="-")return I(f(k.substring(1),_));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(_,8)),b=p,C=0;C<k.length;C+=8){var P=Math.min(8,k.length-C),S=parseInt(k.substring(C,C+P),_);8>P?(P=d(Math.pow(_,P)),b=b.j(P).add(d(S))):(b=b.j(E),b=b.add(d(S)))}return b}var p=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-I(this).m();for(var k=0,_=1,E=0;E<this.g.length;E++){var b=this.i(E);k+=(0<=b?b:4294967296+b)*_,_*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(A(this))return"0";if(N(this))return"-"+I(this).toString(k);for(var _=d(Math.pow(k,6)),E=this,b="";;){var C=D(E,_).g;E=x(E,C.j(_));var P=((0<E.g.length?E.g[0]:E.h)>>>0).toString(k);if(E=C,A(E))return P+b;for(;6>P.length;)P="0"+P;b=P+b}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function A(k){if(k.h!=0)return!1;for(var _=0;_<k.g.length;_++)if(k.g[_]!=0)return!1;return!0}function N(k){return k.h==-1}t.l=function(k){return k=x(this,k),N(k)?-1:A(k)?0:1};function I(k){for(var _=k.g.length,E=[],b=0;b<_;b++)E[b]=~k.g[b];return new o(E,~k.h).add(g)}t.abs=function(){return N(this)?I(this):this},t.add=function(k){for(var _=Math.max(this.g.length,k.g.length),E=[],b=0,C=0;C<=_;C++){var P=b+(this.i(C)&65535)+(k.i(C)&65535),S=(P>>>16)+(this.i(C)>>>16)+(k.i(C)>>>16);b=S>>>16,P&=65535,S&=65535,E[C]=S<<16|P}return new o(E,E[E.length-1]&-2147483648?-1:0)};function x(k,_){return k.add(I(_))}t.j=function(k){if(A(this)||A(k))return p;if(N(this))return N(k)?I(this).j(I(k)):I(I(this).j(k));if(N(k))return I(this.j(I(k)));if(0>this.l(w)&&0>k.l(w))return d(this.m()*k.m());for(var _=this.g.length+k.g.length,E=[],b=0;b<2*_;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var C=0;C<k.g.length;C++){var P=this.i(b)>>>16,S=this.i(b)&65535,Rt=k.i(C)>>>16,br=k.i(C)&65535;E[2*b+2*C]+=S*br,v(E,2*b+2*C),E[2*b+2*C+1]+=P*br,v(E,2*b+2*C+1),E[2*b+2*C+1]+=S*Rt,v(E,2*b+2*C+1),E[2*b+2*C+2]+=P*Rt,v(E,2*b+2*C+2)}for(b=0;b<_;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=_;b<2*_;b++)E[b]=0;return new o(E,0)};function v(k,_){for(;(k[_]&65535)!=k[_];)k[_+1]+=k[_]>>>16,k[_]&=65535,_++}function T(k,_){this.g=k,this.h=_}function D(k,_){if(A(_))throw Error("division by zero");if(A(k))return new T(p,p);if(N(k))return _=D(I(k),_),new T(I(_.g),I(_.h));if(N(_))return _=D(k,I(_)),new T(I(_.g),_.h);if(30<k.g.length){if(N(k)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var E=g,b=_;0>=b.l(k);)E=L(E),b=L(b);var C=F(E,1),P=F(b,1);for(b=F(b,2),E=F(E,2);!A(b);){var S=P.add(b);0>=S.l(k)&&(C=C.add(E),P=S),b=F(b,1),E=F(E,1)}return _=x(k,C.j(_)),new T(C,_)}for(C=p;0<=k.l(_);){for(E=Math.max(1,Math.floor(k.m()/_.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),P=d(E),S=P.j(_);N(S)||0<S.l(k);)E-=b,P=d(E),S=P.j(_);A(P)&&(P=g),C=C.add(P),k=x(k,S)}return new T(C,k)}t.A=function(k){return D(this,k).h},t.and=function(k){for(var _=Math.max(this.g.length,k.g.length),E=[],b=0;b<_;b++)E[b]=this.i(b)&k.i(b);return new o(E,this.h&k.h)},t.or=function(k){for(var _=Math.max(this.g.length,k.g.length),E=[],b=0;b<_;b++)E[b]=this.i(b)|k.i(b);return new o(E,this.h|k.h)},t.xor=function(k){for(var _=Math.max(this.g.length,k.g.length),E=[],b=0;b<_;b++)E[b]=this.i(b)^k.i(b);return new o(E,this.h^k.h)};function L(k){for(var _=k.g.length+1,E=[],b=0;b<_;b++)E[b]=k.i(b)<<1|k.i(b-1)>>>31;return new o(E,k.h)}function F(k,_){var E=_>>5;_%=32;for(var b=k.g.length-E,C=[],P=0;P<b;P++)C[P]=0<_?k.i(P+E)>>>_|k.i(P+E+1)<<32-_:k.i(P+E);return new o(C,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Br=o}).apply(typeof g0<"u"?g0:typeof self<"u"?self:typeof window<"u"?window:{});var $a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wx,zi,Ex,cl,ih,Tx,kx,bx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof $a=="object"&&$a];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var R=a[y];if(!(R in m))break e;m=m[R]}a=a[a.length-1],y=m[a],h=h(y),h!=y&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,y=!1,R={next:function(){if(!y&&m<a.length){var M=m++;return{value:h(M,a[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,y),a.apply(h,R)}}return function(){return a.apply(h,arguments)}}function g(a,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function w(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function A(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(y,R,M){for(var B=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)B[ue-2]=arguments[ue];return h.prototype[R].apply(y,B)}}function N(a){const h=a.length;if(0<h){const m=Array(h);for(let y=0;y<h;y++)m[y]=a[y];return m}return[]}function I(a,h){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(u(y)){const R=a.length||0,M=y.length||0;a.length=R+M;for(let B=0;B<M;B++)a[R+B]=y[B]}else a.push(y)}}class x{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function F(a,h,m){for(const y in a)h.call(m,a[y],y,a)}function k(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function _(a){const h={};for(const m in a)h[m]=a[m];return h}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,h){let m,y;for(let R=1;R<arguments.length;R++){y=arguments[R];for(m in y)a[m]=y[m];for(let M=0;M<E.length;M++)m=E[M],Object.prototype.hasOwnProperty.call(y,m)&&(a[m]=y[m])}}function C(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function P(a){l.setTimeout(()=>{throw a},0)}function S(){var a=Q;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class Rt{constructor(){this.h=this.g=null}add(h,m){const y=br.get();y.set(h,m),this.h?this.h.next=y:this.g=y,this.h=y}}var br=new x(()=>new fi,a=>a.reset());class fi{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let an,z=!1,Q=new Rt,X=()=>{const a=l.Promise.resolve(void 0);an=()=>{a.then(ye)}};var ye=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(m){P(m)}var h=br;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}z=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var ln=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function un(a,h){if(ke.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(L){e:{try{D(h.nodeName);var R=!0;break e}catch{}R=!1}R||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:cn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&un.aa.h.call(this)}}A(un,ke);var cn={2:"touch",3:"pen",4:"mouse"};un.prototype.h=function(){un.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var dn="closure_listenable_"+(1e6*Math.random()|0),t1=0;function n1(a,h,m,y,R){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!y,this.ha=R,this.key=++t1,this.da=this.fa=!1}function aa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function la(a){this.src=a,this.g={},this.h=0}la.prototype.add=function(a,h,m,y,R){var M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);var B=Hu(a,h,y,R);return-1<B?(h=a[B],m||(h.fa=!1)):(h=new n1(h,this.src,M,!!y,R),h.fa=m,a.push(h)),h};function Wu(a,h){var m=h.type;if(m in a.g){var y=a.g[m],R=Array.prototype.indexOf.call(y,h,void 0),M;(M=0<=R)&&Array.prototype.splice.call(y,R,1),M&&(aa(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function Hu(a,h,m,y){for(var R=0;R<a.length;++R){var M=a[R];if(!M.da&&M.listener==h&&M.capture==!!m&&M.ha==y)return R}return-1}var qu="closure_lm_"+(1e6*Math.random()|0),Gu={};function Sm(a,h,m,y,R){if(Array.isArray(h)){for(var M=0;M<h.length;M++)Sm(a,h[M],m,y,R);return null}return m=Cm(m),a&&a[dn]?a.K(h,m,d(y)?!!y.capture:!1,R):r1(a,h,m,!1,y,R)}function r1(a,h,m,y,R,M){if(!h)throw Error("Invalid event type");var B=d(R)?!!R.capture:!!R,ue=Qu(a);if(ue||(a[qu]=ue=new la(a)),m=ue.add(h,m,y,B,M),m.proxy)return m;if(y=s1(),m.proxy=y,y.src=a,y.listener=m,a.addEventListener)ln||(R=B),R===void 0&&(R=!1),a.addEventListener(h.toString(),y,R);else if(a.attachEvent)a.attachEvent(Nm(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function s1(){function a(m){return h.call(a.src,a.listener,m)}const h=i1;return a}function Am(a,h,m,y,R){if(Array.isArray(h))for(var M=0;M<h.length;M++)Am(a,h[M],m,y,R);else y=d(y)?!!y.capture:!!y,m=Cm(m),a&&a[dn]?(a=a.i,h=String(h).toString(),h in a.g&&(M=a.g[h],m=Hu(M,m,y,R),-1<m&&(aa(M[m]),Array.prototype.splice.call(M,m,1),M.length==0&&(delete a.g[h],a.h--)))):a&&(a=Qu(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Hu(h,m,y,R)),(m=-1<a?h[a]:null)&&Ku(m))}function Ku(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[dn])Wu(h.i,a);else{var m=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(m,y,a.capture):h.detachEvent?h.detachEvent(Nm(m),y):h.addListener&&h.removeListener&&h.removeListener(y),(m=Qu(h))?(Wu(m,a),m.h==0&&(m.src=null,h[qu]=null)):aa(a)}}}function Nm(a){return a in Gu?Gu[a]:Gu[a]="on"+a}function i1(a,h){if(a.da)a=!0;else{h=new un(h,this);var m=a.listener,y=a.ha||a.src;a.fa&&Ku(a),a=m.call(y,h)}return a}function Qu(a){return a=a[qu],a instanceof la?a:null}var Ju="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cm(a){return typeof a=="function"?a:(a[Ju]||(a[Ju]=function(h){return a.handleEvent(h)}),a[Ju])}function Ge(){le.call(this),this.i=new la(this),this.M=this,this.F=null}A(Ge,le),Ge.prototype[dn]=!0,Ge.prototype.removeEventListener=function(a,h,m,y){Am(this,a,h,m,y)};function ot(a,h){var m,y=a.F;if(y)for(m=[];y;y=y.F)m.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new ke(h,a);else if(h instanceof ke)h.target=h.target||a;else{var R=h;h=new ke(y,a),b(h,R)}if(R=!0,m)for(var M=m.length-1;0<=M;M--){var B=h.g=m[M];R=ua(B,y,!0,h)&&R}if(B=h.g=a,R=ua(B,y,!0,h)&&R,R=ua(B,y,!1,h)&&R,m)for(M=0;M<m.length;M++)B=h.g=m[M],R=ua(B,y,!1,h)&&R}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],y=0;y<m.length;y++)aa(m[y]);delete a.g[h],a.h--}}this.F=null},Ge.prototype.K=function(a,h,m,y){return this.i.add(String(a),h,!1,m,y)},Ge.prototype.L=function(a,h,m,y){return this.i.add(String(a),h,!0,m,y)};function ua(a,h,m,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var R=!0,M=0;M<h.length;++M){var B=h[M];if(B&&!B.da&&B.capture==m){var ue=B.listener,Fe=B.ha||B.src;B.fa&&Wu(a.i,B),R=ue.call(Fe,y)!==!1&&R}}return R&&!y.defaultPrevented}function Rm(a,h,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Pm(a){a.g=Rm(()=>{a.g=null,a.i&&(a.i=!1,Pm(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class o1 extends le{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Pm(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mi(a){le.call(this),this.h=a,this.g={}}A(mi,le);var jm=[];function Dm(a){F(a.g,function(h,m){this.g.hasOwnProperty(m)&&Ku(h)},a),a.g={}}mi.prototype.N=function(){mi.aa.N.call(this),Dm(this)},mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yu=l.JSON.stringify,a1=l.JSON.parse,l1=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Xu(){}Xu.prototype.h=null;function Mm(a){return a.h||(a.h=a.i())}function Vm(){}var pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zu(){ke.call(this,"d")}A(Zu,ke);function ec(){ke.call(this,"c")}A(ec,ke);var Ir={},Lm=null;function ca(){return Lm=Lm||new Ge}Ir.La="serverreachability";function Om(a){ke.call(this,Ir.La,a)}A(Om,ke);function gi(a){const h=ca();ot(h,new Om(h))}Ir.STAT_EVENT="statevent";function Fm(a,h){ke.call(this,Ir.STAT_EVENT,a),this.stat=h}A(Fm,ke);function at(a){const h=ca();ot(h,new Fm(h,a))}Ir.Ma="timingevent";function Um(a,h){ke.call(this,Ir.Ma,a),this.size=h}A(Um,ke);function yi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function vi(){this.g=!0}vi.prototype.xa=function(){this.g=!1};function u1(a,h,m,y,R,M){a.info(function(){if(a.g)if(M)for(var B="",ue=M.split("&"),Fe=0;Fe<ue.length;Fe++){var se=ue[Fe].split("=");if(1<se.length){var Ke=se[0];se=se[1];var Qe=Ke.split("_");B=2<=Qe.length&&Qe[1]=="type"?B+(Ke+"="+se+"&"):B+(Ke+"=redacted&")}}else B=null;else B=M;return"XMLHTTP REQ ("+y+") [attempt "+R+"]: "+h+`
`+m+`
`+B})}function c1(a,h,m,y,R,M,B){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+R+"]: "+h+`
`+m+`
`+M+" "+B})}function ss(a,h,m,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+h1(a,m)+(y?" "+y:"")})}function d1(a,h){a.info(function(){return"TIMEOUT: "+h})}vi.prototype.info=function(){};function h1(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var y=m[a];if(!(2>y.length)){var R=y[1];if(Array.isArray(R)&&!(1>R.length)){var M=R[0];if(M!="noop"&&M!="stop"&&M!="close")for(var B=1;B<R.length;B++)R[B]=""}}}}return Yu(m)}catch{return h}}var da={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tc;function ha(){}A(ha,Xu),ha.prototype.g=function(){return new XMLHttpRequest},ha.prototype.i=function(){return{}},tc=new ha;function Ln(a,h,m,y){this.j=a,this.i=h,this.l=m,this.R=y||1,this.U=new mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zm}function zm(){this.i=null,this.g="",this.h=!1}var $m={},nc={};function rc(a,h,m){a.L=1,a.v=ga(hn(h)),a.m=m,a.P=!0,Wm(a,null)}function Wm(a,h){a.F=Date.now(),fa(a),a.A=hn(a.v);var m=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),sp(m.i,"t",y),a.C=0,m=a.j.J,a.h=new zm,a.g=Ep(a.j,m?h:null,!a.m),0<a.O&&(a.M=new o1(g(a.Y,a,a.g),a.O)),h=a.U,m=a.g,y=a.ca;var R="readystatechange";Array.isArray(R)||(R&&(jm[0]=R.toString()),R=jm);for(var M=0;M<R.length;M++){var B=Sm(m,R[M],y||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),gi(),u1(a.i,a.u,a.A,a.l,a.R,a.m)}Ln.prototype.ca=function(a){a=a.target;const h=this.M;h&&fn(a)==3?h.j():this.Y(a)},Ln.prototype.Y=function(a){try{if(a==this.g)e:{const Qe=fn(this.g);var h=this.g.Ba();const as=this.g.Z();if(!(3>Qe)&&(Qe!=3||this.g&&(this.h.h||this.g.oa()||dp(this.g)))){this.J||Qe!=4||h==7||(h==8||0>=as?gi(3):gi(2)),sc(this);var m=this.g.Z();this.X=m;t:if(Hm(this)){var y=dp(this.g);a="";var R=y.length,M=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sr(this),_i(this);var B="";break t}this.h.i=new l.TextDecoder}for(h=0;h<R;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(M&&h==R-1)});y.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,c1(this.i,this.u,this.A,this.l,this.R,Qe,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ue,Fe=this.g;if((ue=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ue)){var se=ue;break t}}se=null}if(m=se)ss(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ic(this,m);else{this.o=!1,this.s=3,at(12),Sr(this),_i(this);break e}}if(this.P){m=!0;let Ot;for(;!this.J&&this.C<B.length;)if(Ot=f1(this,B),Ot==nc){Qe==4&&(this.s=4,at(14),m=!1),ss(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==$m){this.s=4,at(15),ss(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else ss(this.i,this.l,Ot,null),ic(this,Ot);if(Hm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||B.length!=0||this.h.h||(this.s=1,at(16),m=!1),this.o=this.o&&m,!m)ss(this.i,this.l,B,"[Invalid Chunked Response]"),Sr(this),_i(this);else if(0<B.length&&!this.W){this.W=!0;var Ke=this.j;Ke.g==this&&Ke.ba&&!Ke.M&&(Ke.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),dc(Ke),Ke.M=!0,at(11))}}else ss(this.i,this.l,B,null),ic(this,B);Qe==4&&Sr(this),this.o&&!this.J&&(Qe==4?vp(this.j,this):(this.o=!1,fa(this)))}else C1(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Sr(this),_i(this)}}}catch{}finally{}};function Hm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function f1(a,h){var m=a.C,y=h.indexOf(`
`,m);return y==-1?nc:(m=Number(h.substring(m,y)),isNaN(m)?$m:(y+=1,y+m>h.length?nc:(h=h.slice(y,y+m),a.C=y+m,h)))}Ln.prototype.cancel=function(){this.J=!0,Sr(this)};function fa(a){a.S=Date.now()+a.I,qm(a,a.I)}function qm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=yi(g(a.ba,a),h)}function sc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Ln.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(d1(this.i,this.A),this.L!=2&&(gi(),at(17)),Sr(this),this.s=2,_i(this)):qm(this,this.S-a)};function _i(a){a.j.G==0||a.J||vp(a.j,a)}function Sr(a){sc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Dm(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function ic(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||oc(m.h,a))){if(!a.K&&oc(m.h,a)&&m.G==3){try{var y=m.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var R=y;if(R[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)Ea(m),xa(m);else break e;cc(m),at(18)}}else m.za=R[1],0<m.za-m.T&&37500>R[2]&&m.F&&m.v==0&&!m.C&&(m.C=yi(g(m.Za,m),6e3));if(1>=Qm(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Nr(m,11)}else if((a.K||m.g==a)&&Ea(m),!v(h))for(R=m.Da.g.parse(h),h=0;h<R.length;h++){let se=R[h];if(m.T=se[0],se=se[1],m.G==2)if(se[0]=="c"){m.K=se[1],m.ia=se[2];const Ke=se[3];Ke!=null&&(m.la=Ke,m.j.info("VER="+m.la));const Qe=se[4];Qe!=null&&(m.Aa=Qe,m.j.info("SVER="+m.Aa));const as=se[5];as!=null&&typeof as=="number"&&0<as&&(y=1.5*as,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const Ot=a.g;if(Ot){const ka=Ot.g?Ot.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var M=y.h;M.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(ac(M,M.h),M.h=null))}if(y.D){const hc=Ot.g?Ot.g.getResponseHeader("X-HTTP-Session-Id"):null;hc&&(y.ya=hc,de(y.I,y.D,hc))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var B=a;if(y.qa=wp(y,y.J?y.ia:null,y.W),B.K){Jm(y.h,B);var ue=B,Fe=y.L;Fe&&(ue.I=Fe),ue.B&&(sc(ue),fa(ue)),y.g=B}else gp(y);0<m.i.length&&wa(m)}else se[0]!="stop"&&se[0]!="close"||Nr(m,7);else m.G==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?Nr(m,7):uc(m):se[0]!="noop"&&m.l&&m.l.ta(se),m.v=0)}}gi(4)}catch{}}var m1=class{constructor(a,h){this.g=a,this.map=h}};function Gm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Km(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Qm(a){return a.h?1:a.g?a.g.size:0}function oc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ac(a,h){a.g?a.g.add(h):a.h=h}function Jm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Gm.prototype.cancel=function(){if(this.i=Ym(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ym(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return N(a.i)}function p1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],m=a.length,y=0;y<m;y++)h.push(a[y]);return h}h=[],m=0;for(y in a)h[m++]=a[y];return h}function g1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const y in a)h[m++]=y;return h}}}function Xm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=g1(a),y=p1(a),R=y.length,M=0;M<R;M++)h.call(void 0,y[M],m&&m[M],a)}var Zm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function y1(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var y=a[m].indexOf("="),R=null;if(0<=y){var M=a[m].substring(0,y);R=a[m].substring(y+1)}else M=a[m];h(M,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Ar(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ar){this.h=a.h,ma(this,a.j),this.o=a.o,this.g=a.g,pa(this,a.s),this.l=a.l;var h=a.i,m=new Ei;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),ep(this,m),this.m=a.m}else a&&(h=String(a).match(Zm))?(this.h=!1,ma(this,h[1]||"",!0),this.o=xi(h[2]||""),this.g=xi(h[3]||"",!0),pa(this,h[4]),this.l=xi(h[5]||"",!0),ep(this,h[6]||"",!0),this.m=xi(h[7]||"")):(this.h=!1,this.i=new Ei(null,this.h))}Ar.prototype.toString=function(){var a=[],h=this.j;h&&a.push(wi(h,tp,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(wi(h,tp,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(wi(m,m.charAt(0)=="/"?x1:_1,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",wi(m,E1)),a.join("")};function hn(a){return new Ar(a)}function ma(a,h,m){a.j=m?xi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function pa(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function ep(a,h,m){h instanceof Ei?(a.i=h,T1(a.i,a.h)):(m||(h=wi(h,w1)),a.i=new Ei(h,a.h))}function de(a,h,m){a.i.set(h,m)}function ga(a){return de(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function xi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function wi(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,v1),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function v1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var tp=/[#\/\?@]/g,_1=/[#\?:]/g,x1=/[#\?]/g,w1=/[#\?@]/g,E1=/#/g;function Ei(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function On(a){a.g||(a.g=new Map,a.h=0,a.i&&y1(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Ei.prototype,t.add=function(a,h){On(this),this.i=null,a=is(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function np(a,h){On(a),h=is(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function rp(a,h){return On(a),h=is(a,h),a.g.has(h)}t.forEach=function(a,h){On(this),this.g.forEach(function(m,y){m.forEach(function(R){a.call(h,R,y,this)},this)},this)},t.na=function(){On(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let y=0;y<h.length;y++){const R=a[y];for(let M=0;M<R.length;M++)m.push(h[y])}return m},t.V=function(a){On(this);let h=[];if(typeof a=="string")rp(this,a)&&(h=h.concat(this.g.get(is(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return On(this),this.i=null,a=is(this,a),rp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function sp(a,h,m){np(a,h),0<m.length&&(a.i=null,a.g.set(is(a,h),N(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var y=h[m];const M=encodeURIComponent(String(y)),B=this.V(y);for(y=0;y<B.length;y++){var R=M;B[y]!==""&&(R+="="+encodeURIComponent(String(B[y]))),a.push(R)}}return this.i=a.join("&")};function is(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function T1(a,h){h&&!a.j&&(On(a),a.i=null,a.g.forEach(function(m,y){var R=y.toLowerCase();y!=R&&(np(this,y),sp(this,R,m))},a)),a.j=h}function k1(a,h){const m=new vi;if(l.Image){const y=new Image;y.onload=w(Fn,m,"TestLoadImage: loaded",!0,h,y),y.onerror=w(Fn,m,"TestLoadImage: error",!1,h,y),y.onabort=w(Fn,m,"TestLoadImage: abort",!1,h,y),y.ontimeout=w(Fn,m,"TestLoadImage: timeout",!1,h,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function b1(a,h){const m=new vi,y=new AbortController,R=setTimeout(()=>{y.abort(),Fn(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(M=>{clearTimeout(R),M.ok?Fn(m,"TestPingServer: ok",!0,h):Fn(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(R),Fn(m,"TestPingServer: error",!1,h)})}function Fn(a,h,m,y,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),y(m)}catch{}}function I1(){this.g=new l1}function S1(a,h,m){const y=m||"";try{Xm(a,function(R,M){let B=R;d(R)&&(B=Yu(R)),h.push(y+M+"="+encodeURIComponent(B))})}catch(R){throw h.push(y+"type="+encodeURIComponent("_badmap")),R}}function ya(a){this.l=a.Ub||null,this.j=a.eb||!1}A(ya,Xu),ya.prototype.g=function(){return new va(this.l,this.j)},ya.prototype.i=function(a){return function(){return a}}({});function va(a,h){Ge.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(va,Ge),t=va.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,ki(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ki(this)),this.g&&(this.readyState=3,ki(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ip(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ip(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ti(this):ki(this),this.readyState==3&&ip(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ti(this))},t.Qa=function(a){this.g&&(this.response=a,Ti(this))},t.ga=function(){this.g&&Ti(this)};function Ti(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ki(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function ki(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function op(a){let h="";return F(a,function(m,y){h+=y,h+=":",h+=m,h+=`\r
`}),h}function lc(a,h,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=op(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):de(a,h,m))}function Ee(a){Ge.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ee,Ge);var A1=/^https?$/i,N1=["POST","PUT"];t=Ee.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tc.g(),this.v=this.o?Mm(this.o):Mm(tc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(M){ap(this,M);return}if(a=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var R in y)m.set(R,y[R]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())m.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),R=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(N1,h,void 0))||y||R||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,B]of m)this.g.setRequestHeader(M,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cp(this),this.u=!0,this.g.send(a),this.u=!1}catch(M){ap(this,M)}};function ap(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,lp(a),_a(a)}function lp(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ot(this,"complete"),ot(this,"abort"),_a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),Ee.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?up(this):this.bb())},t.bb=function(){up(this)};function up(a){if(a.h&&typeof o<"u"&&(!a.v[1]||fn(a)!=4||a.Z()!=2)){if(a.u&&fn(a)==4)Rm(a.Ea,0,a);else if(ot(a,"readystatechange"),fn(a)==4){a.h=!1;try{const B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var y;if(y=B===0){var R=String(a.D).match(Zm)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),y=!A1.test(R?R.toLowerCase():"")}m=y}if(m)ot(a,"complete"),ot(a,"success");else{a.m=6;try{var M=2<fn(a)?a.g.statusText:""}catch{M=""}a.l=M+" ["+a.Z()+"]",lp(a)}}finally{_a(a)}}}}function _a(a,h){if(a.g){cp(a);const m=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ot(a,"ready");try{m.onreadystatechange=y}catch{}}}function cp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function fn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),a1(h)}};function dp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function C1(a){const h={};a=(a.g&&2<=fn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(v(a[y]))continue;var m=C(a[y]);const R=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const M=h[R]||[];h[R]=M,M.push(m)}k(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function hp(a){this.Aa=0,this.i=[],this.j=new vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,a),this.cb=bi("retryDelaySeedMs",1e4,a),this.Wa=bi("forwardChannelMaxRetries",2,a),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Gm(a&&a.concurrentRequestLimit),this.Da=new I1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hp.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,y){at(0),this.W=a,this.H=h||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=wp(this,null,this.W),wa(this)};function uc(a){if(fp(a),a.G==3){var h=a.U++,m=hn(a.I);if(de(m,"SID",a.K),de(m,"RID",h),de(m,"TYPE","terminate"),Ii(a,m),h=new Ln(a,a.j,h),h.L=2,h.v=ga(hn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=Ep(h.j,null),h.g.ea(h.v)),h.F=Date.now(),fa(h)}xp(a)}function xa(a){a.g&&(dc(a),a.g.cancel(),a.g=null)}function fp(a){xa(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ea(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function wa(a){if(!Km(a.h)&&!a.s){a.s=!0;var h=a.Ga;an||X(),z||(an(),z=!0),Q.add(h,a),a.B=0}}function R1(a,h){return Qm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=yi(g(a.Ga,a,h),_p(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const R=new Ln(this,this.j,a);let M=this.o;if(this.S&&(M?(M=_(M),b(M,this.S)):M=this.S),this.m!==null||this.O||(R.H=M,M=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=pp(this,R,h),m=hn(this.I),de(m,"RID",a),de(m,"CVER",22),this.D&&de(m,"X-HTTP-Session-Id",this.D),Ii(this,m),M&&(this.O?h="headers="+encodeURIComponent(String(op(M)))+"&"+h:this.m&&lc(m,this.m,M)),ac(this.h,R),this.Ua&&de(m,"TYPE","init"),this.P?(de(m,"$req",h),de(m,"SID","null"),R.T=!0,rc(R,m,null)):rc(R,m,h),this.G=2}}else this.G==3&&(a?mp(this,a):this.i.length==0||Km(this.h)||mp(this))};function mp(a,h){var m;h?m=h.l:m=a.U++;const y=hn(a.I);de(y,"SID",a.K),de(y,"RID",m),de(y,"AID",a.T),Ii(a,y),a.m&&a.o&&lc(y,a.m,a.o),m=new Ln(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=pp(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ac(a.h,m),rc(m,y,h)}function Ii(a,h){a.H&&F(a.H,function(m,y){de(h,y,m)}),a.l&&Xm({},function(m,y){de(h,y,m)})}function pp(a,h,m){m=Math.min(a.i.length,m);var y=a.l?g(a.l.Na,a.l,a):null;e:{var R=a.i;let M=-1;for(;;){const B=["count="+m];M==-1?0<m?(M=R[0].g,B.push("ofs="+M)):M=0:B.push("ofs="+M);let ue=!0;for(let Fe=0;Fe<m;Fe++){let se=R[Fe].g;const Ke=R[Fe].map;if(se-=M,0>se)M=Math.max(0,R[Fe].g-100),ue=!1;else try{S1(Ke,B,"req"+se+"_")}catch{y&&y(Ke)}}if(ue){y=B.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,y}function gp(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;an||X(),z||(an(),z=!0),Q.add(h,a),a.v=0}}function cc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=yi(g(a.Fa,a),_p(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,yp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=yi(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),xa(this),yp(this))};function dc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function yp(a){a.g=new Ln(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=hn(a.qa);de(h,"RID","rpc"),de(h,"SID",a.K),de(h,"AID",a.T),de(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&de(h,"TO",a.ja),de(h,"TYPE","xmlhttp"),Ii(a,h),a.m&&a.o&&lc(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=ga(hn(h)),m.m=null,m.P=!0,Wm(m,a)}t.Za=function(){this.C!=null&&(this.C=null,xa(this),cc(this),at(19))};function Ea(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function vp(a,h){var m=null;if(a.g==h){Ea(a),dc(a),a.g=null;var y=2}else if(oc(a.h,h))m=h.D,Jm(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var R=a.B;y=ca(),ot(y,new Um(y,m)),wa(a)}else gp(a);else if(R=h.s,R==3||R==0&&0<h.X||!(y==1&&R1(a,h)||y==2&&cc(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),R){case 1:Nr(a,5);break;case 4:Nr(a,10);break;case 3:Nr(a,6);break;default:Nr(a,2)}}}function _p(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function Nr(a,h){if(a.j.info("Error code "+h),h==2){var m=g(a.fb,a),y=a.Xa;const R=!y;y=new Ar(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ma(y,"https"),ga(y),R?k1(y.toString(),m):b1(y.toString(),m)}else at(2);a.G=0,a.l&&a.l.sa(h),xp(a),fp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function xp(a){if(a.G=0,a.ka=[],a.l){const h=Ym(a.h);(h.length!=0||a.i.length!=0)&&(I(a.ka,h),I(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function wp(a,h,m){var y=m instanceof Ar?hn(m):new Ar(m);if(y.g!="")h&&(y.g=h+"."+y.g),pa(y,y.s);else{var R=l.location;y=R.protocol,h=h?h+"."+R.hostname:R.hostname,R=+R.port;var M=new Ar(null);y&&ma(M,y),h&&(M.g=h),R&&pa(M,R),m&&(M.l=m),y=M}return m=a.D,h=a.ya,m&&h&&de(y,m,h),de(y,"VER",a.la),Ii(a,y),y}function Ep(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ee(new ya({eb:m})):new Ee(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tp(){}t=Tp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ta(){}Ta.prototype.g=function(a,h){return new Et(a,h)};function Et(a,h){Ge.call(this),this.g=new hp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!v(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new os(this)}A(Et,Ge),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){uc(this.g)},Et.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=Yu(a),a=m);h.i.push(new m1(h.Ya++,a)),h.G==3&&wa(h)},Et.prototype.N=function(){this.g.l=null,delete this.j,uc(this.g),delete this.g,Et.aa.N.call(this)};function kp(a){Zu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}A(kp,Zu);function bp(){ec.call(this),this.status=1}A(bp,ec);function os(a){this.g=a}A(os,Tp),os.prototype.ua=function(){ot(this.g,"a")},os.prototype.ta=function(a){ot(this.g,new kp(a))},os.prototype.sa=function(a){ot(this.g,new bp)},os.prototype.ra=function(){ot(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,bx=function(){return new Ta},kx=function(){return ca()},Tx=Ir,ih={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},da.NO_ERROR=0,da.TIMEOUT=8,da.HTTP_ERROR=6,cl=da,Bm.COMPLETE="complete",Ex=Bm,Vm.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,zi=Vm,Ee.prototype.listenOnce=Ee.prototype.L,Ee.prototype.getLastError=Ee.prototype.Ka,Ee.prototype.getLastErrorCode=Ee.prototype.Ba,Ee.prototype.getStatus=Ee.prototype.Z,Ee.prototype.getResponseJson=Ee.prototype.Oa,Ee.prototype.getResponseText=Ee.prototype.oa,Ee.prototype.send=Ee.prototype.ea,Ee.prototype.setWithCredentials=Ee.prototype.Ha,wx=Ee}).apply(typeof $a<"u"?$a:typeof self<"u"?self:typeof window<"u"?window:{});const y0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ze.UNAUTHENTICATED=new Ze(null),Ze.GOOGLE_CREDENTIALS=new Ze("google-credentials-uid"),Ze.FIRST_PARTY=new Ze("first-party-uid"),Ze.MOCK_USER=new Ze("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ai="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new wf("@firebase/firestore");function Mi(){return Qr.logLevel}function H(t,...e){if(Qr.logLevel<=te.DEBUG){const n=e.map(Mf);Qr.debug(`Firestore (${ai}): ${t}`,...n)}}function Rn(t,...e){if(Qr.logLevel<=te.ERROR){const n=e.map(Mf);Qr.error(`Firestore (${ai}): ${t}`,...n)}}function $s(t,...e){if(Qr.logLevel<=te.WARN){const n=e.map(Mf);Qr.warn(`Firestore (${ai}): ${t}`,...n)}}function Mf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t="Unexpected state"){const e=`FIRESTORE (${ai}) INTERNAL ASSERTION FAILED: `+t;throw Rn(e),new Error(e)}function ae(t,e){t||K()}function Y(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ze.UNAUTHENTICATED))}shutdown(){}}class HS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qS{constructor(e){this.t=e,this.currentUser=Ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string"),new Ix(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string"),new Ze(e)}}class GS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class KS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new GS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ae(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string"),this.R=n.token,new QS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=YS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function Ws(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ne(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Ne(0,0))}static max(){return new J(new Ne(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(),r===void 0?r=e.length-n:r>e.length-n&&K(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Co.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Co?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class fe extends Co{construct(e,n,r){return new fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new fe(n)}static emptyPath(){return new fe([])}}const XS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ze extends Co{construct(e,n,r){return new ze(e,n,r)}static isValidIdentifier(e){return XS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new $(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new $(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ze(n)}static emptyPath(){return new ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(fe.fromString(e))}static fromName(e){return new q(fe.fromString(e).popFirst(5))}static empty(){return new q(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new fe(e.slice()))}}function ZS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new Ne(n+1,0):new Ne(n,r));return new pr(s,q.empty(),e)}function eA(t){return new pr(t.readTime,t.key,-1)}class pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pr(J.min(),q.empty(),-1)}static max(){return new pr(J.max(),q.empty(),-1)}}function tA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==nA)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function sA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vf.oe=-1;function bu(t){return t==null}function Ql(t){return t===0&&1/t==-1/0}function iA(t){return typeof t=="number"&&Number.isInteger(t)&&!Ql(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ts(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ax(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n){this.comparator=e,this.root=n||Be.EMPTY}insert(e,n){return new we(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(e){return new we(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Be.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wa(this.root,e,this.comparator,!0)}}class Wa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Be{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Be.RED,this.left=s??Be.EMPTY,this.right=i??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Be(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Be.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();const e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Be(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _0(this.data.getIterator())}getIteratorFrom(e){return new _0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof We)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new We(this.comparator);return n.data=e,n}}class _0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.fields=e,e.sort(ze.comparator)}static empty(){return new It([])}unionWith(e){let n=new We(ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new It(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ws(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Nx("Invalid base64 string: "+i):i}}(e);return new qe(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new qe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qe.EMPTY_BYTE_STRING=new qe("");const oA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(t){if(ae(!!t),typeof t=="string"){let e=0;const n=oA.exec(t);if(ae(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jr(t){return typeof t=="string"?qe.fromBase64String(t):qe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Of(t){const e=t.mapValue.fields.__previous_value__;return Lf(e)?Of(e):e}function Ro(t){const e=gr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ne(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Po{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Po("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha={mapValue:{}};function Yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lf(t)?4:uA(t)?9007199254740991:lA(t)?10:11:K()}function sn(t,e){if(t===e)return!0;const n=Yr(t);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ro(t).isEqual(Ro(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=gr(s.timestampValue),l=gr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Jr(s.bytesValue).isEqual(Jr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return be(s.geoPointValue.latitude)===be(i.geoPointValue.latitude)&&be(s.geoPointValue.longitude)===be(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return be(s.integerValue)===be(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=be(s.doubleValue),l=be(i.doubleValue);return o===l?Ql(o)===Ql(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ws(t.arrayValue.values||[],e.arrayValue.values||[],sn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(v0(o)!==v0(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!sn(o[u],l[u])))return!1;return!0}(t,e);default:return K()}}function jo(t,e){return(t.values||[]).find(n=>sn(n,e))!==void 0}function Hs(t,e){if(t===e)return 0;const n=Yr(t),r=Yr(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=be(i.integerValue||i.doubleValue),u=be(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return x0(t.timestampValue,e.timestampValue);case 4:return x0(Ro(t),Ro(e));case 5:return ie(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Jr(i),u=Jr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=ie(l[d],u[d]);if(f!==0)return f}return ie(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ie(be(i.latitude),be(o.latitude));return l!==0?l:ie(be(i.longitude),be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return w0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,f;const p=i.fields||{},g=o.fields||{},w=(l=p.value)===null||l===void 0?void 0:l.arrayValue,A=(u=g.value)===null||u===void 0?void 0:u.arrayValue,N=ie(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=A==null?void 0:A.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:w0(w,A)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ha.mapValue&&o===Ha.mapValue)return 0;if(i===Ha.mapValue)return 1;if(o===Ha.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=ie(u[p],f[p]);if(g!==0)return g;const w=Hs(l[u[p]],d[f[p]]);if(w!==0)return w}return ie(u.length,f.length)}(t.mapValue,e.mapValue);default:throw K()}}function x0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=gr(t),r=gr(e),s=ie(n.seconds,r.seconds);return s!==0?s:ie(n.nanos,r.nanos)}function w0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Hs(n[s],r[s]);if(i)return i}return ie(n.length,r.length)}function qs(t){return oh(t)}function oh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=oh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${oh(n.fields[o])}`;return s+"}"}(t.mapValue):K()}function E0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ah(t){return!!t&&"integerValue"in t}function Ff(t){return!!t&&"arrayValue"in t}function T0(t){return!!t&&"nullValue"in t}function k0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dl(t){return!!t&&"mapValue"in t}function lA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function no(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ts(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=no(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=no(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.value=e}static empty(){return new ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=no(n)}setAll(e){let n=ze.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=no(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());dl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];dl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ts(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ft(no(this.value))}}function Cx(t){const e=[];return ts(t.fields,(n,r)=>{const s=new ze([n]);if(dl(r)){const i=Cx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new It(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new tt(e,0,J.min(),J.min(),J.min(),ft.empty(),0)}static newFoundDocument(e,n,r,s){return new tt(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new tt(e,2,n,J.min(),J.min(),ft.empty(),0)}static newUnknownDocument(e,n){return new tt(e,3,n,J.min(),J.min(),ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.position=e,this.inclusive=n}}function b0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=Hs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function I0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n="asc"){this.field=e,this.dir=n}}function cA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{}class Pe extends Rx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hA(e,n,r):n==="array-contains"?new pA(e,r):n==="in"?new gA(e,r):n==="not-in"?new yA(e,r):n==="array-contains-any"?new vA(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fA(e,r):new mA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Hs(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(Hs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kt extends Rx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Kt(e,n)}matches(e){return Px(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Px(t){return t.op==="and"}function jx(t){return dA(t)&&Px(t)}function dA(t){for(const e of t.filters)if(e instanceof Kt)return!1;return!0}function lh(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+qs(t.value);if(jx(t))return t.filters.map(e=>lh(e)).join(",");{const e=t.filters.map(n=>lh(n)).join(",");return`${t.op}(${e})`}}function Dx(t,e){return t instanceof Pe?function(r,s){return s instanceof Pe&&r.op===s.op&&r.field.isEqual(s.field)&&sn(r.value,s.value)}(t,e):t instanceof Kt?function(r,s){return s instanceof Kt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Dx(o,s.filters[l]),!0):!1}(t,e):void K()}function Mx(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${qs(n.value)}`}(t):t instanceof Kt?function(n){return n.op.toString()+" {"+n.getFilters().map(Mx).join(" ,")+"}"}(t):"Filter"}class hA extends Pe{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class fA extends Pe{constructor(e,n){super(e,"in",n),this.keys=Vx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mA extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=Vx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Vx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class pA extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ff(n)&&jo(n.arrayValue,this.value)}}class gA extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jo(this.value.arrayValue,n)}}class yA extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!jo(this.value.arrayValue,n)}}class vA extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ff(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>jo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function S0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _A(t,e,n,r,s,i,o)}function Uf(t){const e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),bu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qs(r)).join(",")),e.ue=n}return e.ue}function Bf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Dx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!I0(t.startAt,e.startAt)&&I0(t.endAt,e.endAt)}function uh(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function xA(t,e,n,r,s,i,o,l){return new li(t,e,n,r,s,i,o,l)}function Iu(t){return new li(t)}function A0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lx(t){return t.collectionGroup!==null}function ro(t){const e=Y(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new We(ze.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Do(i,r))}),n.has(ze.keyField().canonicalString())||e.ce.push(new Do(ze.keyField(),r))}return e.ce}function tn(t){const e=Y(t);return e.le||(e.le=wA(e,ro(t))),e.le}function wA(t,e){if(t.limitType==="F")return S0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Do(s.field,i)});const n=t.endAt?new Jl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jl(t.startAt.position,t.startAt.inclusive):null;return S0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ch(t,e){const n=t.filters.concat([e]);return new li(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dh(t,e,n){return new li(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Su(t,e){return Bf(tn(t),tn(e))&&t.limitType===e.limitType}function Ox(t){return`${Uf(tn(t))}|lt:${t.limitType}`}function us(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Mx(s)).join(", ")}]`),bu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>qs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>qs(s)).join(",")),`Target(${r})`}(tn(t))}; limitType=${t.limitType})`}function Au(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ro(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=b0(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,ro(r),s)||r.endAt&&!function(o,l,u){const d=b0(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,ro(r),s))}(t,e)}function EA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Fx(t){return(e,n)=>{let r=!1;for(const s of ro(t)){const i=TA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function TA(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Hs(u,d):K()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Ax(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new we(q.comparator);function Pn(){return kA}const Ux=new we(q.comparator);function $i(...t){let e=Ux;for(const n of t)e=e.insert(n.key,n);return e}function Bx(t){let e=Ux;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Lr(){return so()}function zx(){return so()}function so(){return new ui(t=>t.toString(),(t,e)=>t.isEqual(e))}const bA=new we(q.comparator),IA=new We(q.comparator);function ee(...t){let e=IA;for(const n of t)e=e.add(n);return e}const SA=new We(ie);function AA(){return SA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ql(e)?"-0":e}}function $x(t){return{integerValue:""+t}}function Wx(t,e){return iA(e)?$x(e):zf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(){this._=void 0}}function NA(t,e,n){return t instanceof Mo?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Lf(i)&&(i=Of(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Gs?qx(t,e):t instanceof Vo?Gx(t,e):function(s,i){const o=Hx(s,i),l=N0(o)+N0(s.Pe);return ah(o)&&ah(s.Pe)?$x(l):zf(s.serializer,l)}(t,e)}function CA(t,e,n){return t instanceof Gs?qx(t,e):t instanceof Vo?Gx(t,e):n}function Hx(t,e){return t instanceof Lo?function(r){return ah(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Mo extends Nu{}class Gs extends Nu{constructor(e){super(),this.elements=e}}function qx(t,e){const n=Kx(e);for(const r of t.elements)n.some(s=>sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Vo extends Nu{constructor(e){super(),this.elements=e}}function Gx(t,e){let n=Kx(e);for(const r of t.elements)n=n.filter(s=>!sn(s,r));return{arrayValue:{values:n}}}class Lo extends Nu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function N0(t){return be(t.integerValue||t.doubleValue)}function Kx(t){return Ff(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n){this.field=e,this.transform=n}}function RA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Gs&&s instanceof Gs||r instanceof Vo&&s instanceof Vo?Ws(r.elements,s.elements,sn):r instanceof Lo&&s instanceof Lo?sn(r.Pe,s.Pe):r instanceof Mo&&s instanceof Mo}(t.transform,e.transform)}class PA{constructor(e,n){this.version=e,this.transformResults=n}}class vt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vt}static exists(e){return new vt(void 0,e)}static updateTime(e){return new vt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cu{}function Qx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wf(t.key,vt.none()):new Xo(t.key,t.data,vt.none());{const n=t.data,r=ft.empty();let s=new We(ze.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Tr(t.key,r,new It(s.toArray()),vt.none())}}function jA(t,e,n){t instanceof Xo?function(s,i,o){const l=s.value.clone(),u=R0(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Tr?function(s,i,o){if(!hl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=R0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Jx(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function io(t,e,n,r){return t instanceof Xo?function(i,o,l,u){if(!hl(i.precondition,o))return l;const d=i.value.clone(),f=P0(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Tr?function(i,o,l,u){if(!hl(i.precondition,o))return l;const d=P0(i.fieldTransforms,u,o),f=o.data;return f.setAll(Jx(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return hl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function DA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Hx(r.transform,s||null);i!=null&&(n===null&&(n=ft.empty()),n.set(r.field,i))}return n||null}function C0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ws(r,s,(i,o)=>RA(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xo extends Cu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Tr extends Cu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Jx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function R0(t,e,n){const r=new Map;ae(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,CA(o,l,n[s]))}return r}function P0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,NA(i,o,e))}return r}class Wf extends Cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MA extends Cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&jA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=io(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=io(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zx();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Qx(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&Ws(this.mutations,e.mutations,(n,r)=>C0(n,r))&&Ws(this.baseMutations,e.baseMutations,(n,r)=>C0(n,r))}}class Hf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ae(e.mutations.length===r.length);let s=function(){return bA}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Hf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce,ne;function FA(t){switch(t){default:return K();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function Yx(t){if(t===void 0)return Rn("GRPC error has no .code"),V.UNKNOWN;switch(t){case Ce.OK:return V.OK;case Ce.CANCELLED:return V.CANCELLED;case Ce.UNKNOWN:return V.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return V.INTERNAL;case Ce.UNAVAILABLE:return V.UNAVAILABLE;case Ce.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Ce.NOT_FOUND:return V.NOT_FOUND;case Ce.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Ce.ABORTED:return V.ABORTED;case Ce.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Ce.DATA_LOSS:return V.DATA_LOSS;default:return K()}}(ne=Ce||(Ce={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=new Br([4294967295,4294967295],0);function j0(t){const e=UA().encode(t),n=new xx;return n.update(e),new Uint8Array(n.digest())}function D0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Br([n,r],0),new Br([s,i],0)]}class qf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wi(`Invalid padding: ${n}`);if(r<0)throw new Wi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Br.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Br.fromNumber(r)));return s.compare(BA)===1&&(s=new Br([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=j0(e),[r,s]=D0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new qf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=j0(e),[r,s]=D0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Zo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ru(J.min(),s,new we(ie),Pn(),ee())}}class Zo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zo(r,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Xx{constructor(e,n){this.targetId=e,this.me=n}}class Zx{constructor(e,n,r=qe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class M0{constructor(){this.fe=0,this.ge=L0(),this.pe=qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ee(),n=ee(),r=ee();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:K()}}),new Zo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=L0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class zA{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pn(),this.qe=V0(),this.Qe=new we(ie)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(uh(i))if(r===0){const o=new q(i.path);this.Ue(n,o,tt.newNoDocument(o,J.min()))}else ae(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Jr(r).toUint8Array()}catch(u){if(u instanceof Nx)return $s("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new qf(o,s,i)}catch(u){return $s(u instanceof Wi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&uh(l.target)){const u=new q(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,tt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ee();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Ru(e,n,this.Qe,this.ke,r);return this.ke=Pn(),this.qe=V0(),this.Qe=new we(ie),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new M0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new We(ie),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new M0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function V0(){return new we(q.comparator)}function L0(){return new we(q.comparator)}const $A={asc:"ASCENDING",desc:"DESCENDING"},WA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HA={and:"AND",or:"OR"};class qA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hh(t,e){return t.useProto3Json||bu(e)?e:{value:e}}function Yl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ew(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function GA(t,e){return Yl(t,e.toTimestamp())}function nn(t){return ae(!!t),J.fromTimestamp(function(n){const r=gr(n);return new Ne(r.seconds,r.nanos)}(t))}function Gf(t,e){return fh(t,e).canonicalString()}function fh(t,e){const n=function(s){return new fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tw(t){const e=fe.fromString(t);return ae(ow(e)),e}function mh(t,e){return Gf(t.databaseId,e.path)}function Gc(t,e){const n=tw(e);if(n.get(1)!==t.databaseId.projectId)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(rw(n))}function nw(t,e){return Gf(t.databaseId,e)}function KA(t){const e=tw(t);return e.length===4?fe.emptyPath():rw(e)}function ph(t){return new fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rw(t){return ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function O0(t,e,n){return{name:mh(t,e),fields:n.value.mapValue.fields}}function QA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ae(f===void 0||typeof f=="string"),qe.fromBase64String(f||"")):(ae(f===void 0||f instanceof Buffer||f instanceof Uint8Array),qe.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?V.UNKNOWN:Yx(d.code);return new $(f,d.message||"")}(o);n=new Zx(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gc(t,r.document.name),i=nn(r.document.updateTime),o=r.document.createTime?nn(r.document.createTime):J.min(),l=new ft({mapValue:{fields:r.document.fields}}),u=tt.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new fl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gc(t,r.document),i=r.readTime?nn(r.readTime):J.min(),o=tt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new fl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gc(t,r.document),i=r.removedTargetIds||[];n=new fl([],i,s,null)}else{if(!("filter"in e))return K();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new OA(s,i),l=r.targetId;n=new Xx(l,o)}}return n}function JA(t,e){let n;if(e instanceof Xo)n={update:O0(t,e.key,e.value)};else if(e instanceof Wf)n={delete:mh(t,e.key)};else if(e instanceof Tr)n={update:O0(t,e.key,e.data),updateMask:iN(e.fieldMask)};else{if(!(e instanceof MA))return K();n={verify:mh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Mo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Gs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Vo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Lo)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw K()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:GA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:K()}(t,e.precondition)),n}function YA(t,e){return t&&t.length>0?(ae(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?nn(s.updateTime):nn(i);return o.isEqual(J.min())&&(o=nn(i)),new PA(o,s.transformResults||[])}(n,e))):[]}function XA(t,e){return{documents:[nw(t,e.path)]}}function ZA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nw(t,s);const i=function(d){if(d.length!==0)return iw(Kt.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:cs(g.field),direction:nN(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=hh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function eN(t){let e=KA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ae(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=sw(p);return g instanceof Kt&&jx(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(A){return new Do(ds(A.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,bu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,w=p.values||[];return new Jl(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,w=p.values||[];return new Jl(w,g)}(n.endAt)),xA(e,s,o,i,l,"F",u,d)}function tN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ds(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ds(n.unaryFilter.field);return Pe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ds(n.unaryFilter.field);return Pe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ds(n.unaryFilter.field);return Pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(ds(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kt.create(n.compositeFilter.filters.map(r=>sw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(t):K()}function nN(t){return $A[t]}function rN(t){return WA[t]}function sN(t){return HA[t]}function cs(t){return{fieldPath:t.canonicalString()}}function ds(t){return ze.fromServerFormat(t.fieldPath)}function iw(t){return t instanceof Pe?function(n){if(n.op==="=="){if(k0(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NAN"}};if(T0(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(k0(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NAN"}};if(T0(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cs(n.field),op:rN(n.op),value:n.value}}}(t):t instanceof Kt?function(n){const r=n.getFilters().map(s=>iw(s));return r.length===1?r[0]:{compositeFilter:{op:sN(n.op),filters:r}}}(t):K()}function iN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ow(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,r,s,i=J.min(),o=J.min(),l=qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Zn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.ct=e}}function aN(t){const e=eN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(){this.un=new uN}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(pr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class uN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new We(fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new We(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ks(0)}static kn(){return new Ks(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(){this.changes=new ui(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&io(r.mutation,s,It.empty(),Ne.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){const s=Lr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=$i();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Lr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Pn();const o=so(),l=function(){return so()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Tr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),io(f.mutation,d,f.mutation.getFieldMask(),Ne.now())):o.set(d.key,It.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new dN(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=so();let s=new we((o,l)=>o-l),i=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||It.empty();f=l.applyToLocalView(d,f),r.set(u,f);const p=(s.get(l.batchId)||ee()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,p=zx();f.forEach(g=>{if(!i.has(g)){const w=Qx(n.get(g),r.get(g));w!==null&&p.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Lx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(Lr());let l=-1,u=i;return o.next(d=>O.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ee())).next(f=>({batchId:l,changes:Bx(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let s=$i();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=$i();return this.indexManager.getCollectionParents(e,i).next(l=>O.forEach(l,u=>{const d=function(p,g){return new li(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,tt.newInvalidDocument(f)))});let l=$i();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&io(f.mutation,d,It.empty(),Ne.now()),Au(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:nn(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:aN(s.bundledQuery),readTime:nn(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(){this.overlays=new we(q.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Lr();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=Lr(),i=n.length+1,o=new q(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new we((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Lr(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Lr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return O.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new LA(n,r));let i=this.Ir.get(n);i===void 0&&(i=ee(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(){this.Tr=new We(Ve.Er),this.dr=new We(Ve.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ve(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ve(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new q(new fe([])),r=new Ve(n,e),s=new Ve(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new q(new fe([])),r=new Ve(n,e),s=new Ve(n,e+1);let i=ee();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ve(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ve{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||ie(e.wr,n.wr)}static Ar(e,n){return ie(e.wr,n.wr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new We(Ve.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new VA(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Ve(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ve(n,0),s=new Ve(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new We(ie);return n.forEach(s=>{const i=new Ve(s,0),o=new Ve(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;q.isDocumentKey(i)||(i=i.child(""));const o=new Ve(new q(i),0);let l=new We(ie);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),O.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ae(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,s=>{const i=new Ve(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ve(n,0),s=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.Mr=e,this.docs=function(){return new we(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(n))}getEntries(e,n){let r=Pn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():tt.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Pn();const o=n.path,l=new q(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||tA(eA(f),r)<=0||(s.has(f.key)||Au(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){K()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vN(this)}getSize(e){return O.resolve(this.size)}}class vN extends cN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.persistence=e,this.Nr=new ui(n=>Uf(n),Bf),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Kf,this.targetCount=0,this.kr=Ks.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ks(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Vf(0),this.Kr=!1,this.Kr=!0,this.$r=new pN,this.referenceDelegate=e(this),this.Ur=new _N(this),this.indexManager=new lN,this.remoteDocumentCache=function(s){return new yN(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new oN(n),this.Gr=new fN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new gN(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new wN(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class wN extends rA{constructor(e){super(),this.currentSequenceNumber=e}}class Qf{constructor(e){this.persistence=e,this.Jr=new Kf,this.Yr=null}static Zr(e){return new Qf(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const s=q.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ee(),s=ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Jf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return S2()?8:sA(it())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new EN;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Mi()<=te.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",us(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Mi()<=te.DEBUG&&H("QueryEngine","Query:",us(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Mi()<=te.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",us(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(n))):O.resolve())}Yi(e,n){if(A0(n))return O.resolve(null);let r=tn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=dh(n,null,"F"),r=tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ee(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,dh(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return A0(n)||s.isEqual(J.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?O.resolve(null):(Mi()<=te.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),us(n)),this.rs(e,o,n,ZS(s,-1)).next(l=>l))})}ts(e,n){let r=new We(Fx(e));return n.forEach((s,i)=>{Au(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Mi()<=te.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",us(n)),this.Ji.getDocumentsMatchingQuery(e,n,pr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new we(ie),this._s=new ui(i=>Uf(i),Bf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function bN(t,e,n,r){return new kN(t,e,n,r)}async function aw(t,e){const n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ee();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function IN(t,e){const n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const p=d.batch,g=p.keys();let w=O.resolve();return g.forEach(A=>{w=w.next(()=>f.getEntry(u,A)).next(N=>{const I=d.docVersions.get(A);ae(I!==null),N.version.compareTo(I)<0&&(p.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),f.addEntry(N)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ee();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function lw(t){const e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function SN(t,e){const n=Y(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(qe.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(p,w),function(N,I,x){return N.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,w,f)&&l.push(n.Ur.updateTargetData(i,w))});let u=Pn(),d=ee();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(AN(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(J.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return O.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function AN(t,e,n){let r=ee(),s=ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Pn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function NN(t,e){const n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function CN(t,e){const n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Zn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function gh(t,e,n){const r=Y(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Yo(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function F0(t,e,n){const r=Y(t);let s=J.min(),i=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=Y(u),g=p._s.get(f);return g!==void 0?O.resolve(p.os.get(g)):p.Ur.getTargetData(d,f)}(r,o,tn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:ee())).next(l=>(RN(r,EA(e),l),{documents:l,Ts:i})))}function RN(t,e,n){let r=t.us.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class U0{constructor(){this.activeTargetIds=AA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PN{constructor(){this.so=new U0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new U0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa=null;function Kc(){return qa===null?qa=function(){return 268435456+Math.round(2147483648*Math.random())}():qa++,"0x"+qa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe="WebChannelConnection";class VN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Kc(),u=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(H("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw $s("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ai}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=DN[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Kc();return new Promise((o,l)=>{const u=new wx;u.setWithCredentials(!0),u.listenOnce(Ex.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cl.NO_ERROR:const f=u.getResponseJson();H(Xe,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case cl.TIMEOUT:H(Xe,`RPC '${e}' ${i} timed out`),l(new $(V.DEADLINE_EXCEEDED,"Request time out"));break;case cl.HTTP_ERROR:const p=u.getStatus();if(H(Xe,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const A=function(I){const x=I.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(x)>=0?x:V.UNKNOWN}(w.status);l(new $(A,w.message))}else l(new $(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new $(V.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{H(Xe,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);H(Xe,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Kc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bx(),l=kx(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");H(Xe,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,w=!1;const A=new MN({Io:I=>{w?H(Xe,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(g||(H(Xe,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),H(Xe,`RPC '${e}' stream ${s} sending:`,I),p.send(I))},To:()=>p.close()}),N=(I,x,v)=>{I.listen(x,T=>{try{v(T)}catch(D){setTimeout(()=>{throw D},0)}})};return N(p,zi.EventType.OPEN,()=>{w||(H(Xe,`RPC '${e}' stream ${s} transport opened.`),A.yo())}),N(p,zi.EventType.CLOSE,()=>{w||(w=!0,H(Xe,`RPC '${e}' stream ${s} transport closed`),A.So())}),N(p,zi.EventType.ERROR,I=>{w||(w=!0,$s(Xe,`RPC '${e}' stream ${s} transport errored:`,I),A.So(new $(V.UNAVAILABLE,"The operation could not be completed")))}),N(p,zi.EventType.MESSAGE,I=>{var x;if(!w){const v=I.data[0];ae(!!v);const T=v,D=T.error||((x=T[0])===null||x===void 0?void 0:x.error);if(D){H(Xe,`RPC '${e}' stream ${s} received error:`,D);const L=D.status;let F=function(E){const b=Ce[E];if(b!==void 0)return Yx(b)}(L),k=D.message;F===void 0&&(F=V.INTERNAL,k="Unknown error status: "+L+" with message "+D.message),w=!0,A.So(new $(F,k)),p.close()}else H(Xe,`RPC '${e}' stream ${s} received:`,v),A.bo(v)}}),N(l,Tx.STAT_EVENT,I=>{I.stat===ih.PROXY?H(Xe,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===ih.NOPROXY&&H(Xe,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function Qc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t){return new qA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new uw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Rn(n.toString()),Rn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new $(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LN extends cw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=QA(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?nn(o.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ph(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=uh(u)?{documents:XA(i,u)}:{query:ZA(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=ew(i,o.resumeToken);const d=hh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(J.min())>0){l.readTime=Yl(i,o.snapshotVersion.toTimestamp());const d=hh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=tN(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ph(this.serializer),n.removeTarget=e,this.a_(n)}}class ON extends cw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ae(!!e.streamToken),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=YA(e.writeResults,e.commitTime),r=nn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ph(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>JA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,fh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,fh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class UN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Rn(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ns(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=Y(u);d.L_.add(4),await ea(d),d.q_.set("Unknown"),d.L_.delete(4),await ju(d)}(this))})}),this.q_=new UN(r,s)}}async function ju(t){if(ns(t))for(const e of t.B_)await e(!0)}async function ea(t){for(const e of t.B_)await e(!1)}function dw(t,e){const n=Y(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),em(n)?Zf(n):ci(n).r_()&&Xf(n,e))}function Yf(t,e){const n=Y(t),r=ci(n);n.N_.delete(e),r.r_()&&hw(n,e),n.N_.size===0&&(r.r_()?r.o_():ns(n)&&n.q_.set("Unknown"))}function Xf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ci(t).A_(e)}function hw(t,e){t.Q_.xe(e),ci(t).R_(e)}function Zf(t){t.Q_=new zA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ci(t).start(),t.q_.v_()}function em(t){return ns(t)&&!ci(t).n_()&&t.N_.size>0}function ns(t){return Y(t).L_.size===0}function fw(t){t.Q_=void 0}async function zN(t){t.q_.set("Online")}async function $N(t){t.N_.forEach((e,n)=>{Xf(t,e)})}async function WN(t,e){fw(t),em(t)?(t.q_.M_(e),Zf(t)):t.q_.set("Unknown")}async function HN(t,e,n){if(t.q_.set("Online"),e instanceof Zx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xl(t,r)}else if(e instanceof fl?t.Q_.Ke(e):e instanceof Xx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const r=await lw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(qe.EMPTY_BYTE_STRING,f.snapshotVersion)),hw(i,u);const p=new Zn(f.target,u,d,f.sequenceNumber);Xf(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await Xl(t,r)}}async function Xl(t,e,n){if(!Yo(e))throw e;t.L_.add(1),await ea(t),t.q_.set("Offline"),n||(n=()=>lw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ju(t)})}function mw(t,e){return e().catch(n=>Xl(t,n,e))}async function Du(t){const e=Y(t),n=yr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qN(e);)try{const s=await NN(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,GN(e,s)}catch(s){await Xl(e,s)}pw(e)&&gw(e)}function qN(t){return ns(t)&&t.O_.length<10}function GN(t,e){t.O_.push(e);const n=yr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function pw(t){return ns(t)&&!yr(t).n_()&&t.O_.length>0}function gw(t){yr(t).start()}async function KN(t){yr(t).p_()}async function QN(t){const e=yr(t);for(const n of t.O_)e.m_(n.mutations)}async function JN(t,e,n){const r=t.O_.shift(),s=Hf.from(r,e,n);await mw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Du(t)}async function YN(t,e){e&&yr(t).V_&&await async function(r,s){if(function(o){return FA(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();yr(r).s_(),await mw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Du(r)}}(t,e),pw(t)&&gw(t)}async function z0(t,e){const n=Y(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=ns(n);n.L_.add(3),await ea(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ju(n)}async function XN(t,e){const n=Y(t);e?(n.L_.delete(2),await ju(n)):e||(n.L_.add(2),await ea(n),n.q_.set("Unknown"))}function ci(t){return t.K_||(t.K_=function(n,r,s){const i=Y(n);return i.w_(),new LN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:zN.bind(null,t),Ro:$N.bind(null,t),mo:WN.bind(null,t),d_:HN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),em(t)?Zf(t):t.q_.set("Unknown")):(await t.K_.stop(),fw(t))})),t.K_}function yr(t){return t.U_||(t.U_=function(n,r,s){const i=Y(n);return i.w_(),new ON(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:KN.bind(null,t),mo:YN.bind(null,t),f_:QN.bind(null,t),g_:JN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Du(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new tm(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nm(t,e){if(Rn("AsyncQueue",`${e}: ${t}`),Yo(t))return new $(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=$i(),this.sortedSet=new we(this.comparator)}static emptySet(e){return new js(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new js;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this.W_=new we(q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qs{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Qs(e,n,js.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Su(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class eC{constructor(){this.queries=W0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Y(n),i=s.queries;s.queries=W0(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new $(V.ABORTED,"Firestore shutting down"))}}function W0(){return new ui(t=>Ox(t),Su)}async function rm(t,e){const n=Y(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new ZN,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=nm(o,`Initialization of query '${us(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&im(n)}async function sm(t,e){const n=Y(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function tC(t,e){const n=Y(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&im(n)}function nC(t,e,n){const r=Y(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function im(t){t.Y_.forEach(e=>{e.next()})}var yh,H0;(H0=yh||(yh={})).ea="default",H0.Cache="cache";class om{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Qs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.key=e}}class vw{constructor(e){this.key=e}}class rC{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ee(),this.mutatedKeys=ee(),this.Aa=Fx(e),this.Ra=new js(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new $0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),w=Au(this.query,p)?p:null,A=!!g&&this.mutatedKeys.has(g.key),N=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let I=!1;g&&w?g.data.isEqual(w.data)?A!==N&&(r.track({type:3,doc:w}),I=!0):this.ga(g,w)||(r.track({type:2,doc:w}),I=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(l=!0)):!g&&w?(r.track({type:0,doc:w}),I=!0):g&&!w&&(r.track({type:1,doc:g}),I=!0,(u||d)&&(l=!0)),I&&(w?(o=o.add(w),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(w,A){const N=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return N(w)-N(A)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Qs(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new vw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new yw(r))}),n}ba(e){this.Ta=e.Ts,this.da=ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Qs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class iC{constructor(e){this.key=e,this.va=!1}}class oC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ui(l=>Ox(l),Su),this.Ma=new Map,this.xa=new Set,this.Oa=new we(q.comparator),this.Na=new Map,this.La=new Kf,this.Ba={},this.ka=new Map,this.qa=Ks.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function aC(t,e,n=!0){const r=kw(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await _w(r,e,n,!0),s}async function lC(t,e){const n=kw(t);await _w(n,e,!0,!1)}async function _w(t,e,n,r){const s=await CN(t.localStore,tn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await uC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&dw(t.remoteStore,s),l}async function uC(t,e,n,r,s){t.Ka=(p,g,w)=>async function(N,I,x,v){let T=I.view.ma(x);T.ns&&(T=await F0(N.localStore,I.query,!1).then(({documents:k})=>I.view.ma(k,T)));const D=v&&v.targetChanges.get(I.targetId),L=v&&v.targetMismatches.get(I.targetId)!=null,F=I.view.applyChanges(T,N.isPrimaryClient,D,L);return G0(N,I.targetId,F.wa),F.snapshot}(t,p,g,w);const i=await F0(t.localStore,e,!0),o=new rC(e,i.Ts),l=o.ma(i.documents),u=Zo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);G0(t,n,d.wa);const f=new sC(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function cC(t,e,n){const r=Y(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Su(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await gh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Yf(r.remoteStore,s.targetId),vh(r,s.targetId)}).catch(Jo)):(vh(r,s.targetId),await gh(r.localStore,s.targetId,!0))}async function dC(t,e){const n=Y(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yf(n.remoteStore,r.targetId))}async function hC(t,e,n){const r=_C(t);try{const s=await function(o,l){const u=Y(o),d=Ne.now(),f=l.reduce((w,A)=>w.add(A.key),ee());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let A=Pn(),N=ee();return u.cs.getEntries(w,f).next(I=>{A=I,A.forEach((x,v)=>{v.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,A)).next(I=>{p=I;const x=[];for(const v of l){const T=DA(v,p.get(v.key).overlayedDocument);T!=null&&x.push(new Tr(v.key,T,Cx(T.value.mapValue),vt.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,x,l)}).next(I=>{g=I;const x=I.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(w,I.batchId,x)})}).then(()=>({batchId:g.batchId,changes:Bx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new we(ie)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await ta(r,s.changes),await Du(r.remoteStore)}catch(s){const i=nm(s,"Failed to persist write");n.reject(i)}}async function xw(t,e){const n=Y(t);try{const r=await SN(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ae(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ae(o.va):s.removedDocuments.size>0&&(ae(o.va),o.va=!1))}),await ta(n,r,e)}catch(r){await Jo(r)}}function q0(t,e,n){const r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Y(o);u.onlineState=l;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(d=!0)}),d&&im(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fC(t,e,n){const r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new we(q.comparator);o=o.insert(i,tt.newNoDocument(i,J.min()));const l=ee().add(i),u=new Ru(J.min(),new Map,new we(ie),o,l);await xw(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),am(r)}else await gh(r.localStore,e,!1).then(()=>vh(r,e,n)).catch(Jo)}async function mC(t,e){const n=Y(t),r=e.batch.batchId;try{const s=await IN(n.localStore,e);Ew(n,r,null),ww(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ta(n,s)}catch(s){await Jo(s)}}async function pC(t,e,n){const r=Y(t);try{const s=await function(o,l){const u=Y(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(ae(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);Ew(r,e,n),ww(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ta(r,s)}catch(s){await Jo(s)}}function ww(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ew(t,e,n){const r=Y(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function vh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Tw(t,r)})}function Tw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Yf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),am(t))}function G0(t,e,n){for(const r of n)r instanceof yw?(t.La.addReference(r.key,e),gC(t,r)):r instanceof vw?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Tw(t,r.key)):K()}function gC(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),am(t))}function am(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new q(fe.fromString(e)),r=t.qa.next();t.Na.set(r,new iC(n)),t.Oa=t.Oa.insert(n,r),dw(t.remoteStore,new Zn(tn(Iu(n.path)),r,"TargetPurposeLimboResolution",Vf.oe))}}async function ta(t,e,n){const r=Y(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Jf.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=Y(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(d,g=>O.forEach(g.$i,w=>f.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>O.forEach(g.Ui,w=>f.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!Yo(p))throw p;H("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const w=f.os.get(g),A=w.snapshotVersion,N=w.withLastLimboFreeSnapshotVersion(A);f.os=f.os.insert(g,N)}}}(r.localStore,i))}async function yC(t,e){const n=Y(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await aw(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new $(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ta(n,r.hs)}}function vC(t,e){const n=Y(t),r=n.Na.get(e);if(r&&r.va)return ee().add(r.key);{let s=ee();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function kw(t){const e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fC.bind(null,e),e.Ca.d_=tC.bind(null,e.eventManager),e.Ca.$a=nC.bind(null,e.eventManager),e}function _C(t){const e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pC.bind(null,e),e}class Zl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return bN(this.persistence,new TN,e.initialUser,this.serializer)}Ga(e){return new xN(Qf.Zr,this.serializer)}Wa(e){return new PN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zl.provider={build:()=>new Zl};class _h{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>q0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yC.bind(null,this.syncEngine),await XN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eC}()}createDatastore(e){const n=Pu(e.databaseInfo.databaseId),r=function(i){return new VN(i)}(e.databaseInfo);return function(i,o,l,u){return new FN(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new BN(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>q0(this.syncEngine,n,0),function(){return B0.D()?new B0:new jN}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const p=new oC(s,i,o,l,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Y(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ea(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}_h.provider={build:()=>new _h};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Rn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ze.UNAUTHENTICATED,this.clientId=Sx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=nm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jc(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await aw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function K0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await wC(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>z0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>z0(e.remoteStore,s)),t._onlineComponents=e}async function wC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;$s("Error using user provided cache. Falling back to memory cache: "+n),await Jc(t,new Zl)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await Jc(t,new Zl);return t._offlineComponents}async function bw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await K0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await K0(t,new _h))),t._onlineComponents}function EC(t){return bw(t).then(e=>e.syncEngine)}async function eu(t){const e=await bw(t),n=e.eventManager;return n.onListen=aC.bind(null,e.syncEngine),n.onUnlisten=cC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dC.bind(null,e.syncEngine),n}function TC(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new lm({next:g=>{f.Za(),o.enqueueAndForget(()=>sm(i,p));const w=g.docs.has(l);!w&&g.fromCache?d.reject(new $(V.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new $(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new om(Iu(l.path),f,{includeMetadataChanges:!0,_a:!0});return rm(i,p)}(await eu(t),t.asyncQueue,e,n,r)),r.promise}function kC(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new lm({next:g=>{f.Za(),o.enqueueAndForget(()=>sm(i,p)),g.fromCache&&u.source==="server"?d.reject(new $(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new om(l,f,{includeMetadataChanges:!0,_a:!0});return rm(i,p)}(await eu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e,n){if(!n)throw new $(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bC(t,e,n,r){if(e===!0&&r===!0)throw new $(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function J0(t){if(!q.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Y0(t){if(q.isDocumentKey(t))throw new $(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function _t(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mu(t);throw new $(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Iw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new $(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WS;switch(r.type){case"firstParty":return new KS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Q0.get(n);r&&(H("ComponentProvider","Removing Datastore"),Q0.delete(n),r.terminate())}(this),Promise.resolve()}}function IC(t,e,n,r={}){var s;const i=(t=_t(t,Vu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&$s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Ze.MOCK_USER;else{l=x2(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new $(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ze(d)}t._authCredentials=new HS(new Ix(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new kr(this.firestore,e,this._query)}}class rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}}class hr extends kr{constructor(e,n,r){super(e,n,Iu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new q(e))}withConverter(e){return new hr(this.firestore,e,this._path)}}function Xr(t,e,...n){if(t=je(t),Sw("collection","path",e),t instanceof Vu){const r=fe.fromString(e,...n);return Y0(r),new hr(t,null,r)}{if(!(t instanceof rt||t instanceof hr))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return Y0(r),new hr(t.firestore,null,r)}}function xt(t,e,...n){if(t=je(t),arguments.length===1&&(e=Sx.newId()),Sw("doc","path",e),t instanceof Vu){const r=fe.fromString(e,...n);return J0(r),new rt(t,null,new q(r))}{if(!(t instanceof rt||t instanceof hr))throw new $(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return J0(r),new rt(t.firestore,t instanceof hr?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new uw(this,"async_queue_retry"),this.Vu=()=>{const r=Qc();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Qc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Qc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new kn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Yo(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Rn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=tm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&K()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function ey(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class jn extends Vu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Z0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Z0(e),this._firestoreClient=void 0,await e}}}function SC(t,e){const n=typeof t=="object"?t:U_(),r=typeof t=="string"?t:"(default)",s=Tf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=v2("firestore");i&&IC(s,...i)}return s}function na(t){if(t._terminated)throw new $(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||AC(t),t._firestoreClient}function AC(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new aA(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Iw(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new xC(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Js(qe.fromBase64String(e))}catch(n){throw new $(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Js(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=/^__.*__$/;class CC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xo(e,this.data,n,this.fieldTransforms)}}class Aw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Nw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}class Lu{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Lu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return tu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Nw(this.Cu)&&NC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class RC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pu(e)}Qu(e,n,r,s=!1){return new Lu({Cu:e,methodName:n,qu:r,path:ze.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sa(t){const e=t._freezeSettings(),n=Pu(t._databaseId);return new RC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dm(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);pm("Data must be an object, but it was:",o,r);const l=Pw(r,o);let u,d;if(i.merge)u=new It(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=xh(e,p,n);if(!o.contains(g))throw new $(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Dw(f,g)||f.push(g)}u=new It(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new CC(new ft(l),u,d)}class Ou extends di{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ou}}function PC(t,e,n){return new Lu({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hm extends di{_toFieldTransform(e){return new $f(e.path,new Mo)}isEqual(e){return e instanceof hm}}class fm extends di{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=PC(this,e,!0),r=this.Ku.map(i=>hi(i,n)),s=new Gs(r);return new $f(e.path,s)}isEqual(e){return e instanceof fm&&So(this.Ku,e.Ku)}}class mm extends di{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new Lo(e.serializer,Wx(e.serializer,this.$u));return new $f(e.path,n)}isEqual(e){return e instanceof mm&&this.$u===e.$u}}function Cw(t,e,n,r){const s=t.Qu(1,e,n);pm("Data must be an object, but it was:",s,r);const i=[],o=ft.empty();ts(r,(u,d)=>{const f=gm(e,u,n);d=je(d);const p=s.Nu(f);if(d instanceof Ou)i.push(f);else{const g=hi(d,p);g!=null&&(i.push(f),o.set(f,g))}});const l=new It(i);return new Aw(o,l,s.fieldTransforms)}function Rw(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[xh(e,r,n)],u=[s];if(i.length%2!=0)throw new $(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(xh(e,i[g])),u.push(i[g+1]);const d=[],f=ft.empty();for(let g=l.length-1;g>=0;--g)if(!Dw(d,l[g])){const w=l[g];let A=u[g];A=je(A);const N=o.Nu(w);if(A instanceof Ou)d.push(w);else{const I=hi(A,N);I!=null&&(d.push(w),f.set(w,I))}}const p=new It(d);return new Aw(f,p,o.fieldTransforms)}function jC(t,e,n,r=!1){return hi(n,t.Qu(r?4:3,e))}function hi(t,e){if(jw(t=je(t)))return pm("Unsupported field value:",e,t),Pw(t,e);if(t instanceof di)return function(r,s){if(!Nw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=hi(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Wx(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ne.fromDate(r);return{timestampValue:Yl(s.serializer,i)}}if(r instanceof Ne){const i=new Ne(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yl(s.serializer,i)}}if(r instanceof um)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Js)return{bytesValue:ew(s.serializer,r._byteString)};if(r instanceof rt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Gf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof cm)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return zf(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Mu(r)}`)}(t,e)}function Pw(t,e){const n={};return Ax(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ts(t,(r,s)=>{const i=hi(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function jw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof um||t instanceof Js||t instanceof rt||t instanceof di||t instanceof cm)}function pm(t,e,n){if(!jw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Mu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function xh(t,e,n){if((e=je(e))instanceof ra)return e._internalPath;if(typeof e=="string")return gm(t,e);throw tu("Field path arguments must be of type string or ",t,!1,void 0,n)}const DC=new RegExp("[~\\*/\\[\\]]");function gm(t,e,n){if(e.search(DC)>=0)throw tu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ra(...e.split("."))._internalPath}catch{throw tu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new $(V.INVALID_ARGUMENT,l+t+u)}function Dw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MC extends Mw{data(){return super.data()}}function Fu(t,e){return typeof e=="string"?gm(t,e):e instanceof ra?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ym{}class Lw extends ym{}function Oo(t,e,...n){let r=[];e instanceof ym&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof vm).length,l=i.filter(u=>u instanceof Uu).length;if(o>1||o>0&&l>0)throw new $(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Uu extends Lw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Uu(e,n,r)}_apply(e){const n=this._parse(e);return Ow(e._query,n),new kr(e.firestore,e.converter,ch(e._query,n))}_parse(e){const n=sa(e.firestore);return function(i,o,l,u,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new $(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){ry(p,f);const w=[];for(const A of p)w.push(ny(u,i,A));g={arrayValue:{values:w}}}else g=ny(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||ry(p,f),g=jC(l,o,p,f==="in"||f==="not-in");return Pe.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function nu(t,e,n){const r=e,s=Fu("where",t);return Uu._create(s,r,n)}class vm extends ym{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)Ow(o,u),o=ch(o,u)}(e._query,n),new kr(e.firestore,e.converter,ch(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _m extends Lw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _m(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Do(i,o)}(e._query,this._field,this._direction);return new kr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new li(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ty(t,e="asc"){const n=e,r=Fu("orderBy",t);return _m._create(r,n)}function ny(t,e,n){if(typeof(n=je(n))=="string"){if(n==="")throw new $(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lx(e)&&n.indexOf("/")!==-1)throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(fe.fromString(n));if(!q.isDocumentKey(r))throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return E0(t,new q(r))}if(n instanceof rt)return E0(t,n._key);throw new $(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mu(n)}.`)}function ry(t,e){if(!Array.isArray(t)||t.length===0)throw new $(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ow(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class VC{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ts(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>be(o.doubleValue));return new cm(i)}convertGeoPoint(e){return new um(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Of(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ro(e));default:return null}}convertTimestamp(e){const n=gr(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=fe.fromString(e);ae(ow(r));const s=new Po(r.get(1),r.get(3)),i=new q(r.popFirst(5));return s.isEqual(n)||Rn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fw extends Mw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Fu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ml extends Fw{data(e={}){return super.data(e)}}class Uw{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Hi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ml(this._firestore,this._userDataWriter,r.key,r,new Hi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new ml(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Hi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new ml(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Hi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:LC(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function LC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){t=_t(t,rt);const e=_t(t.firestore,jn);return TC(na(e),t._key).then(n=>$w(e,t,n))}class wm extends VC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}}function Bw(t){t=_t(t,kr);const e=_t(t.firestore,jn),n=na(e),r=new wm(e);return Vw(t._query),kC(n,t._query).then(s=>new Uw(e,r,t,s))}function Em(t,e,n){t=_t(t,rt);const r=_t(t.firestore,jn),s=xm(t.converter,e,n);return Bu(r,[dm(sa(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,vt.none())])}function rs(t,e,n,...r){t=_t(t,rt);const s=_t(t.firestore,jn),i=sa(s);let o;return o=typeof(e=je(e))=="string"||e instanceof ra?Rw(i,"updateDoc",t._key,e,n,r):Cw(i,"updateDoc",t._key,e),Bu(s,[o.toMutation(t._key,vt.exists(!0))])}function zw(t,e){const n=_t(t.firestore,jn),r=xt(t),s=xm(t.converter,e);return Bu(n,[dm(sa(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,vt.exists(!1))]).then(()=>r)}function pl(t,...e){var n,r,s;t=je(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ey(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(ey(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,d,f;if(t instanceof rt)d=_t(t.firestore,jn),f=Iu(t._key.path),u={next:p=>{e[o]&&e[o]($w(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=_t(t,kr);d=_t(p.firestore,jn),f=p._query;const g=new wm(d);u={next:w=>{e[o]&&e[o](new Uw(d,g,p,w))},error:e[o+1],complete:e[o+2]},Vw(t._query)}return function(g,w,A,N){const I=new lm(N),x=new om(w,I,A);return g.asyncQueue.enqueueAndForget(async()=>rm(await eu(g),x)),()=>{I.Za(),g.asyncQueue.enqueueAndForget(async()=>sm(await eu(g),x))}}(na(d),f,l,u)}function Bu(t,e){return function(r,s){const i=new kn;return r.asyncQueue.enqueueAndForget(async()=>hC(await EC(r),s,i)),i.promise}(na(t),e)}function $w(t,e,n){const r=n.docs.get(e._key),s=new wm(t);return new Fw(t,s,e._key,r,new Hi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=sa(e)}set(e,n,r){this._verifyNotCommitted();const s=Yc(e,this._firestore),i=xm(s.converter,n,r),o=dm(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,vt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Yc(e,this._firestore);let o;return o=typeof(n=je(n))=="string"||n instanceof ra?Rw(this._dataReader,"WriteBatch.update",i._key,n,r,s):Cw(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,vt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Yc(e,this._firestore);return this._mutations=this._mutations.concat(new Wf(n._key,vt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yc(t,e){if((t=je(t)).firestore!==e)throw new $(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function nt(){return new hm("serverTimestamp")}function FC(...t){return new fm("arrayUnion",t)}function ru(t){return new mm("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t){return na(t=_t(t,jn)),new OC(t,e=>Bu(t,e))}(function(e,n=!0){(function(s){ai=s})(ii),Bs(new Gr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new jn(new qS(r.getProvider("auth-internal")),new JS(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),dr(y0,"4.7.3",e),dr(y0,"4.7.3","esm2017")})();var BC="firebase",zC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(BC,zC,"app");const $C={apiKey:"AIzaSyDdIBgzOPS62Zfe3y9wsuETt9lNL00Up8s",authDomain:"deenly-6e6db.firebaseapp.com",projectId:"deenly-6e6db",storageBucket:"deenly-6e6db.firebasestorage.app",messagingSenderId:"918826994565",appId:"1:918826994565:web:c218418f69fcee3a5412ec"},Ww=F_($C),Xc=zS(Ww),Se=SC(Ww),Hw=j.createContext(void 0);function wt(){const t=j.useContext(Hw);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}function WC({children:t}){const[e,n]=j.useState(null),[r,s]=j.useState(null),[i,o]=j.useState(!0);async function l(p){const g=xt(Se,"users",p.uid),w=await ia(g);if(w.exists())return w.data();{const A={uid:p.uid,displayName:p.displayName||"Anonymous",email:p.email||"",photoURL:p.photoURL||void 0,createdAt:nt(),settings:{notifications:!0,emailUpdates:!0,dailyReminder:!1,reminderTime:"19:00",dailyGoal:50}};return await Em(g,A),A}}async function u(){try{const p=new gn,g=await YI(Xc,p);await l(g.user)}catch(p){throw new Error(p.message||"Failed to sign in with Google")}}async function d(){try{await RI(Xc),s(null)}catch(p){throw new Error(p.message||"Failed to sign out")}}j.useEffect(()=>CI(Xc,async g=>{if(n(g),g){const w=await l(g);s(w)}else s(null);o(!1)}),[]);const f={currentUser:e,userProfile:r,loading:i,signInWithGoogle:u,signOut:d};return c.jsx(Hw.Provider,{value:f,children:!i&&t})}function sy({children:t}){const{currentUser:e,loading:n}=wt();return n?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-white to-gold-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("img",{src:"/deenly/logo.png",alt:"Deenly",className:"w-20 h-20 mx-auto mb-4 animate-pulse"}),c.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-teal-700 mb-4"}),c.jsx("p",{className:"text-gray-700",children:"Loading..."})]})}):e?c.jsx(c.Fragment,{children:t}):c.jsx(Io,{to:"/login",replace:!0})}function ge({variant:t="primary",size:e="md",children:n,isLoading:r=!1,className:s="",disabled:i,...o}){const l="font-semibold rounded-lg transition-all duration-200 inline-flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2",u={primary:"bg-teal-700 text-white hover:bg-teal-800 active:bg-teal-900 shadow-lg shadow-teal-900/20 dark:bg-teal-600 dark:hover:bg-teal-700 focus:ring-teal-500",secondary:"bg-gold-100 text-teal-900 hover:bg-gold-200 active:bg-gold-300 dark:bg-gold-200 dark:hover:bg-gold-300 focus:ring-gold-400",outline:"border-2 border-teal-700 text-teal-700 hover:bg-teal-50 active:bg-teal-100 dark:border-teal-400 dark:text-teal-400 dark:hover:bg-teal-900 focus:ring-teal-500",ghost:"text-teal-700 hover:bg-teal-50 active:bg-teal-100 dark:text-teal-400 dark:hover:bg-teal-900 focus:ring-teal-500",white:"bg-white text-gray-900 hover:bg-gray-50 active:bg-gray-100 shadow-2xl focus:ring-white border-2 border-white"},d={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return c.jsx("button",{className:`${l} ${u[t]} ${d[e]} ${s}`,disabled:i||r,...o,children:r?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):n})}const qw=j.createContext(void 0);function HC(){const t=j.useContext(qw);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}function qC({children:t}){const[e,n]=j.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});j.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return c.jsx(qw.Provider,{value:{theme:e,toggleTheme:r},children:t})}function Gw(){const{theme:t,toggleTheme:e}=HC();return c.jsx("button",{onClick:e,className:"p-2 rounded-lg bg-white hover:bg-gray-50 dark:bg-gray-700 dark:hover:bg-gray-600 transition-all shadow-sm border border-gray-200 dark:border-gray-600 cursor-pointer","aria-label":"Toggle theme",title:t==="light"?"Switch to dark mode":"Switch to light mode",children:t==="light"?c.jsx("svg",{className:"w-5 h-5 text-gray-800",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"})}):c.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{d:"M12,17.5A5.5,5.5,0,1,1,17.5,12,5.51,5.51,0,0,1,12,17.5ZM12,8.5A3.5,3.5,0,1,0,15.5,12,3.5,3.5,0,0,0,12,8.5Zm0-7a1,1,0,0,1,1,1V4.5a1,1,0,0,1-2,0V2.5A1,1,0,0,1,12,1.5Zm0,19a1,1,0,0,1,1,1v2a1,1,0,0,1-2,0v-2A1,1,0,0,1,12,20.5ZM21.5,12a1,1,0,0,1,1,1h2a1,1,0,0,1,0,2h-2a1,1,0,0,1-1-1A1,1,0,0,1,21.5,12Zm-19,0a1,1,0,0,1,1,1H.5a1,1,0,0,1,0-2H3.5A1,1,0,0,1,2.5,12ZM18.36,18.36a1,1,0,0,1,1.41,0l1.42,1.42a1,1,0,0,1-1.42,1.41l-1.41-1.41A1,1,0,0,1,18.36,18.36ZM3.22,3.22a1,1,0,0,1,1.42,0L6.05,4.64A1,1,0,0,1,4.64,6.05L3.22,4.64A1,1,0,0,1,3.22,3.22ZM18.36,5.64a1,1,0,0,1,0-1.42l1.42-1.42a1,1,0,0,1,1.41,1.42L19.78,5.64A1,1,0,0,1,18.36,5.64ZM3.22,20.78a1,1,0,0,1,0-1.42l1.42-1.41a1,1,0,0,1,1.41,1.41l-1.41,1.42A1,1,0,0,1,3.22,20.78Z"})})})}function GC(){const{currentUser:t}=wt(),[e,n]=j.useState(0);return j.useEffect(()=>{const r=[0,25,50,75,100];let s=0;const i=setInterval(()=>{s=(s+1)%r.length,n(r[s])},3e3);return()=>clearInterval(i)},[]),c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-white to-gold-50 dark:from-gray-900 dark:via-gray-800 dark:to-teal-950 transition-colors",children:[c.jsx("nav",{className:"sticky top-0 z-50 border-b border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm shadow-sm",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs(kt,{to:"/",className:"flex items-center gap-2 sm:gap-3 hover:opacity-80 transition-opacity",children:[c.jsx("img",{src:"/deenly/logo.png",alt:"Deenly",className:"w-8 h-8 sm:w-10 sm:h-10"}),c.jsx("span",{className:"text-xl sm:text-2xl font-bold text-teal-900 dark:text-teal-100",children:"Deenly"})]}),c.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[c.jsx(Gw,{}),t?c.jsx(kt,{to:"/app",children:c.jsx(ge,{variant:"primary",size:"sm",className:"sm:text-base sm:px-4 sm:py-2",children:"Go To App"})}):c.jsx(kt,{to:"/login",children:c.jsx(ge,{variant:"primary",size:"sm",className:"sm:text-base sm:px-4 sm:py-2",children:"Get Started"})})]})]})})}),c.jsx("section",{className:"py-20 px-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[c.jsx("img",{src:"/deenly/logo.png",alt:"Deenly",className:"w-32 h-32 mx-auto mb-8 drop-shadow-xl"}),c.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6",children:["Complete Your Quran Journey",c.jsx("span",{className:"block bg-gradient-to-r from-gold-600 to-gold-500 bg-clip-text text-transparent mt-2",children:"Together"})]}),c.jsx("p",{className:"text-xl text-gray-700 dark:text-gray-300 mb-10 max-w-2xl mx-auto leading-relaxed",children:"Track your Quran reading progress with friends and family. Create reading groups, log your readings, and celebrate milestones together."}),c.jsx("div",{className:"flex gap-4 justify-center flex-wrap",children:t?c.jsx(kt,{to:"/app",children:c.jsxs(ge,{variant:"primary",size:"lg",className:"shadow-xl",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Go To App"]})}):c.jsx(kt,{to:"/login",children:c.jsxs(ge,{variant:"primary",size:"lg",className:"shadow-xl",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Start Your Journey"]})})})]})}),c.jsx("section",{className:"py-20 px-4 bg-gradient-to-br from-gray-50 to-teal-50 dark:from-gray-900 dark:to-gray-800",children:c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:"How It Works"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg mb-8 max-w-2xl mx-auto",children:"Get started in three simple steps"}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto mb-16",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-700 to-teal-600 rounded-full flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4 shadow-lg",children:"1"}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Create a Journey"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Start a journey and invite your group"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gold-600 to-gold-500 rounded-full flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4 shadow-lg",children:"2"}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Log Your Readings"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Track which verses you've completed"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-700 to-teal-600 rounded-full flex items-center justify-center text-white font-bold text-2xl mx-auto mb-4 shadow-lg",children:"3"}),c.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:"Track Progress Together"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Celebrate milestones as a community"})]})]})]}),c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"See It In Action"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Watch how Deenly tracks your Quran reading progress"})]}),c.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[c.jsxs("div",{className:"bg-gradient-to-r from-teal-700 to-teal-600 p-6",children:[c.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Dedi Family Ramadan 2026"}),c.jsx("p",{className:"text-teal-100 text-sm",children:"Journey started by Dedi"})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-white dark:from-teal-900/20 dark:to-gray-700 rounded-xl p-4 text-center border border-teal-200 dark:border-teal-800",children:[c.jsx("p",{className:"text-3xl font-bold text-teal-700 dark:text-teal-400",children:Math.round(e/100*1247)}),c.jsx("p",{className:"text-xs text-teal-600 dark:text-teal-500 mt-1",children:"Verses Read"})]}),c.jsxs("div",{className:"bg-gradient-to-br from-gold-50 to-white dark:from-gold-900/20 dark:to-gray-700 rounded-xl p-4 text-center border border-gold-200 dark:border-gold-800",children:[c.jsxs("p",{className:"text-3xl font-bold text-gold-700 dark:text-gold-400",children:[Math.round(e),"%"]}),c.jsx("p",{className:"text-xs text-gold-600 dark:text-gold-500 mt-1",children:"Complete"})]}),c.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white dark:from-green-900/20 dark:to-gray-700 rounded-xl p-4 text-center border border-green-200 dark:border-green-800",children:[c.jsx("p",{className:"text-3xl font-bold text-green-700 dark:text-green-400",children:"5"}),c.jsx("p",{className:"text-xs text-green-600 dark:text-green-500 mt-1",children:"Members"})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Overall Progress"}),c.jsxs("p",{className:"text-sm font-bold text-teal-700 dark:text-teal-400",children:[e,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3 overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-teal-500 via-teal-600 to-gold-500 rounded-full transition-all duration-300 ease-out",style:{width:`${e}%`}})})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Recent Activity"}),c.jsxs("div",{className:"space-y-2",children:[e>20&&c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 animate-fade-in",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-teal-600 to-gold-600 flex items-center justify-center text-white font-bold text-sm",children:"D"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm text-gray-900 dark:text-white font-medium",children:"Dedi read Al-Baqarah 1-10"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"2 minutes ago"})]})]}),e>50&&c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 animate-fade-in",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-gold-600 to-teal-600 flex items-center justify-center text-white font-bold text-sm",children:"R"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm text-gray-900 dark:text-white font-medium",children:"Rani read Al-Imran 1-20"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"5 minutes ago"})]})]}),e>80&&c.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 animate-fade-in",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-green-600 to-teal-600 flex items-center justify-center text-white font-bold text-sm",children:"B"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm text-gray-900 dark:text-white font-medium",children:"Budi completed An-Nisa!"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"8 minutes ago"})]})]})]})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[c.jsxs("div",{className:"bg-gradient-to-r from-gold-600 to-gold-500 p-6",children:[c.jsx("h3",{className:"text-2xl font-bold text-white mb-1",children:"Surah Progress"}),c.jsx("p",{className:"text-gold-100 text-sm",children:"Track completion per surah"})]}),c.jsx("div",{className:"p-6 space-y-4 max-h-[500px] overflow-y-auto",children:[{number:1,name:"Al-Fatihah",arabic:"الفاتحة",verses:7,read:Math.min(7,Math.round(e/100*7))},{number:2,name:"Al-Baqarah",arabic:"البقرة",verses:286,read:Math.min(286,Math.round(e/100*286))},{number:3,name:"Al-Imran",arabic:"آل عمران",verses:200,read:Math.min(200,Math.round(e/100*200))},{number:4,name:"An-Nisa",arabic:"النساء",verses:176,read:Math.min(176,Math.round(e/100*176))},{number:5,name:"Al-Ma'idah",arabic:"المائدة",verses:120,read:Math.min(120,Math.round(e/100*120))}].map(r=>{const s=r.read/r.verses*100,i=s===100,o=s>0&&s<100;return c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg bg-gradient-to-br from-teal-600 to-gold-600 flex items-center justify-center text-white font-bold shadow-sm",children:r.number}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:r.name}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-arabic",children:r.arabic})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[i&&c.jsx("span",{className:"text-green-600 dark:text-green-400",children:c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),c.jsxs("span",{className:"text-lg font-bold text-teal-700 dark:text-teal-400",children:[s.toFixed(0),"%"]})]})]}),c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 overflow-hidden mb-2",children:c.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${i?"bg-gradient-to-r from-green-500 to-green-600":o?"bg-gradient-to-r from-teal-500 to-gold-500":"bg-gray-300 dark:bg-gray-500"}`,style:{width:`${s}%`}})}),c.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[r.read," / ",r.verses," verses"]})]})]})},r.number)})})]})]})]})}),c.jsx("section",{className:"py-20 px-4 bg-white dark:bg-gray-800",children:c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsx("h2",{className:"text-4xl font-bold text-center text-gray-900 dark:text-white mb-12",children:"Everything You Need"}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-white dark:from-gray-700 dark:to-gray-800 rounded-2xl p-8 border-2 border-teal-200 dark:border-teal-700 hover:border-gold-400 dark:hover:border-gold-500 hover:shadow-xl transition-all",children:[c.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-teal-700 to-teal-600 rounded-xl flex items-center justify-center mb-6 shadow-lg",children:c.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),c.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Collaborative Reading"}),c.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:"Create reading groups and complete the Quran together. Perfect for families, study groups, and friends."})]}),c.jsxs("div",{className:"bg-gradient-to-br from-gold-50 to-white dark:from-gray-700 dark:to-gray-800 rounded-2xl p-8 border-2 border-gold-200 dark:border-gold-700 hover:border-teal-400 dark:hover:border-teal-500 hover:shadow-xl transition-all",children:[c.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-gold-600 to-gold-500 rounded-xl flex items-center justify-center mb-6 shadow-lg",children:c.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),c.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Progress Tracking"}),c.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:"Visual dashboards show your completion percentage, verses read, and individual contributions."})]}),c.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-white dark:from-gray-700 dark:to-gray-800 rounded-2xl p-8 border-2 border-teal-200 dark:border-teal-700 hover:border-gold-400 dark:hover:border-gold-500 hover:shadow-xl transition-all",children:[c.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-teal-700 to-teal-600 rounded-xl flex items-center justify-center mb-6 shadow-lg",children:c.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),c.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Flexible Logging"}),c.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:"Log readings for yourself or others. Read out of order. Track exactly which verses are complete."})]})]})]})}),c.jsx("section",{className:"py-20 px-4 bg-gradient-to-r from-teal-800 to-teal-700 dark:from-teal-900 dark:to-gray-900",children:c.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[c.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Ready to Begin?"}),c.jsx("p",{className:"text-xl text-teal-100 dark:text-teal-200 mb-8",children:"Join Deenly today and start your Quran reading journey with loved ones."}),c.jsx(kt,{to:"/signup",children:c.jsx(ge,{variant:"white",size:"lg",className:"text-xl px-10 py-4",children:"Get Started Free"})})]})}),c.jsx("footer",{className:"py-8 px-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:c.jsxs("div",{className:"max-w-6xl mx-auto text-center",children:[c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"© 2025 Deenly. Track your Quran reading journey together."}),c.jsxs("p",{className:"text-sm text-gray-400 dark:text-gray-600 mt-2 italic",children:["Made with ",c.jsx("span",{className:"text-red-500 animate-pulse",children:"♥"})," by"," ",c.jsx("span",{className:"font-semibold bg-gradient-to-r from-pink-500 to-rose-500 bg-clip-text text-transparent hover:from-pink-600 hover:to-rose-600 transition-all cursor-default",title:"To my amazing partner in jannah - may this app help us complete many Quran journeys together ✨",children:"Dedi & Rani"})]})]})})]})}function KC(){const[t,e]=j.useState(""),[n,r]=j.useState(!1),{signInWithGoogle:s}=wt(),i=Wo(),[o]=xf(),l=o.get("redirect")||"/app";async function u(){e(""),r(!0);try{await s(),i(l)}catch(d){e(d.message||"Failed to sign in with Google")}finally{r(!1)}}return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-white to-gold-50 flex items-center justify-center px-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("img",{src:"/deenly/logo.png",alt:"Deenly",className:"w-20 h-20 mx-auto mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-teal-900 mb-2",children:"Welcome to Deenly"}),c.jsx("p",{className:"text-gray-600",children:"Sign in with your Google account to get started"})]}),t&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:t}),c.jsxs(ge,{variant:"primary",className:"w-full",onClick:u,disabled:n,children:[c.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Signing in...":"Continue with Google"]})]})})}function QC(){const[t,e]=j.useState(""),[n,r]=j.useState(!1),{signInWithGoogle:s}=wt(),i=Wo(),[o]=xf(),l=o.get("redirect")||"/app";async function u(){e(""),r(!0);try{await s(),i(l)}catch(d){e(d.message||"Failed to sign in with Google")}finally{r(!1)}}return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-white to-gold-50 flex items-center justify-center px-4 py-12",children:c.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("img",{src:"/deenly/logo.png",alt:"Deenly",className:"w-20 h-20 mx-auto mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-teal-900 mb-2",children:"Welcome to Deenly"}),c.jsx("p",{className:"text-gray-600",children:"Sign in with your Google account to get started"})]}),t&&c.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:t}),c.jsxs(ge,{variant:"primary",className:"w-full",onClick:u,disabled:n,children:[c.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Signing in...":"Continue with Google"]})]})})}function JC(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null),{currentUser:o}=wt();return j.useEffect(()=>{if(!o){e([]),r(!1);return}try{const l=Oo(Xr(Se,"journeys"),nu("memberIds","array-contains",o.uid)),u=pl(l,d=>{const f=d.docs.map(p=>({id:p.id,...p.data()}));f.sort((p,g)=>{var N,I;const w=((N=p.stats.lastActivityAt)==null?void 0:N.seconds)||0;return(((I=g.stats.lastActivityAt)==null?void 0:I.seconds)||0)-w}),e(f),r(!1),i(null)},d=>{console.error("Error fetching journeys:",d),i(d.message),r(!1)});return()=>u()}catch(l){console.error("Error setting up journeys listener:",l),i(l.message),r(!1)}},[o]),{journeys:t,loading:n,error:s}}function oa(){return"Notification"in window&&"serviceWorker"in navigator}function zu(){if(!oa())return{granted:!1,denied:!0,prompt:!1};const t=Notification.permission;return{granted:t==="granted",denied:t==="denied",prompt:t==="default"}}async function Kw(){if(!oa())return!1;try{return await Notification.requestPermission()==="granted"}catch(t){return console.error("Error requesting notification permission:",t),!1}}async function YC(){if(!("serviceWorker"in navigator))return console.log("Service workers are not supported"),null;try{const t=await navigator.serviceWorker.register("/deenly/sw.js",{scope:"/deenly/"});return console.log("Service worker registered successfully"),await navigator.serviceWorker.ready,t}catch(t){return console.error("Service worker registration failed:",t),null}}async function XC(t,e,n="daily-reminder"){if(!oa()||!zu().granted)return!1;try{const s=await navigator.serviceWorker.ready;return s.active?(s.active.postMessage({type:"SHOW_NOTIFICATION",title:t,body:e,tag:n}),!0):!1}catch(s){return console.error("Error showing notification:",s),!1}}function ZC(t){const[e,n]=t.split(":").map(Number),r=new Date,s=new Date;return s.setHours(e,n,0,0),s<=r&&s.setDate(s.getDate()+1),s.getTime()-r.getTime()}function eR(t){if(!t)return!1;const e=new Date;e.setHours(0,0,0,0);const n=new Date(t);return n.setHours(0,0,0,0),e.getTime()===n.getTime()}function tR(t="19:00",e){let n=null;function r(){const s=ZC(t);n!==null&&clearTimeout(n),n=window.setTimeout(()=>{e(),r()},s),console.log(`Next notification scheduled in ${Math.round(s/1e3/60)} minutes (at ${t})`)}return r(),()=>{n!==null&&(clearTimeout(n),n=null)}}function nR(){const{userProfile:t}=wt(),e=j.useRef(null);return j.useEffect(()=>{if(e.current&&(e.current(),e.current=null),!(t!=null&&t.settings.dailyReminder))return;const{granted:n}=zu();if(!n)return;const r=t.settings.reminderTime||"19:00",s=tR(r,()=>{var l,u;const i=((u=(l=t.stats)==null?void 0:l.lastReadDate)==null?void 0:u.toDate())||null;eR(i)?console.log("User has already read today, skipping notification"):XC("Time to Read the Quran","Continue your reading journey today! Keep your streak going.","daily-reminder")});return e.current=s,()=>{e.current&&(e.current(),e.current=null)}},[t]),null}function $u({isOpen:t,onClose:e,title:n,children:r,size:s="md"}){if(j.useEffect(()=>{const o=l=>{l.key==="Escape"&&e()};return t&&(document.addEventListener("keydown",o),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",o),document.body.style.overflow="unset"}},[t,e]),!t)return null;const i={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return c.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity backdrop-blur-sm",onClick:e}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs("div",{className:`relative bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full ${i[s]} transform transition-all`,onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[c.jsx("h3",{className:"text-2xl font-bold text-teal-900 dark:text-white",children:n}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsx("div",{className:"p-6",children:r})]})})]})}const Tm=j.forwardRef(({label:t,error:e,helperText:n,className:r="",...s},i)=>c.jsxs("div",{className:"w-full",children:[t&&c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),c.jsx("input",{ref:i,className:`
            w-full px-4 py-2 rounded-lg border
            ${e?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-300 focus:border-teal-500 focus:ring-teal-200"}
            focus:outline-none focus:ring-2
            disabled:bg-gray-50 disabled:cursor-not-allowed
            transition-colors
            ${r}
          `,...s}),e&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:e}),n&&!e&&c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]}));Tm.displayName="Input";function rR({isOpen:t,onClose:e,onSuccess:n}){const[r,s]=j.useState(""),[i,o]=j.useState(""),[l,u]=j.useState(""),[d,f]=j.useState(!1),[p,g]=j.useState(""),{currentUser:w,userProfile:A}=wt();async function N(x){if(x.preventDefault(),!(!w||!A)){g(""),f(!0);try{const v={name:r.trim(),description:i.trim()||void 0,createdBy:w.uid,createdAt:nt(),updatedAt:nt(),memberIds:[w.uid],stats:{totalVerses:6236,versesCompleted:0,completionPercentage:0,lastActivityAt:nt(),versesReadToday:0,todayDate:nt()},settings:{isPrivate:!1,requireApproval:!1},targetEndDate:l?Ne.fromDate(new Date(l)):void 0},T=await zw(Xr(Se,"journeys"),v),D={userId:w.uid,displayName:A.displayName,email:A.email,role:"owner",joinedAt:nt(),stats:{versesRead:0,lastReadAt:null,totalReadings:0}};await Em(xt(Se,"journeys",T.id,"members",w.uid),D),s(""),o(""),u(""),e(),n&&n()}catch(v){console.error("Error creating journey:",v),g(v.message||"Failed to create journey")}finally{f(!1)}}}function I(){d||(s(""),o(""),u(""),g(""),e())}return c.jsx($u,{isOpen:t,onClose:I,title:"Create New Journey",children:c.jsxs("form",{onSubmit:N,className:"space-y-4",children:[p&&c.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:p}),c.jsx(Tm,{label:"Journey Name",placeholder:"e.g., Family Ramadan 2025",value:r,onChange:x=>s(x.target.value),required:!0,disabled:d,helperText:"Give your journey a memorable name"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),c.jsx("textarea",{placeholder:"What's the goal of this journey?",value:i,onChange:x=>o(x.target.value),disabled:d,rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 dark:focus:ring-teal-800 focus:outline-none disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed transition-colors resize-none"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Optional: Add details about this reading journey"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target End Date (Optional)"}),c.jsx("input",{type:"date",value:l,onChange:x=>u(x.target.value),disabled:d,min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-teal-500 focus:ring-2 focus:ring-teal-200 dark:focus:ring-teal-800 focus:outline-none disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed transition-colors"}),l?(()=>{const x=new Date(l),v=new Date;v.setHours(0,0,0,0),x.setHours(0,0,0,0);const T=Math.ceil((x.getTime()-v.getTime())/(1e3*60*60*24)),D=6236,L=T>0?Math.ceil(D/T):D;return T<0?c.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:"This date is in the past. Please select a future date."}):T===0?c.jsxs("p",{className:"mt-2 text-sm text-orange-600 dark:text-orange-400 font-medium",children:["📅 Target is today! You'll need to read all ",D.toLocaleString()," verses today."]}):c.jsxs("p",{className:`mt-2 text-sm font-medium ${L>100?"text-orange-600 dark:text-orange-400":"text-teal-600 dark:text-teal-400"}`,children:["📅 ",T," ",T===1?"day":"days"," until target — read ",L," ",L===1?"verse":"verses"," per day to complete on time"]})})():c.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Set a target date to calculate daily verse goals"})]}),c.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("svg",{className:"w-5 h-5 text-teal-600 dark:text-teal-400 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("div",{className:"text-sm text-teal-800 dark:text-teal-200",children:[c.jsx("p",{className:"font-semibold mb-1",children:"What happens next?"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[c.jsx("li",{children:"You'll be able to invite others to join"}),c.jsx("li",{children:"Members can log readings for themselves or others"}),c.jsx("li",{children:"Track progress together toward completing all 6,236 verses"})]})]})]})}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(ge,{type:"button",variant:"outline",onClick:I,disabled:d,className:"flex-1",children:"Cancel"}),c.jsx(ge,{type:"submit",variant:"primary",isLoading:d,className:"flex-1",children:"Create Journey"})]})]})})}const Ga=43200,iy=1440,oy=Symbol.for("constructDateFrom");function km(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&oy in t?t[oy](e):t instanceof Date?new t.constructor(e):new Date(e)}function vr(t,e){return km(t,t)}let sR={};function iR(){return sR}function ay(t){const e=vr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function bm(t,...e){const n=km.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function gl(t,e){const n=+vr(t)-+vr(e);return n<0?-1:n>0?1:n}function oR(t){return km(t,Date.now())}function aR(t,e,n){const[r,s]=bm(n==null?void 0:n.in,t,e),i=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return i*12+o}function lR(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function uR(t,e){return+vr(t)-+vr(e)}function cR(t,e){const n=vr(t);return n.setHours(23,59,59,999),n}function dR(t,e){const n=vr(t),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function hR(t,e){const n=vr(t);return+cR(n)==+dR(n)}function fR(t,e,n){const[r,s,i]=bm(n==null?void 0:n.in,t,t,e),o=gl(s,i),l=Math.abs(aR(s,i));if(l<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*l);let u=gl(s,i)===-o;hR(r)&&l===1&&gl(r,i)===1&&(u=!1);const d=o*(l-+u);return d===0?0:d}function mR(t,e,n){const r=uR(t,e)/1e3;return lR(n==null?void 0:n.roundingMethod)(r)}const pR={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gR=(t,e,n)=>{let r;const s=pR[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Zc(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const yR={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},vR={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_R={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xR={date:Zc({formats:yR,defaultWidth:"full"}),time:Zc({formats:vR,defaultWidth:"full"}),dateTime:Zc({formats:_R,defaultWidth:"full"})},wR={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ER=(t,e,n,r)=>wR[t];function Vi(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const TR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kR={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},IR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},SR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},AR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NR=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},CR={ordinalNumber:NR,era:Vi({values:TR,defaultWidth:"wide"}),quarter:Vi({values:kR,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Vi({values:bR,defaultWidth:"wide"}),day:Vi({values:IR,defaultWidth:"wide"}),dayPeriod:Vi({values:SR,defaultWidth:"wide",formattingValues:AR,defaultFormattingWidth:"wide"})};function Li(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?PR(l,p=>p.test(o)):RR(l,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function RR(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function PR(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function jR(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const DR=/^(\d+)(th|st|nd|rd)?/i,MR=/\d+/i,VR={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},LR={any:[/^b/i,/^(a|c)/i]},OR={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},FR={any:[/1/i,/2/i,/3/i,/4/i]},UR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},BR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$R={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},WR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},HR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qR={ordinalNumber:jR({matchPattern:DR,parsePattern:MR,valueCallback:t=>parseInt(t,10)}),era:Li({matchPatterns:VR,defaultMatchWidth:"wide",parsePatterns:LR,defaultParseWidth:"any"}),quarter:Li({matchPatterns:OR,defaultMatchWidth:"wide",parsePatterns:FR,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Li({matchPatterns:UR,defaultMatchWidth:"wide",parsePatterns:BR,defaultParseWidth:"any"}),day:Li({matchPatterns:zR,defaultMatchWidth:"wide",parsePatterns:$R,defaultParseWidth:"any"}),dayPeriod:Li({matchPatterns:WR,defaultMatchWidth:"any",parsePatterns:HR,defaultParseWidth:"any"})},GR={code:"en-US",formatDistance:gR,formatLong:xR,formatRelative:ER,localize:CR,match:qR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function KR(t,e,n){const r=iR(),s=(n==null?void 0:n.locale)??r.locale??GR,i=2520,o=gl(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[u,d]=bm(n==null?void 0:n.in,...o>0?[e,t]:[t,e]),f=mR(d,u),p=(ay(d)-ay(u))/1e3,g=Math.round((f-p)/60);let w;if(g<2)return n!=null&&n.includeSeconds?f<5?s.formatDistance("lessThanXSeconds",5,l):f<10?s.formatDistance("lessThanXSeconds",10,l):f<20?s.formatDistance("lessThanXSeconds",20,l):f<40?s.formatDistance("halfAMinute",0,l):f<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):g===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",g,l);if(g<45)return s.formatDistance("xMinutes",g,l);if(g<90)return s.formatDistance("aboutXHours",1,l);if(g<iy){const A=Math.round(g/60);return s.formatDistance("aboutXHours",A,l)}else{if(g<i)return s.formatDistance("xDays",1,l);if(g<Ga){const A=Math.round(g/iy);return s.formatDistance("xDays",A,l)}else if(g<Ga*2)return w=Math.round(g/Ga),s.formatDistance("aboutXMonths",w,l)}if(w=fR(d,u),w<12){const A=Math.round(g/Ga);return s.formatDistance("xMonths",A,l)}else{const A=w%12,N=Math.trunc(w/12);return A<3?s.formatDistance("aboutXYears",N,l):A<9?s.formatDistance("overXYears",N,l):s.formatDistance("almostXYears",N+1,l)}}function Qw(t,e){return KR(t,oR(t),e)}function QR({journey:t}){const e=t.stats.completionPercentage||0,n=t.stats.lastActivityAt?Qw(t.stats.lastActivityAt.toDate(),{addSuffix:!0}):"No activity yet",r=(()=>{const o=new Date;o.setHours(0,0,0,0);let l=0;if(t.stats.todayDate){const u=t.stats.todayDate.toDate();u.setHours(0,0,0,0),u.getTime()===o.getTime()&&(l=t.stats.versesReadToday||0)}return{versesReadToday:l}})(),{versesReadToday:s}=r,i=t.targetEndDate?(()=>{const o=t.targetEndDate.toDate(),l=new Date;l.setHours(0,0,0,0),o.setHours(0,0,0,0);const u=o.getTime()-l.getTime(),d=Math.ceil(u/(1e3*60*60*24)),f=d<0,p=t.stats.versesCompleted>=6236,g=6236-t.stats.versesCompleted,w=d>0&&!p?Math.ceil(g/d):0;return{targetDate:o,daysRemaining:d,isOverdue:f,isCompleted:p,dailyVersesNeeded:w}})():null;return c.jsx(kt,{to:`/journey/${t.id}`,children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-teal-100 dark:border-gray-700 hover:border-teal-300 dark:hover:border-teal-600 group",children:[c.jsxs("div",{className:"bg-gradient-to-r from-teal-700 to-teal-600 dark:from-teal-800 dark:to-teal-900 p-6 text-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-1 group-hover:text-gold-200 transition-colors",children:t.name}),t.description&&c.jsx("p",{className:"text-teal-100 dark:text-teal-200 text-sm line-clamp-2",children:t.description})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Progress"}),c.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.stats.versesCompleted.toLocaleString()," / 6,236"]})]}),c.jsxs("span",{className:"text-2xl font-bold text-teal-700 dark:text-teal-400",children:[e.toFixed(1),"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3 overflow-hidden",children:c.jsx("div",{className:"bg-gradient-to-r from-teal-500 to-gold-500 h-full rounded-full transition-all duration-500 shadow-sm",style:{width:`${e}%`}})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:i&&!i.isCompleted?"Daily Target":"Members"}),i&&!i.isCompleted?c.jsx("div",{children:s>=i.dailyVersesNeeded?c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("p",{className:"text-lg font-bold text-green-700 dark:text-green-400",children:[s.toLocaleString(),c.jsxs("span",{className:"text-gray-400 dark:text-gray-400 font-normal",children:[" / ",i.dailyVersesNeeded]})]})]}):s>=i.dailyVersesNeeded/2?c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("svg",{className:"w-5 h-5 text-orange-600 dark:text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),c.jsxs("p",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:[s.toLocaleString(),c.jsxs("span",{className:"text-gray-400 dark:text-gray-400 font-normal",children:[" / ",i.dailyVersesNeeded]})]})]}):s>0?c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),c.jsxs("p",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:[s.toLocaleString(),c.jsxs("span",{className:"text-gray-400 dark:text-gray-400 font-normal",children:[" / ",i.dailyVersesNeeded]})]})]}):c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),c.jsxs("p",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:["0",c.jsxs("span",{className:"text-gray-400 dark:text-gray-400 font-normal",children:[" / ",i.dailyVersesNeeded]})]})]})}):c.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[t.memberIds.length,c.jsx("svg",{className:"w-4 h-4 inline ml-1 text-gray-400 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:i&&!i.isCompleted?"Members":"Last Activity"}),i&&!i.isCompleted?c.jsxs("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[t.memberIds.length,c.jsx("svg",{className:"w-4 h-4 inline ml-1 text-gray-400 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})]}):c.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:n})]})]}),i&&!i.isCompleted&&c.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("svg",{className:"w-4 h-4 text-gold-600 dark:text-gold-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c.jsxs("p",{className:"text-xs font-semibold text-gray-700 dark:text-gray-300",children:["Target: ",i.targetDate.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),c.jsx("p",{className:`text-xs font-medium ml-6 ${i.isOverdue?"text-red-600 dark:text-red-400":i.daysRemaining<=7?"text-orange-600 dark:text-orange-400":"text-gray-600 dark:text-gray-400"}`,children:i.isOverdue?`${Math.abs(i.daysRemaining)} days overdue`:`${i.daysRemaining} days remaining`})]}),(!i||i.isCompleted)&&c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Last activity: ",c.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:n})]})})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 px-6 py-3 flex items-center justify-between group-hover:bg-teal-50 dark:group-hover:bg-teal-950 transition-colors",children:[c.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-teal-700 dark:group-hover:text-teal-400 font-medium",children:"View Journey"}),c.jsx("svg",{className:"w-5 h-5 text-gray-400 dark:text-gray-400 group-hover:text-teal-600 dark:group-hover:text-teal-400 group-hover:translate-x-1 transition-all",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})}function JR(){var s;const{userProfile:t}=wt();if(!t)return null;const e=t.stats||{currentStreak:0,todayVersesRead:0,todayDate:void 0};let n=0;if(e.todayDate){const i=e.todayDate.toDate();i.setHours(0,0,0,0);const o=new Date;o.setHours(0,0,0,0),i.getTime()===o.getTime()&&(n=e.todayVersesRead||0)}const r=((s=t.settings)==null?void 0:s.dailyGoal)||50;return c.jsxs("div",{className:"bg-gradient-to-r from-teal-600 to-teal-700 dark:from-teal-800 dark:to-teal-900 rounded-2xl p-4 md:p-6 shadow-lg",children:[c.jsx("h2",{className:"text-base md:text-xl font-bold text-white mb-3 md:mb-4",children:"Personal Achievements"}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3 md:gap-6",children:[c.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[c.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-white/20 rounded-xl flex items-center justify-center",children:c.jsx("span",{className:"text-xl md:text-2xl",children:"🔥"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs md:text-sm text-teal-100 dark:text-teal-200",children:"Current Streak"}),c.jsxs("p",{className:"text-lg md:text-2xl font-bold text-white",children:[e.currentStreak," ",e.currentStreak===1?"day":"days"]})]})]}),c.jsx("div",{className:"hidden md:block w-px h-12 bg-white/20"}),c.jsx("div",{className:"flex items-center gap-2 md:gap-3",children:(()=>{const i=r>0?n/r*100:0,o=i>=100,l=i>=50;return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-xl flex items-center justify-center ${o?"bg-green-500/30":l?"bg-orange-500/30":"bg-red-500/30"}`,children:o?c.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):c.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs md:text-sm text-teal-100 dark:text-teal-200",children:"Today's Verses"}),c.jsxs("p",{className:`text-lg md:text-2xl font-bold ${o?"text-green-200":l?"text-orange-200":"text-red-200"}`,children:[n.toLocaleString()," / ",r.toLocaleString()]})]})]})})()})]}),e.currentStreak===0&&n===0&&c.jsx("div",{className:"hidden lg:block text-white/90 text-sm",children:"Start your reading journey today! 📖"}),e.currentStreak>0&&c.jsxs("div",{className:"hidden lg:block text-white/90 text-sm",children:[e.currentStreak===1&&"Keep going! 💪",e.currentStreak>=2&&e.currentStreak<=6&&"You're on fire! 🌟",e.currentStreak>=7&&e.currentStreak<30&&"Amazing streak! 🚀",e.currentStreak>=30&&"Masha Allah! 🌙"]})]})]})}function Jw({isOpen:t,onClose:e}){const{currentUser:n,userProfile:r}=wt(),[s,i]=j.useState("goal"),[o,l]=j.useState(!1),[u,d]=j.useState(""),[f,p]=j.useState(""),[g,w]=j.useState((r==null?void 0:r.settings.dailyGoal)||50),[A,N]=j.useState((r==null?void 0:r.settings.dailyReminder)||!1),[I,x]=j.useState((r==null?void 0:r.settings.reminderTime)||"19:00"),v=zu(),T=oa();async function D(F){if(F.preventDefault(),!!n){d(""),p(""),l(!0);try{if(A&&!v.granted&&!await Kw()){d("Notification permission is required for daily reminders"),N(!1),l(!1);return}const k=xt(Se,"users",n.uid);await rs(k,{"settings.dailyGoal":g,"settings.dailyReminder":A,"settings.reminderTime":I}),p("Settings saved successfully!"),setTimeout(()=>{e()},1500)}catch(k){console.error("Error updating settings:",k),d(k.message||"Failed to update settings")}finally{l(!1)}}}function L(){o||(d(""),p(""),w((r==null?void 0:r.settings.dailyGoal)||50),N((r==null?void 0:r.settings.dailyReminder)||!1),x((r==null?void 0:r.settings.reminderTime)||"19:00"),e())}return c.jsx($u,{isOpen:t,onClose:L,title:"Settings",size:"md",children:c.jsxs("form",{onSubmit:D,className:"space-y-6",children:[u&&c.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm",children:u}),f&&c.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg text-green-700 dark:text-green-400 text-sm",children:f}),c.jsxs("div",{className:"flex gap-2 border-b border-gray-200 dark:border-gray-700",children:[c.jsxs("button",{type:"button",onClick:()=>i("goal"),className:`px-4 py-2 text-sm font-medium transition-colors relative ${s==="goal"?"text-teal-600 dark:text-teal-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:["Goal",s==="goal"&&c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-teal-600 dark:bg-teal-400"})]}),c.jsxs("button",{type:"button",onClick:()=>i("notifications"),className:`px-4 py-2 text-sm font-medium transition-colors relative ${s==="notifications"?"text-teal-600 dark:text-teal-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:["Notifications",s==="notifications"&&c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-teal-600 dark:bg-teal-400"})]})]}),s==="goal"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Daily Reading Goal"}),c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Daily Verses Target"}),c.jsx("input",{type:"number",min:"1",max:"6236",value:g,onChange:F=>w(Math.max(1,parseInt(F.target.value)||1)),disabled:o,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-teal-500 focus:ring-2 focus:ring-teal-200 dark:focus:ring-teal-800 focus:outline-none disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed transition-colors"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Set your daily reading target (1-6,236 verses)"})]})})]}),c.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("svg",{className:"w-5 h-5 text-teal-600 dark:text-teal-400 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("div",{className:"text-sm text-teal-800 dark:text-teal-200",children:[c.jsx("p",{className:"font-semibold mb-1",children:"About Daily Goals"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"Your goal will be displayed in your personal stats banner"}),c.jsx("li",{children:"Journey cards will show your progress towards this daily target"}),c.jsx("li",{children:"This is a personal setting and won't affect other journey members"})]})]})]})})]}),s==="notifications"&&c.jsxs("div",{className:"space-y-6",children:[!T&&c.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg text-yellow-700 dark:text-yellow-400 text-sm",children:"Notifications are not supported in your browser"}),v.denied&&c.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg text-orange-700 dark:text-orange-400 text-sm",children:"Notification permission was denied. Please enable notifications in your browser settings to use daily reminders."}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Notifications"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:A,onChange:F=>N(F.target.checked),disabled:o||!T||v.denied,className:"w-5 h-5 mt-0.5 text-teal-600 border-gray-300 rounded focus:ring-teal-500 focus:ring-2 disabled:cursor-not-allowed"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Daily Reading Reminder"}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"Get a notification each day at your chosen time to continue your reading journey"})]})]}),A&&c.jsxs("div",{className:"ml-8 pl-4 border-l-2 border-teal-200 dark:border-teal-800",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reminder Time"}),c.jsx("input",{type:"time",value:I,onChange:F=>x(F.target.value),disabled:o,className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-teal-500 focus:ring-2 focus:ring-teal-200 dark:focus:ring-teal-800 focus:outline-none disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed transition-colors"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"You'll receive a notification at this time each day (if you haven't read yet)"})]})]})]}),c.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("svg",{className:"w-5 h-5 text-teal-600 dark:text-teal-400 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("div",{className:"text-sm text-teal-800 dark:text-teal-200",children:[c.jsx("p",{className:"font-semibold mb-1",children:"About Daily Reminders"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[c.jsx("li",{children:"Notifications work best when the app is open or in the background"}),c.jsx("li",{children:"You won't receive a notification if you've already logged reading for the day"}),c.jsx("li",{children:"Make sure notifications are enabled in your browser settings"})]})]})]})})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(ge,{type:"button",variant:"outline",onClick:L,disabled:o,className:"flex-1",children:"Cancel"}),c.jsx(ge,{type:"submit",variant:"primary",isLoading:o,disabled:!T&&A,className:"flex-1",children:"Save Settings"})]})]})})}function Yw({onOpenSettings:t}){const{signOut:e}=wt(),[n,r]=j.useState(!1),s=j.useRef(null);j.useEffect(()=>{function l(u){s.current&&!s.current.contains(u.target)&&r(!1)}if(n)return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n]);async function i(){try{await e(),r(!1)}catch(l){console.error("Failed to sign out:",l)}}function o(){r(!1),t()}return c.jsxs("div",{className:"relative",ref:s,children:[c.jsx("button",{onClick:()=>r(!n),className:"p-2 rounded-lg hover:bg-white/10 transition-colors","aria-label":"Menu",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),n&&c.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50",children:c.jsxs("div",{className:"py-2",children:[c.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Dark Mode"}),c.jsx(Gw,{})]})}),c.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),c.jsxs("button",{onClick:o,className:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-3",children:[c.jsxs("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Settings"})]}),c.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),c.jsxs("button",{onClick:i,className:"w-full px-4 py-3 text-left hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors flex items-center gap-3",children:[c.jsx("svg",{className:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),c.jsx("span",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"Sign Out"})]})]})})]})}function Xw(){const{currentUser:t,userProfile:e}=wt(),[n,r]=j.useState(!1),[s,i]=j.useState(!1),o=j.useRef(null),l=zu(),u=oa()&&!(e!=null&&e.settings.dailyReminder)&&!l.denied;j.useEffect(()=>{function f(p){o.current&&!o.current.contains(p.target)&&r(!1)}if(n)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[n]);async function d(){if(!(!t||!e)){i(!0);try{if(await Kw()){const p=xt(Se,"users",t.uid);await rs(p,{"settings.dailyReminder":!0,"settings.reminderTime":"19:00"}),r(!1)}}catch(f){console.error("Error enabling notifications:",f)}finally{i(!1)}}}return c.jsxs("div",{className:"relative",ref:o,children:[c.jsxs("button",{onClick:()=>r(!n),className:"relative p-2 rounded-lg hover:bg-white/10 transition-colors","aria-label":"Notifications",children:[c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),u&&c.jsx("span",{className:"absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-500 rounded-full",children:"!"})]}),n&&c.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-3",children:"Notifications"}),u?c.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4 border border-purple-200 dark:border-purple-700",children:[c.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[c.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-purple-500 dark:bg-purple-600 rounded-lg flex items-center justify-center",children:c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:"Enable Daily Reminders"}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Get a gentle reminder at 7pm each day to continue your Quran reading journey"})]})]}),c.jsx(ge,{variant:"primary",size:"sm",onClick:d,disabled:s,isLoading:s,className:"w-full",children:"Enable Reminders"})]}):c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-700 mb-3",children:c.jsx("svg",{className:"w-6 h-6 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"You're all caught up!"}),(e==null?void 0:e.settings.dailyReminder)&&c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:"Daily reminders are enabled"})]})]})})]})}function YR({onOpenSettings:t}){const{userProfile:e}=wt();return c.jsx("header",{className:"sticky top-0 z-50 bg-gradient-to-r from-teal-900 to-teal-800 dark:from-gray-900 dark:to-gray-800 shadow-lg border-b border-teal-700 dark:border-gray-700",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs(kt,{to:"/app",className:"flex items-center gap-2 sm:gap-3 hover:opacity-80 transition-opacity",children:[c.jsx("img",{src:"/deenly/logo.png",alt:"Deenly",className:"w-8 h-8 sm:w-10 sm:h-10"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-white",children:"Deenly"}),c.jsxs("p",{className:"text-xs sm:text-sm text-gold-200 dark:text-gray-400 hidden sm:block",children:["Welcome back, ",e==null?void 0:e.displayName,"!"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Xw,{}),c.jsx(Yw,{onOpenSettings:t})]})]})})})}function XR(){const{journeys:t,loading:e}=JC(),[n,r]=j.useState(!1),[s,i]=j.useState(!1);return nR(),c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-gold-50/30 to-teal-100 dark:from-gray-900 dark:via-gray-800 dark:to-teal-950",children:[c.jsx(YR,{onOpenSettings:()=>i(!0)}),c.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsx("div",{className:"mb-8",children:c.jsx(JR,{})}),c.jsx("div",{className:"mb-6",children:c.jsxs("div",{className:"flex justify-between items-center gap-3",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h2",{className:"text-xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-1 sm:mb-2",children:"Your Journeys"}),c.jsx("p",{className:"text-xs sm:text-base text-gray-600 dark:text-gray-400 hidden sm:block",children:t.length===0?"Create your first journey to get started":`Managing ${t.length} ${t.length===1?"journey":"journeys"}`})]}),c.jsxs(ge,{variant:"primary",onClick:()=>r(!0),size:"sm",className:"shadow-lg whitespace-nowrap",children:[c.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 sm:mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),c.jsx("span",{className:"hidden sm:inline",children:"New Journey"}),c.jsx("span",{className:"sm:hidden",children:"New"})]})]})}),e?c.jsxs("div",{className:"text-center py-16",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 dark:border-teal-400 mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading your journeys..."})]}):t.length===0?c.jsxs("div",{className:"text-center py-16",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-teal-100 to-gold-100 dark:from-teal-900 dark:to-gold-900 mb-6 shadow-lg",children:c.jsx("svg",{className:"w-10 h-10 text-teal-700 dark:text-teal-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),c.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"No Journeys Yet"}),c.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-8 max-w-md mx-auto",children:"Create your first journey to start tracking your Quran reading progress with friends and family."}),c.jsxs(ge,{variant:"primary",size:"lg",onClick:()=>r(!0),children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Your First Journey"]})]}):c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map(o=>c.jsx(QR,{journey:o},o.id))})]}),c.jsx(rR,{isOpen:n,onClose:()=>r(!1)}),c.jsx(Jw,{isOpen:s,onClose:()=>i(!1)})]})}function ZR(t){const[e,n]=j.useState(null),[r,s]=j.useState([]),[i,o]=j.useState([]),[l,u]=j.useState(!0),[d,f]=j.useState(null);return j.useEffect(()=>{if(!t){u(!1);return}const p=xt(Se,"journeys",t),g=pl(p,x=>{x.exists()?(n({id:x.id,...x.data()}),f(null)):(n(null),f("Journey not found"))},x=>{console.error("Error fetching journey:",x),f("Failed to load journey"),n(null)}),w=Oo(Xr(Se,"journeys",t,"members"),ty("joinedAt","asc")),A=pl(w,x=>{const v=x.docs.map(T=>T.data());s(v)},x=>{console.error("Error fetching members:",x)}),N=Oo(Xr(Se,"journeys",t,"readingLogs"),ty("timestamp","desc")),I=pl(N,x=>{const v=x.docs.map(T=>({id:T.id,...T.data()}));o(v),u(!1)},x=>{console.error("Error fetching reading logs:",x),u(!1)});return()=>{g(),A(),I()}},[t]),{journey:e,members:r,readingLogs:i,loading:l,error:d}}const $t=[{number:1,name:"Al-Fatihah",nameArabic:"الفاتحة",verses:7,revelationType:"Meccan"},{number:2,name:"Al-Baqarah",nameArabic:"البقرة",verses:286,revelationType:"Medinan"},{number:3,name:"Ali 'Imran",nameArabic:"آل عمران",verses:200,revelationType:"Medinan"},{number:4,name:"An-Nisa",nameArabic:"النساء",verses:176,revelationType:"Medinan"},{number:5,name:"Al-Ma'idah",nameArabic:"المائدة",verses:120,revelationType:"Medinan"},{number:6,name:"Al-An'am",nameArabic:"الأنعام",verses:165,revelationType:"Meccan"},{number:7,name:"Al-A'raf",nameArabic:"الأعراف",verses:206,revelationType:"Meccan"},{number:8,name:"Al-Anfal",nameArabic:"الأنفال",verses:75,revelationType:"Medinan"},{number:9,name:"At-Tawbah",nameArabic:"التوبة",verses:129,revelationType:"Medinan"},{number:10,name:"Yunus",nameArabic:"يونس",verses:109,revelationType:"Meccan"},{number:11,name:"Hud",nameArabic:"هود",verses:123,revelationType:"Meccan"},{number:12,name:"Yusuf",nameArabic:"يوسف",verses:111,revelationType:"Meccan"},{number:13,name:"Ar-Ra'd",nameArabic:"الرعد",verses:43,revelationType:"Medinan"},{number:14,name:"Ibrahim",nameArabic:"ابراهيم",verses:52,revelationType:"Meccan"},{number:15,name:"Al-Hijr",nameArabic:"الحجر",verses:99,revelationType:"Meccan"},{number:16,name:"An-Nahl",nameArabic:"النحل",verses:128,revelationType:"Meccan"},{number:17,name:"Al-Isra",nameArabic:"الإسراء",verses:111,revelationType:"Meccan"},{number:18,name:"Al-Kahf",nameArabic:"الكهف",verses:110,revelationType:"Meccan"},{number:19,name:"Maryam",nameArabic:"مريم",verses:98,revelationType:"Meccan"},{number:20,name:"Taha",nameArabic:"طه",verses:135,revelationType:"Meccan"},{number:21,name:"Al-Anbya",nameArabic:"الأنبياء",verses:112,revelationType:"Meccan"},{number:22,name:"Al-Hajj",nameArabic:"الحج",verses:78,revelationType:"Medinan"},{number:23,name:"Al-Mu'minun",nameArabic:"المؤمنون",verses:118,revelationType:"Meccan"},{number:24,name:"An-Nur",nameArabic:"النور",verses:64,revelationType:"Medinan"},{number:25,name:"Al-Furqan",nameArabic:"الفرقان",verses:77,revelationType:"Meccan"},{number:26,name:"Ash-Shu'ara",nameArabic:"الشعراء",verses:227,revelationType:"Meccan"},{number:27,name:"An-Naml",nameArabic:"النمل",verses:93,revelationType:"Meccan"},{number:28,name:"Al-Qasas",nameArabic:"القصص",verses:88,revelationType:"Meccan"},{number:29,name:"Al-'Ankabut",nameArabic:"العنكبوت",verses:69,revelationType:"Meccan"},{number:30,name:"Ar-Rum",nameArabic:"الروم",verses:60,revelationType:"Meccan"},{number:31,name:"Luqman",nameArabic:"لقمان",verses:34,revelationType:"Meccan"},{number:32,name:"As-Sajdah",nameArabic:"السجدة",verses:30,revelationType:"Meccan"},{number:33,name:"Al-Ahzab",nameArabic:"الأحزاب",verses:73,revelationType:"Medinan"},{number:34,name:"Saba",nameArabic:"سبإ",verses:54,revelationType:"Meccan"},{number:35,name:"Fatir",nameArabic:"فاطر",verses:45,revelationType:"Meccan"},{number:36,name:"Ya-Sin",nameArabic:"يس",verses:83,revelationType:"Meccan"},{number:37,name:"As-Saffat",nameArabic:"الصافات",verses:182,revelationType:"Meccan"},{number:38,name:"Sad",nameArabic:"ص",verses:88,revelationType:"Meccan"},{number:39,name:"Az-Zumar",nameArabic:"الزمر",verses:75,revelationType:"Meccan"},{number:40,name:"Ghafir",nameArabic:"غافر",verses:85,revelationType:"Meccan"},{number:41,name:"Fussilat",nameArabic:"فصلت",verses:54,revelationType:"Meccan"},{number:42,name:"Ash-Shuraa",nameArabic:"الشورى",verses:53,revelationType:"Meccan"},{number:43,name:"Az-Zukhruf",nameArabic:"الزخرف",verses:89,revelationType:"Meccan"},{number:44,name:"Ad-Dukhan",nameArabic:"الدخان",verses:59,revelationType:"Meccan"},{number:45,name:"Al-Jathiyah",nameArabic:"الجاثية",verses:37,revelationType:"Meccan"},{number:46,name:"Al-Ahqaf",nameArabic:"الأحقاف",verses:35,revelationType:"Meccan"},{number:47,name:"Muhammad",nameArabic:"محمد",verses:38,revelationType:"Medinan"},{number:48,name:"Al-Fath",nameArabic:"الفتح",verses:29,revelationType:"Medinan"},{number:49,name:"Al-Hujurat",nameArabic:"الحجرات",verses:18,revelationType:"Medinan"},{number:50,name:"Qaf",nameArabic:"ق",verses:45,revelationType:"Meccan"},{number:51,name:"Adh-Dhariyat",nameArabic:"الذاريات",verses:60,revelationType:"Meccan"},{number:52,name:"At-Tur",nameArabic:"الطور",verses:49,revelationType:"Meccan"},{number:53,name:"An-Najm",nameArabic:"النجم",verses:62,revelationType:"Meccan"},{number:54,name:"Al-Qamar",nameArabic:"القمر",verses:55,revelationType:"Meccan"},{number:55,name:"Ar-Rahman",nameArabic:"الرحمن",verses:78,revelationType:"Medinan"},{number:56,name:"Al-Waqi'ah",nameArabic:"الواقعة",verses:96,revelationType:"Meccan"},{number:57,name:"Al-Hadid",nameArabic:"الحديد",verses:29,revelationType:"Medinan"},{number:58,name:"Al-Mujadila",nameArabic:"المجادلة",verses:22,revelationType:"Medinan"},{number:59,name:"Al-Hashr",nameArabic:"الحشر",verses:24,revelationType:"Medinan"},{number:60,name:"Al-Mumtahanah",nameArabic:"الممتحنة",verses:13,revelationType:"Medinan"},{number:61,name:"As-Saf",nameArabic:"الصف",verses:14,revelationType:"Medinan"},{number:62,name:"Al-Jumu'ah",nameArabic:"الجمعة",verses:11,revelationType:"Medinan"},{number:63,name:"Al-Munafiqun",nameArabic:"المنافقون",verses:11,revelationType:"Medinan"},{number:64,name:"At-Taghabun",nameArabic:"التغابن",verses:18,revelationType:"Medinan"},{number:65,name:"At-Talaq",nameArabic:"الطلاق",verses:12,revelationType:"Medinan"},{number:66,name:"At-Tahrim",nameArabic:"التحريم",verses:12,revelationType:"Medinan"},{number:67,name:"Al-Mulk",nameArabic:"الملك",verses:30,revelationType:"Meccan"},{number:68,name:"Al-Qalam",nameArabic:"القلم",verses:52,revelationType:"Meccan"},{number:69,name:"Al-Haqqah",nameArabic:"الحاقة",verses:52,revelationType:"Meccan"},{number:70,name:"Al-Ma'arij",nameArabic:"المعارج",verses:44,revelationType:"Meccan"},{number:71,name:"Nuh",nameArabic:"نوح",verses:28,revelationType:"Meccan"},{number:72,name:"Al-Jinn",nameArabic:"الجن",verses:28,revelationType:"Meccan"},{number:73,name:"Al-Muzzammil",nameArabic:"المزمل",verses:20,revelationType:"Meccan"},{number:74,name:"Al-Muddaththir",nameArabic:"المدثر",verses:56,revelationType:"Meccan"},{number:75,name:"Al-Qiyamah",nameArabic:"القيامة",verses:40,revelationType:"Meccan"},{number:76,name:"Al-Insan",nameArabic:"الانسان",verses:31,revelationType:"Medinan"},{number:77,name:"Al-Mursalat",nameArabic:"المرسلات",verses:50,revelationType:"Meccan"},{number:78,name:"An-Naba",nameArabic:"النبإ",verses:40,revelationType:"Meccan"},{number:79,name:"An-Nazi'at",nameArabic:"النازعات",verses:46,revelationType:"Meccan"},{number:80,name:"'Abasa",nameArabic:"عبس",verses:42,revelationType:"Meccan"},{number:81,name:"At-Takwir",nameArabic:"التكوير",verses:29,revelationType:"Meccan"},{number:82,name:"Al-Infitar",nameArabic:"الإنفطار",verses:19,revelationType:"Meccan"},{number:83,name:"Al-Mutaffifin",nameArabic:"المطففين",verses:36,revelationType:"Meccan"},{number:84,name:"Al-Inshiqaq",nameArabic:"الإنشقاق",verses:25,revelationType:"Meccan"},{number:85,name:"Al-Buruj",nameArabic:"البروج",verses:22,revelationType:"Meccan"},{number:86,name:"At-Tariq",nameArabic:"الطارق",verses:17,revelationType:"Meccan"},{number:87,name:"Al-A'la",nameArabic:"الأعلى",verses:19,revelationType:"Meccan"},{number:88,name:"Al-Ghashiyah",nameArabic:"الغاشية",verses:26,revelationType:"Meccan"},{number:89,name:"Al-Fajr",nameArabic:"الفجر",verses:30,revelationType:"Meccan"},{number:90,name:"Al-Balad",nameArabic:"البلد",verses:20,revelationType:"Meccan"},{number:91,name:"Ash-Shams",nameArabic:"الشمس",verses:15,revelationType:"Meccan"},{number:92,name:"Al-Layl",nameArabic:"الليل",verses:21,revelationType:"Meccan"},{number:93,name:"Ad-Duhaa",nameArabic:"الضحى",verses:11,revelationType:"Meccan"},{number:94,name:"Ash-Sharh",nameArabic:"الشرح",verses:8,revelationType:"Meccan"},{number:95,name:"At-Tin",nameArabic:"التين",verses:8,revelationType:"Meccan"},{number:96,name:"Al-'Alaq",nameArabic:"العلق",verses:19,revelationType:"Meccan"},{number:97,name:"Al-Qadr",nameArabic:"القدر",verses:5,revelationType:"Meccan"},{number:98,name:"Al-Bayyinah",nameArabic:"البينة",verses:8,revelationType:"Medinan"},{number:99,name:"Az-Zalzalah",nameArabic:"الزلزلة",verses:8,revelationType:"Medinan"},{number:100,name:"Al-'Adiyat",nameArabic:"العاديات",verses:11,revelationType:"Meccan"},{number:101,name:"Al-Qari'ah",nameArabic:"القارعة",verses:11,revelationType:"Meccan"},{number:102,name:"At-Takathur",nameArabic:"التكاثر",verses:8,revelationType:"Meccan"},{number:103,name:"Al-'Asr",nameArabic:"العصر",verses:3,revelationType:"Meccan"},{number:104,name:"Al-Humazah",nameArabic:"الهمزة",verses:9,revelationType:"Meccan"},{number:105,name:"Al-Fil",nameArabic:"الفيل",verses:5,revelationType:"Meccan"},{number:106,name:"Quraysh",nameArabic:"قريش",verses:4,revelationType:"Meccan"},{number:107,name:"Al-Ma'un",nameArabic:"الماعون",verses:7,revelationType:"Meccan"},{number:108,name:"Al-Kawthar",nameArabic:"الكوثر",verses:3,revelationType:"Meccan"},{number:109,name:"Al-Kafirun",nameArabic:"الكافرون",verses:6,revelationType:"Meccan"},{number:110,name:"An-Nasr",nameArabic:"النصر",verses:3,revelationType:"Medinan"},{number:111,name:"Al-Masad",nameArabic:"المسد",verses:5,revelationType:"Meccan"},{number:112,name:"Al-Ikhlas",nameArabic:"الإخلاص",verses:4,revelationType:"Meccan"},{number:113,name:"Al-Falaq",nameArabic:"الفلق",verses:5,revelationType:"Meccan"},{number:114,name:"An-Nas",nameArabic:"الناس",verses:6,revelationType:"Meccan"}],eP=6236;function on(t){const e=t.split(":");if(e.length!==2)return null;const n=parseInt(e[0],10),r=parseInt(e[1],10);return isNaN(n)||isNaN(r)?null:{surah:n,verse:r}}function tP(t){return`${t.surah}:${t.verse}`}function Ys(t){const e=on(t);if(!e)return!1;const{surah:n,verse:r}=e;if(n<1||n>114)return!1;const s=$t.find(i=>i.number===n);return s?r>=1&&r<=s.verses:!1}function Xs(t){let e=0;for(let n=0;n<t.surah-1;n++)e+=$t[n].verses;return e+=t.verse,e}function nP(t){if(t<1||t>eP)return null;let e=t,n=0;for(;e>$t[n].verses;)e-=$t[n].verses,n++;return{surah:$t[n].number,verse:e}}function Im(t,e){const n=on(t),r=on(e);if(!n||!r)return[];if(!Ys(t)||!Ys(e))return[];const s=Xs(n),i=Xs(r);if(s>i)return[];const o=[];for(let l=s;l<=i;l++){const u=nP(l);u&&o.push(tP(u))}return o}function Zw(t,e){const n=on(t),r=on(e);if(!n||!r||!Ys(t)||!Ys(e))return 0;const s=Xs(n),i=Xs(r);return s>i?0:i-s+1}function rP(t,e){if(!t||!e)return"Both start and end references are required";if(!Ys(t))return"Invalid start verse reference";if(!Ys(e))return"Invalid end verse reference";const n=on(t),r=on(e);if(!n||!r)return"Failed to parse verse references";const s=Xs(n),i=Xs(r);return s>i?"Start verse must come before or equal to end verse":null}function ed(t){const e=on(t);if(!e)return null;const n=$t.find(r=>r.number===e.surah);return n?n.name:null}function e1(t,e){const n=on(t),r=on(e);if(!n||!r)return"";if(n.surah===r.surah){const s=ed(t);return n.verse===r.verse?`${s} ${n.verse}`:`${s} ${n.verse}-${r.verse}`}else{const s=ed(t),i=ed(e);return`${s} ${n.verse} to ${i} ${r.verse}`}}function sP({onRangeChange:t,disabled:e=!1}){const[n,r]=j.useState(1),[s,i]=j.useState(1),[o,l]=j.useState(1),[u,d]=j.useState(1),[f,p]=j.useState(null),g=$t.find(I=>I.number===n),w=$t.find(I=>I.number===o);j.useEffect(()=>{s>((g==null?void 0:g.verses)||1)&&i(1)},[n,g]),j.useEffect(()=>{u>((w==null?void 0:w.verses)||1)&&d((w==null?void 0:w.verses)||1)},[o,w]),j.useEffect(()=>{n>o?(l(n),d(s)):n===o&&s>u&&d(s)},[n,s,o,u]),j.useEffect(()=>{const I=`${n}:${s}`,x=`${o}:${u}`,v=rP(I,x);p(v),t(I,x,!v)},[n,s,o,u,t]);const A=f?0:Zw(`${n}:${s}`,`${o}:${u}`),N=f?"":e1(`${n}:${s}`,`${o}:${u}`);return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Verse"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Surah"}),c.jsx("select",{value:n,onChange:I=>r(Number(I.target.value)),disabled:e,className:"w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-teal-500 focus:ring-2 focus:ring-teal-200 dark:focus:ring-teal-800 focus:outline-none disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed transition-colors",children:$t.map(I=>c.jsxs("option",{value:I.number,children:[I.number,". ",I.name]},I.number))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Verse"}),c.jsx("select",{value:s,onChange:I=>i(Number(I.target.value)),disabled:e,className:"w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-teal-500 focus:ring-2 focus:ring-teal-200 dark:focus:ring-teal-800 focus:outline-none disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed transition-colors",children:Array.from({length:(g==null?void 0:g.verses)||1},(I,x)=>x+1).map(I=>c.jsx("option",{value:I,children:I},I))})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Verse"}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Surah"}),c.jsx("select",{value:o,onChange:I=>l(Number(I.target.value)),disabled:e,className:"w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-teal-500 focus:ring-2 focus:ring-teal-200 dark:focus:ring-teal-800 focus:outline-none disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed transition-colors",children:$t.map(I=>c.jsxs("option",{value:I.number,children:[I.number,". ",I.name]},I.number))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Verse"}),c.jsx("select",{value:u,onChange:I=>d(Number(I.target.value)),disabled:e,className:"w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-teal-500 focus:ring-2 focus:ring-teal-200 dark:focus:ring-teal-800 focus:outline-none disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed transition-colors",children:Array.from({length:(w==null?void 0:w.verses)||1},(I,x)=>x+1).map(I=>c.jsx("option",{value:I,children:I},I))})]})]})]}),f?c.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:f})}):c.jsxs("div",{className:"p-4 bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-semibold text-teal-900 dark:text-teal-100",children:"Selected Range:"}),c.jsxs("span",{className:"text-sm font-bold text-teal-700 dark:text-teal-300",children:[A," ",A===1?"verse":"verses"]})]}),c.jsx("p",{className:"text-sm text-teal-800 dark:text-teal-200 font-medium",children:N})]})]})}async function iP(t){const e=new Date;e.setHours(0,0,0,0);const n=new Date(e);n.setDate(n.getDate()+1);const r=Xr(Se,"journeys",t,"readingLogs"),s=Oo(r,nu("timestamp",">=",e),nu("timestamp","<",n)),i=await Bw(s);let o=0;return i.forEach(l=>{const u=l.data();o+=u.verseCount||0}),o}function oP(t,e){const n=new Date;n.setHours(0,0,0,0);let r=1;if(e){const s=e.toDate();s.setHours(0,0,0,0);const o=(n.getTime()-s.getTime())/(1e3*60*60*24);o===0?r=t:o===1&&(r=t+1)}return{newStreak:r}}function aP(t,e,n){const r=new Date;r.setHours(0,0,0,0);let s=n;if(e){const i=e.toDate();i.setHours(0,0,0,0),r.getTime()===i.getTime()&&(s=t+n)}return s}async function lP(t){const{journeyId:e,currentUserId:n,currentUserName:r,selectedUserIds:s,members:i,startRef:o,endRef:l,note:u}=t,d=Zw(o,l),f=s.map(I=>{const x=i.find(v=>v.userId===I);return(x==null?void 0:x.displayName)||"Unknown"}),p={journeyId:e,loggedBy:n,loggedByName:r,readBy:s,readByNames:f,startRef:o,endRef:l,timestamp:nt(),verseCount:d,...(u==null?void 0:u.trim())&&{note:u.trim()}};await zw(Xr(Se,"journeys",e,"readingLogs"),p);const g=Im(o,l),w=[];for(const I of g){const x=xt(Se,"journeys",e,"verseCompletions",I);(await ia(x)).exists()||w.push(I)}const A=await iP(e),N=xt(Se,"journeys",e);if(w.length>0){const I=UC(Se);w.forEach(x=>{const v=xt(Se,"journeys",e,"verseCompletions",x);I.set(v,{verseRef:x,completedAt:nt(),completedBy:f})}),I.update(N,{"stats.versesCompleted":ru(w.length),"stats.completionPercentage":ru(w.length/6236*100),"stats.lastActivityAt":nt(),"stats.versesReadToday":A,"stats.todayDate":nt()}),await I.commit()}else await rs(N,{"stats.lastActivityAt":nt(),"stats.versesReadToday":A,"stats.todayDate":nt()});await uP(s,d),await cP(e,s)}async function uP(t,e){for(const n of t){const r=xt(Se,"users",n),s=await ia(r);if(s.exists()){const o=s.data().stats||{currentStreak:0,longestStreak:0},{newStreak:l}=oP(o.currentStreak,o.lastReadDate||null),u=Math.max(l,o.longestStreak||0),d=aP(o.todayVersesRead||0,o.todayDate||null,e);await rs(r,{"stats.currentStreak":l,"stats.longestStreak":u,"stats.totalVersesRead":ru(e),"stats.totalReadings":ru(1),"stats.lastReadDate":nt(),"stats.todayVersesRead":d,"stats.todayDate":nt()})}}}async function cP(t,e){for(const n of e){const r=Oo(Xr(Se,"journeys",t,"readingLogs"),nu("readBy","array-contains",n)),s=await Bw(r),i=new Set;for(const u of s.docs){const d=u.data();Im(d.startRef,d.endRef).forEach(p=>i.add(p))}const o=xt(Se,"journeys",t,"members",n);(await ia(o)).exists()&&await rs(o,{"stats.versesRead":i.size,"stats.lastReadAt":nt(),"stats.totalReadings":s.size})}}function dP({isOpen:t,onClose:e,journeyId:n,members:r,onSuccess:s}){const{currentUser:i,userProfile:o}=wt(),[l,u]=j.useState("1:1"),[d,f]=j.useState("1:1"),[p,g]=j.useState(!0),[w,A]=j.useState(i?[i.uid]:[]),[N,I]=j.useState(""),[x,v]=j.useState(!1),[T,D]=j.useState("");function L(E,b,C){u(E),f(b),g(C)}function F(E){A(b=>b.includes(E)?b.filter(C=>C!==E):[...b,E])}async function k(E){if(E.preventDefault(),!(!i||!o)){if(!p){D("Please select a valid verse range");return}if(w.length===0){D("Please select at least one person who read");return}D(""),v(!0);try{await lP({journeyId:n,currentUserId:i.uid,currentUserName:o.displayName,selectedUserIds:w,members:r,startRef:l,endRef:d,note:N}),u("1:1"),f("1:1"),A(i?[i.uid]:[]),I(""),e(),s&&s()}catch(b){console.error("Error logging reading:",b),D(b.message||"Failed to log reading")}finally{v(!1)}}}function _(){x||(u("1:1"),f("1:1"),A(i?[i.uid]:[]),I(""),D(""),e())}return c.jsx($u,{isOpen:t,onClose:_,title:"Log Reading",size:"lg",children:c.jsxs("form",{onSubmit:k,className:"space-y-6",children:[T&&c.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400 text-sm",children:T}),c.jsx("div",{children:c.jsx(sP,{onRangeChange:L,disabled:x})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Who read these verses?"}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:r.length===0?c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No members available"}):r.map(E=>c.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg cursor-pointer transition-colors",children:[c.jsx("input",{type:"checkbox",checked:w.includes(E.userId),onChange:()=>F(E.userId),disabled:x,className:"w-4 h-4 text-teal-600 border-gray-300 rounded focus:ring-teal-500 focus:ring-2 disabled:cursor-not-allowed"}),c.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[c.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-teal-500 to-gold-500 flex items-center justify-center text-white text-sm font-bold",children:E.displayName.charAt(0).toUpperCase()}),c.jsx("div",{children:c.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[E.displayName,E.userId===(i==null?void 0:i.uid)&&c.jsx("span",{className:"ml-1 text-xs text-gray-500 dark:text-gray-400",children:"(You)"})]})})]})]},E.userId))}),c.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Select everyone who read this range together"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Note (Optional)"}),c.jsx("textarea",{placeholder:"Add any reflections or notes...",value:N,onChange:E=>I(E.target.value),disabled:x,rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-teal-500 focus:ring-2 focus:ring-teal-200 dark:focus:ring-teal-800 focus:outline-none disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed transition-colors resize-none"})]}),c.jsx("div",{className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("svg",{className:"w-5 h-5 text-teal-600 dark:text-teal-400 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),c.jsxs("div",{className:"text-sm text-teal-800 dark:text-teal-200",children:[c.jsx("p",{className:"font-semibold mb-1",children:"What happens after logging?"}),c.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[c.jsx("li",{children:"Journey progress will be updated automatically"}),c.jsx("li",{children:"All members can see this activity in the feed"}),c.jsx("li",{children:"Individual member stats will be updated"})]})]})]})}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(ge,{type:"button",variant:"outline",onClick:_,disabled:x,className:"flex-1",children:"Cancel"}),c.jsx(ge,{type:"submit",variant:"primary",isLoading:x,disabled:!p||w.length===0,className:"flex-1",children:"Log Reading"})]})]})})}function hP({isOpen:t,onClose:e,onSuccess:n,journey:r}){const[s,i]=j.useState(r.name),[o,l]=j.useState(r.description||""),[u,d]=j.useState(""),[f,p]=j.useState(!1),[g,w]=j.useState("");j.useEffect(()=>{if(i(r.name),l(r.description||""),r.targetEndDate){const I=r.targetEndDate.toDate();d(I.toISOString().split("T")[0])}else d("")},[r]);async function A(I){I.preventDefault(),w(""),p(!0);try{const x=xt(Se,"journeys",r.id),v={name:s.trim(),description:o.trim()||void 0,targetEndDate:u?Ne.fromDate(new Date(u)):void 0};await rs(x,v),e(),n&&n()}catch(x){console.error("Error updating journey:",x),w(x.message||"Failed to update journey")}finally{p(!1)}}function N(){if(!f){if(i(r.name),l(r.description||""),r.targetEndDate){const I=r.targetEndDate.toDate();d(I.toISOString().split("T")[0])}else d("");w(""),e()}}return c.jsx($u,{isOpen:t,onClose:N,title:"Edit Journey",children:c.jsxs("form",{onSubmit:A,className:"space-y-4",children:[g&&c.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g}),c.jsx(Tm,{label:"Journey Name",placeholder:"e.g., Family Ramadan 2025",value:s,onChange:I=>i(I.target.value),required:!0,disabled:f,helperText:"Update your journey name"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),c.jsx("textarea",{placeholder:"What's the goal of this journey?",value:o,onChange:I=>l(I.target.value),disabled:f,rows:3,className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 dark:focus:ring-teal-800 focus:outline-none disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed transition-colors resize-none"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Optional: Add details about this reading journey"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Target End Date (Optional)"}),c.jsx("input",{type:"date",value:u,onChange:I=>d(I.target.value),disabled:f,min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:border-teal-500 focus:ring-2 focus:ring-teal-200 dark:focus:ring-teal-800 focus:outline-none disabled:bg-gray-50 dark:disabled:bg-gray-800 disabled:cursor-not-allowed transition-colors"}),u?(()=>{const I=new Date(u),x=new Date;x.setHours(0,0,0,0),I.setHours(0,0,0,0);const v=Math.ceil((I.getTime()-x.getTime())/(1e3*60*60*24)),T=6236-r.stats.versesCompleted,D=v>0?Math.ceil(T/v):T;return r.stats.versesCompleted>=6236?c.jsxs("p",{className:"mt-2 text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[c.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Journey already completed! Alhamdulillah!"]}):v<0?c.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:"This date is in the past. Please select a future date."}):v===0?c.jsxs("p",{className:"mt-2 text-sm text-orange-600 dark:text-orange-400 font-medium",children:["📅 Target is today! You'll need to read all ",T.toLocaleString()," remaining verses today."]}):c.jsxs("p",{className:`mt-2 text-sm font-medium ${D>100?"text-orange-600 dark:text-orange-400":"text-teal-600 dark:text-teal-400"}`,children:["📅 ",v," ",v===1?"day":"days"," until target — read ",D," ",D===1?"verse":"verses"," per day to complete on time"]})})():c.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Set a target date to calculate daily verse goals"})]}),c.jsxs("div",{className:"flex gap-3 pt-4",children:[c.jsx(ge,{type:"button",variant:"outline",onClick:N,disabled:f,className:"flex-1",children:"Cancel"}),c.jsx(ge,{type:"submit",variant:"primary",isLoading:f,className:"flex-1",children:"Save Changes"})]})]})})}function fP({readingLogs:t}){const[e,n]=j.useState("all"),[r,s]=j.useState("number"),i=j.useMemo(()=>{const u=new Set;return t.forEach(f=>{Im(f.startRef,f.endRef).forEach(g=>u.add(g))}),$t.map(f=>{let p=0;for(let A=1;A<=f.verses;A++){const N=`${f.number}:${A}`;u.has(N)&&p++}const g=p/f.verses*100;let w;return g===100?w="complete":g>0?w="in-progress":w="not-started",{surahNumber:f.number,name:f.name,nameArabic:f.nameArabic,totalVerses:f.verses,versesRead:p,percentage:g,status:w}})},[t]),o=j.useMemo(()=>{let u=[...i];return e!=="all"&&(u=u.filter(d=>d.status===e)),r==="percentage"&&u.sort((d,f)=>f.percentage-d.percentage),u},[i,e,r]),l=j.useMemo(()=>{const u=i.filter(p=>p.status==="complete").length,d=i.filter(p=>p.status==="in-progress").length,f=i.filter(p=>p.status==="not-started").length;return{complete:u,inProgress:d,notStarted:f}},[i]);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4 text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-green-700 dark:text-green-400",children:l.complete}),c.jsx("p",{className:"text-xs text-green-600 dark:text-green-500",children:"Complete"})]}),c.jsxs("div",{className:"bg-teal-50 dark:bg-teal-900/20 border border-teal-200 dark:border-teal-800 rounded-xl p-4 text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-teal-700 dark:text-teal-400",children:l.inProgress}),c.jsx("p",{className:"text-xs text-teal-600 dark:text-teal-500",children:"In Progress"})]}),c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl p-4 text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-gray-700 dark:text-gray-300",children:l.notStarted}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Not Started"})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-3",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n("all"),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e==="all"?"bg-teal-700 text-white dark:bg-teal-600":"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"All"}),c.jsx("button",{onClick:()=>n("complete"),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e==="complete"?"bg-green-600 text-white":"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"Complete"}),c.jsx("button",{onClick:()=>n("in-progress"),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e==="in-progress"?"bg-teal-600 text-white":"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"In Progress"}),c.jsx("button",{onClick:()=>n("not-started"),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${e==="not-started"?"bg-gray-600 text-white":"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"Not Started"})]}),c.jsxs("div",{className:"flex gap-2 ml-auto",children:[c.jsx("button",{onClick:()=>s("number"),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${r==="number"?"bg-teal-700 text-white dark:bg-teal-600":"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"By Number"}),c.jsx("button",{onClick:()=>s("percentage"),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${r==="percentage"?"bg-teal-700 text-white dark:bg-teal-600":"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"By Progress"})]})]}),c.jsx("div",{className:"space-y-2",children:o.length===0?c.jsx("div",{className:"text-center py-12",children:c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No surahs match this filter"})}):o.map(u=>c.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4 border border-gray-200 dark:border-gray-600 hover:border-teal-300 dark:hover:border-teal-600 transition-colors",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg bg-gradient-to-br from-teal-600 to-gold-600 flex items-center justify-center text-white font-bold shadow-sm",children:u.surahNumber}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-gray-900 dark:text-white",children:u.name}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 font-arabic",children:u.nameArabic})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[u.status==="complete"&&c.jsx("span",{className:"text-green-600 dark:text-green-400",children:c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),c.jsxs("span",{className:"text-lg font-bold text-teal-700 dark:text-teal-400",children:[u.percentage.toFixed(0),"%"]})]})]}),c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2 overflow-hidden mb-2",children:c.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${u.status==="complete"?"bg-gradient-to-r from-green-500 to-green-600":u.status==="in-progress"?"bg-gradient-to-r from-teal-500 to-gold-500":"bg-gray-300 dark:bg-gray-500"}`,style:{width:`${u.percentage}%`}})}),c.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[u.versesRead," / ",u.totalVerses," verses"]})]})]})},u.surahNumber))})]})}function mP(){const{id:t}=Lk(),[e,n]=j.useState("overview"),[r,s]=j.useState(!1),[i,o]=j.useState(!1),[l,u]=j.useState(!1),[d,f]=j.useState(!1),{journey:p,members:g,readingLogs:w,loading:A,error:N}=ZR(t||"");async function I(){const v=`${window.location.origin}/deenly/join?journey=${t}`;try{await navigator.clipboard.writeText(v),f(!0),setTimeout(()=>f(!1),2e3)}catch(T){console.error("Failed to copy invite link:",T)}}if(!t)return c.jsx(Io,{to:"/app",replace:!0});if(A)return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-gold-50/30 to-teal-100 dark:from-gray-900 dark:via-gray-800 dark:to-teal-950 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-b-2 border-teal-600 dark:border-teal-400 mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading journey..."})]})});if(N||!p)return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-gold-50/30 to-teal-100 dark:from-gray-900 dark:via-gray-800 dark:to-teal-950 flex items-center justify-center",children:c.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[c.jsx("div",{className:"text-6xl mb-4",children:"📖"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Journey Not Found"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"This journey doesn't exist or you don't have access to it."}),c.jsx(kt,{to:"/app",children:c.jsx(ge,{variant:"primary",children:"Back to App"})})]})});const x=[{id:"overview",label:"Overview"},{id:"progress",label:"Progress"},{id:"activity",label:"Activity"},{id:"members",label:"Members"}];return c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-gold-50/30 to-teal-100 dark:from-gray-900 dark:via-gray-800 dark:to-teal-950",children:[c.jsx("header",{className:"sticky top-0 z-50 bg-gradient-to-r from-teal-900 to-teal-800 dark:from-gray-900 dark:to-gray-800 shadow-lg border-b border-teal-700 dark:border-gray-700",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[c.jsx(kt,{to:"/app",className:"text-white hover:text-gold-200 transition-colors",title:"Back to App",children:c.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-white",children:(p==null?void 0:p.name)||"Journey"}),c.jsxs("p",{className:"text-xs sm:text-sm text-gold-200 dark:text-gray-400 hidden sm:block",children:[g.length," ",g.length===1?"member":"members"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Xw,{}),c.jsx(Yw,{onOpenSettings:()=>u(!0)})]})]})})}),c.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden border border-teal-100 dark:border-gray-700 mb-6",children:[c.jsxs("div",{className:"bg-gradient-to-r from-teal-700 to-teal-600 dark:from-teal-800 dark:to-teal-900 p-6 sm:p-8",children:[c.jsxs("div",{className:"flex justify-between items-start gap-4 mb-2",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white flex-1",children:p==null?void 0:p.name}),c.jsx("button",{onClick:()=>o(!0),className:"flex-shrink-0 p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors",title:"Edit Journey",children:c.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),(p==null?void 0:p.description)&&c.jsx("p",{className:"text-teal-100 dark:text-gray-300",children:p.description})]}),c.jsxs("div",{className:"p-6 sm:p-8",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Overall Progress"}),c.jsxs("span",{className:"text-2xl font-bold text-teal-700 dark:text-teal-400",children:[(p==null?void 0:p.stats.completionPercentage.toFixed(1))||0,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:"bg-gradient-to-r from-teal-500 to-gold-500 h-full rounded-full transition-all duration-500",style:{width:`${(p==null?void 0:p.stats.completionPercentage)||0}%`}})})]}),c.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center p-4 bg-teal-50 dark:bg-gray-700 rounded-xl",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Verses Read"}),c.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:(p==null?void 0:p.stats.versesCompleted.toLocaleString())||0}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"of 6,236"})]}),c.jsxs("div",{className:"text-center p-4 bg-gold-50 dark:bg-gray-700 rounded-xl",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Members"}),c.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:g.length})]}),c.jsxs("div",{className:"text-center p-4 bg-teal-50 dark:bg-gray-700 rounded-xl",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total Readings"}),c.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:w.length})]}),c.jsxs("div",{className:"text-center p-4 bg-gold-50 dark:bg-gray-700 rounded-xl",children:[c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Last Activity"}),c.jsx("p",{className:"text-xs sm:text-sm font-semibold text-gray-900 dark:text-white",children:w.length>0?"Recent":"None"})]})]})]})]}),c.jsx("div",{className:"mb-6",children:c.jsxs(ge,{variant:"primary",size:"lg",onClick:()=>s(!0),className:"w-full sm:w-auto shadow-lg",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Log Reading"]})}),c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-teal-100 dark:border-gray-700 overflow-hidden",children:[c.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:c.jsx("div",{className:"flex",children:x.map(v=>c.jsx("button",{onClick:()=>n(v.id),className:`flex-1 px-4 sm:px-6 py-3 sm:py-4 text-sm sm:text-base font-semibold transition-colors ${e===v.id?"text-teal-700 dark:text-teal-400 border-b-2 border-teal-700 dark:border-teal-400 bg-teal-50 dark:bg-gray-700":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:v.label},v.id))})}),c.jsxs("div",{className:"p-6 sm:p-8",children:[e==="overview"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Journey Overview"}),p.description&&c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:p.description})]}),p.targetEndDate&&(()=>{const v=p.targetEndDate.toDate(),T=new Date;T.setHours(0,0,0,0);const D=new Date(v);D.setHours(0,0,0,0);const L=Math.ceil((D.getTime()-T.getTime())/(1e3*60*60*24)),F=6236-p.stats.versesCompleted,k=L>0?Math.ceil(F/L):F,_=L<0,E=p.stats.versesCompleted>=6236;return c.jsxs("div",{className:"bg-gradient-to-br from-gold-50 to-teal-50 dark:from-gray-700 dark:to-gray-800 rounded-2xl p-6 border-2 border-gold-200 dark:border-gold-700",children:[c.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[c.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-gold-600 to-gold-500 rounded-xl flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-1",children:"Target End Date"}),c.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),!E&&c.jsx("p",{className:`text-sm font-medium mt-1 ${_?"text-red-600 dark:text-red-400":L<=7?"text-orange-600 dark:text-orange-400":"text-teal-700 dark:text-teal-400"}`,children:_?`Overdue by ${Math.abs(L)} ${Math.abs(L)===1?"day":"days"}`:`${L} ${L===1?"day":"days"} remaining`})]})]}),!E&&c.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full md:w-auto md:flex",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 text-center border border-gray-200 dark:border-gray-600 md:min-w-[140px]",children:[c.jsx("p",{className:"text-3xl font-bold text-gold-700 dark:text-gold-400 mb-1",children:F.toLocaleString()}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Verses Remaining"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 text-center border border-gray-200 dark:border-gray-600 md:min-w-[140px]",children:[c.jsx("p",{className:`text-3xl font-bold mb-1 ${_?"text-red-600 dark:text-red-400":k>100?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`,children:_?"—":k}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:_?"Target Passed":"Verses/Day Needed"})]})]})]}),E&&c.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-xl p-4 text-center",children:c.jsxs("p",{className:"text-green-700 dark:text-green-400 font-semibold flex items-center justify-center gap-2",children:[c.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Journey Completed! Alhamdulillah!"]})}),!E&&!_&&L<=7&&c.jsx("div",{className:"mt-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-700 rounded-xl p-3",children:c.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 text-center",children:"⏰ Less than a week remaining! Keep up the momentum!"})})]})})(),c.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-gray-50 dark:from-gray-700 dark:to-gray-800 rounded-2xl p-6 border border-teal-100 dark:border-gray-700",children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-4",children:"Journey Statistics"}),c.jsxs("div",{className:"grid grid-cols-2 md:flex md:flex-row gap-4",children:[c.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 text-center border border-gray-200 dark:border-gray-600 md:flex-1",children:[c.jsx("p",{className:"text-3xl font-bold text-teal-700 dark:text-teal-400 mb-1",children:p.stats.versesCompleted.toLocaleString()}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Verses Completed"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 text-center border border-gray-200 dark:border-gray-600 md:flex-1",children:[c.jsxs("p",{className:"text-3xl font-bold text-gold-700 dark:text-gold-400 mb-1",children:[(p.stats.versesCompleted/6236*100).toFixed(1),"%"]}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Progress"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 text-center border border-gray-200 dark:border-gray-600 md:flex-1",children:[c.jsx("p",{className:"text-3xl font-bold text-purple-700 dark:text-purple-400 mb-1",children:p.memberIds.length}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Members"})]}),c.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 text-center border border-gray-200 dark:border-gray-600 md:flex-1",children:[c.jsx("p",{className:"text-3xl font-bold text-blue-700 dark:text-blue-400 mb-1",children:w.length}),c.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Readings"})]})]})]})]}),e==="progress"&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Surah Progress"}),c.jsx(fP,{readingLogs:w})]}),e==="activity"&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),w.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-700 mb-4",children:c.jsx("svg",{className:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No activity yet"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Start logging readings to see activity here"})]}):c.jsx("div",{className:"space-y-4",children:w.map(v=>c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4 border border-gray-200 dark:border-gray-600",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:e1(v.startRef,v.endRef)}),c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[v.verseCount," ",v.verseCount===1?"verse":"verses"]})]}),c.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Qw(v.timestamp.toDate(),{addSuffix:!0})})]}),c.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:v.readByNames.map((T,D)=>c.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-teal-100 dark:bg-teal-900 text-teal-800 dark:text-teal-200",children:T},D))}),v.note&&c.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 italic mt-2",children:['"',v.note,'"']}),c.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Logged by ",v.loggedByName]})]},v.id))})]}),e==="members"&&c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Journey Members"}),c.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[g.length," ",g.length===1?"member":"members"]})]}),c.jsx("div",{className:"mb-6 bg-gradient-to-br from-teal-50 to-gold-50 dark:from-teal-900/20 dark:to-gold-900/20 border-2 border-teal-200 dark:border-teal-700 rounded-xl p-6",children:c.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[c.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-gradient-to-br from-teal-600 to-gold-600 rounded-xl flex items-center justify-center shadow-lg",children:c.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1",children:"Invite Others"}),c.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Share this link with friends and family to invite them to join this journey"}),c.jsxs(ge,{variant:"primary",onClick:I,className:"w-full sm:w-auto",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),d?"✓ Link Copied!":"Copy Invite Link"]})]})]})}),g.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-100 dark:bg-gray-700 mb-4",children:c.jsx("svg",{className:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No members yet"})]}):c.jsx("div",{className:"space-y-3",children:g.map(v=>{var T;return c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4 border border-gray-200 dark:border-gray-600 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-teal-500 to-gold-500 flex items-center justify-center text-white font-bold",children:v.displayName.charAt(0).toUpperCase()}),c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[v.displayName,v.role==="owner"&&c.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gold-100 dark:bg-gold-900 text-gold-800 dark:text-gold-200",children:"Owner"})]}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:v.email})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:((T=v.stats)==null?void 0:T.versesRead.toLocaleString())||0}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"verses"})]})]},v.userId)})})]})]})]})]}),c.jsx(dP,{isOpen:r,onClose:()=>s(!1),journeyId:t,members:g}),p&&c.jsx(hP,{isOpen:i,onClose:()=>o(!1),journey:p}),c.jsx(Jw,{isOpen:l,onClose:()=>u(!1)})]})}function pP(){const[t]=xf(),e=t.get("journey"),{currentUser:n,userProfile:r}=wt(),[s,i]=j.useState(!0),[o,l]=j.useState(""),[u,d]=j.useState(null),[f,p]=j.useState(!1),[g,w]=j.useState(!1);return j.useEffect(()=>{async function A(){if(!e){l("Invalid journey link"),i(!1);return}if(!n||!r){i(!1);return}try{const N=xt(Se,"journeys",e),I=await ia(N);if(!I.exists()){l("Journey not found"),i(!1);return}const x={id:I.id,...I.data()};if(d(x),x.memberIds.includes(n.uid)){p(!0),i(!1);return}await rs(N,{memberIds:FC(n.uid)});const v={userId:n.uid,displayName:r.displayName,email:r.email,role:"member",joinedAt:nt(),stats:{versesRead:0,lastReadAt:null,totalReadings:0}};await Em(xt(Se,"journeys",e,"members",n.uid),v),w(!0),i(!1)}catch(N){console.error("Error joining journey:",N),l(N.message||"Failed to join journey"),i(!1)}}A()},[e,n,r]),f&&e?c.jsx(Io,{to:`/journey/${e}`,replace:!0}):g&&e?c.jsx(Io,{to:`/journey/${e}`,replace:!0}):s?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-white to-gold-50 dark:from-gray-900 dark:via-gray-800 dark:to-teal-950 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-b-2 border-teal-600 dark:border-teal-400 mb-4"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Joining journey..."})]})}):n?o?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-white to-gold-50 dark:from-gray-900 dark:via-gray-800 dark:to-teal-950 flex items-center justify-center p-4",children:c.jsxs("div",{className:"max-w-md w-full text-center",children:[c.jsx("div",{className:"text-6xl mb-4",children:"❌"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Unable to Join"}),c.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:o}),c.jsx(kt,{to:"/app",children:c.jsx(ge,{variant:"primary",children:"Go to App"})})]})}):null:c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-50 via-white to-gold-50 dark:from-gray-900 dark:via-gray-800 dark:to-teal-950 flex items-center justify-center p-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 text-center border border-teal-100 dark:border-gray-700",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-600 to-gold-600 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"You've been invited!"}),u&&c.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Join ",c.jsx("span",{className:"font-semibold text-teal-700 dark:text-teal-400",children:u.name})," and start tracking your Quran reading journey together."]}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"Sign in or create an account to join this journey"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(kt,{to:`/login?redirect=${encodeURIComponent(`/join?journey=${e}`)}`,className:"block",children:c.jsx(ge,{variant:"primary",className:"w-full",children:"Sign In"})}),c.jsx(kt,{to:`/signup?redirect=${encodeURIComponent(`/join?journey=${e}`)}`,className:"block",children:c.jsx(ge,{variant:"outline",className:"w-full",children:"Create Account"})})]})]})})}function gP(){return c.jsx(a2,{basename:"/deenly/",future:{v7_relativeSplatPath:!0,v7_startTransition:!0},children:c.jsx(WC,{children:c.jsxs(Zk,{children:[c.jsx(zn,{path:"/",element:c.jsx(GC,{})}),c.jsx(zn,{path:"/login",element:c.jsx(KC,{})}),c.jsx(zn,{path:"/signup",element:c.jsx(QC,{})}),c.jsx(zn,{path:"/join",element:c.jsx(pP,{})}),c.jsx(zn,{path:"/app",element:c.jsx(sy,{children:c.jsx(XR,{})})}),c.jsx(zn,{path:"/journey/:id",element:c.jsx(sy,{children:c.jsx(mP,{})})}),c.jsx(zn,{path:"*",element:c.jsx(Io,{to:"/",replace:!0})})]})})})}YC().catch(t=>{console.error("Failed to register service worker:",t)});x_(document.getElementById("root")).render(c.jsx(j.StrictMode,{children:c.jsx(qC,{children:c.jsx(gP,{})})}));
